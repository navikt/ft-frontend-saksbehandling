import{g as le,a as re,r as je}from"./formUtils-D-F-RWtg.js";import{j as C}from"./jsx-runtime-D_zvdyIk.js";import{r as D}from"./index-DNHX5htx.js";import{u as Me,a as de}from"./index.esm-CkkEN1rj.js";import{d as h}from"./dayjs.min-Cke173X9.js";import{c as Ne}from"./customParseFormat-zfDQtV6X.js";import{P,n as g}from"./index.es-Bs6SSTCM.js";import{R as Ee}from"./ReadOnlyField-CIdolrTJ.js";import{u as ge}from"./Loader-42dkOmtz.js";import{g as xe}from"./Date.Input-D651xWgA.js";import{f as b,p as z,i as M,d as S,c as Ce,a as W,b as w,D as ee}from"./DatePicker-hprz5Yye.js";import"./Provider-BZs7ODlm.js";import{V as We,H as we}from"./VStack-xkjQwvKn.js";import"./Theme-C_brBVJK.js";import{L as qe}from"./Label-CYbek38p.js";import"./index-B-lxVbXh.js";import"./v4-CtRu48qb.js";import"./Button-Cc809GDC.js";import"./omit-B7stZg_p.js";import"./useId-CsAOvYkp.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./index.es-BiGVFuAv.js";import"./Alert-Ja4tf6sE.js";import"./useId-SP_zdaIa.js";import"./ExclamationmarkTriangleFill-DrBUO71d.js";import"./XMarkOctagonFill-Dr7RQDrl.js";import"./XMark-6H9iuGiv.js";import"./PersonPencilFill-DqunLdn1.js";import"./Box-C3b4VC_S.js";import"./BasePrimitive-gBgyIEwX.js";import"./KeyVerticalFill-DmgzHF4Z.js";import"./Modal-DdoS0OAm.js";import"./floating-ui.react-D9M9yXN8.js";import"./index-DU09BupE.js";import"./index-7Fg4giie.js";import"./ReadOnlyIcon-BUzfiMc5.js";import"./useFormField-Bu2NUIkp.js";import"./useControllableState-CEDyyUuG.js";import"./Popover-uyW-ft96.js";import"./useClientLayoutEffect-pkze6c0k.js";import"./Select-CvyZY3UD.js";import"./ChevronDown-6T9JsqER.js";const te=(o={},t={})=>({from:Object.assign({isDisabled:!1,isWeekend:!1,isEmpty:!1,isInvalid:!1,isBefore:!1,isAfter:!1,isValidDate:!0},o),to:Object.assign({isDisabled:!1,isWeekend:!1,isEmpty:!1,isInvalid:!1,isBefore:!1,isAfter:!1,isBeforeFrom:!1,isValidDate:!0},t)}),T={FROM:"FROM",TO:"TO"},Be=(o,t)=>{const i=(t==null?void 0:t.fromDate)&&o&&S(t==null?void 0:t.fromDate,o)>0,n=(t==null?void 0:t.toDate)&&o&&S(o,t==null?void 0:t.toDate)>0;if(M(o)&&!(t!=null&&t.disableWeekends&&W(o))&&!(t!=null&&t.disabled&&w(o,t.disabled)))return{isValidDate:!1,isInvalid:!M(o),isWeekend:(t==null?void 0:t.disableWeekends)&&W(o),isDisabled:(t==null?void 0:t.disabled)&&w(o,t.disabled),isBefore:i,isAfter:n};if(i||n)return{isValidDate:!1,isBefore:i,isAfter:n}},_e=(o,t,i)=>{var n;const V=(i==null?void 0:i.fromDate)&&o&&S(i==null?void 0:i.fromDate,o)>0,R=(i==null?void 0:i.toDate)&&o&&S(o,i==null?void 0:i.toDate)>0,m=(n=t&&S(t,o)>0)!==null&&n!==void 0?n:!1;if(M(o)&&!(i!=null&&i.disableWeekends&&W(o))&&!(i!=null&&i.disabled&&w(o,i.disabled)))return{isValidDate:!1,isInvalid:!M(o),isWeekend:(i==null?void 0:i.disableWeekends)&&W(o),isDisabled:(i==null?void 0:i.disabled)&&w(o,i.disabled),isBefore:V,isAfter:R,isBeforeFrom:m};if(V||R||m)return{isValidDate:!1,isBefore:V,isAfter:R,isBeforeFrom:m}},oe=(o,t)=>{if(!o||!(o!=null&&o.from))return te({isEmpty:!0,isValidDate:!1},{isEmpty:!0,isValidDate:!1});const i=Be(o.from,t),n=o.to?_e(o.to,o.from,t):{isEmpty:!0,isValidDate:!1};return te(Object.assign({},i),Object.assign({},n))},Le=(o={})=>{const{locale:t,defaultSelected:i,today:n=new Date,fromDate:V,toDate:R,disabled:m,disableWeekends:q,onRangeChange:_,inputFormat:v,onValidate:B,defaultMonth:p,allowTwoDigitYear:O=!0}=o,[N,A]=D.useState(null),L=ge(),f=t?xe(t):L,[a,y]=D.useState(i),[J,j]=D.useState(a?a==null?void 0:a.from:p??n),[s,K]=D.useState(a??{from:void 0,to:void 0}),[Q,E]=D.useState(a!=null&&a.from?b(a.from,f,"date",v):""),[r,u]=D.useState(a!=null&&a.to?b(a.to,f,"date",v):""),[c,U]=D.useState(oe(s,o)),[Re,X]=D.useState(!1),k=e=>{_==null||_(e),K(e)},I=(e={},l={})=>{const d=te(e,l);U(d),B==null||B(d)},he=()=>{k(a??{from:void 0,to:void 0}),j(a?a==null?void 0:a.from:p??n),U(oe(a??{from:void 0,to:void 0},o)),E(a!=null&&a.from?b(a.from,f,"date",v):""),u(a!=null&&a.to?b(a.to,f,"date",v):""),y(i)},Se=e=>{k(e),E(e!=null&&e.from?b(e.from,f,"date",v):""),u(e!=null&&e.to?b(e==null?void 0:e.to,f,"date",v):""),U(oe(e,o))},ie=(e,l)=>{if(e.target.readOnly)return;const d=z(e.target.value,n,f,"date",O);if(M(d)){l===T.FROM?E(b(d,f,"date",v)):u(b(d,f,"date",v));const F=V&&d&&S(V,d)>0,x=R&&d&&S(d,R)>0;!F&&!x&&j(d)}},ae=(e,l)=>{const d=z(e.target.value,n,f,"date",O);M(d)&&(l===T.FROM?E(b(d,f,"date",v)):l===T.TO&&u(b(d,f,"date",v)))},Z=e=>M(e)&&!(q&&W(e))&&!(m&&w(e,m)),Ie=e=>{e!=null&&e.from&&(e!=null&&e.to)&&(Ce(e.from,e.to)||(X(!1),N==null||N.focus())),E(e!=null&&e.from?b(e.from,f,"date",v):""),u(e!=null&&e.to?b(e.to,f,"date",v):""),k({from:e==null?void 0:e.from,to:e==null?void 0:e.to}),I({isValidDate:!!(e!=null&&e.from),isEmpty:!(e!=null&&e.from)},{isValidDate:!!(e!=null&&e.to),isEmpty:!(e!=null&&e.to)})},Pe=(e="",l,d=!1,F=!1)=>{if(E(e),!Z(l)){k(Object.assign(Object.assign({},s),{from:void 0})),I({isEmpty:!e,isValidDate:!1,isInvalid:!M(l),isWeekend:q&&W(l),isDisabled:m&&w(l,m),isBefore:d,isAfter:F},c.to);return}if(d||F){k(Object.assign(Object.assign({},s),{from:void 0})),I({isValidDate:!1,isBefore:d,isAfter:F},c.to);return}if(s!=null&&s.to&&S(l,s==null?void 0:s.to)>0){k({to:l,from:l}),u(b(l,f,"date",v)),j(l),I();return}if(r&&!(s!=null&&s.to)){const x=z(r,n,f,"date",O);if(Z(x)){k({from:l,to:x}),j(l),I();return}}k(Object.assign(Object.assign({},s),{from:l})),I({},c.to),j(l)},Te=(e="",l,d=!1,F=!1)=>{if(u(e),!Z(l)){k({from:s==null?void 0:s.from,to:void 0}),I(c.from,{isEmpty:!e,isValidDate:!1,isInvalid:!M(l),isWeekend:q&&W(l),isDisabled:m&&w(l,m),isBefore:d,isAfter:F});return}if(d||F){k({from:s==null?void 0:s.from,to:void 0}),I(c.from,{isValidDate:!1,isBefore:d,isAfter:F});return}if(s!=null&&s.from&&S(s==null?void 0:s.from,l)>0){k({from:s==null?void 0:s.from,to:void 0}),I(c.from,{isValidDate:!1,isBeforeFrom:!0});return}k({from:s==null?void 0:s.from,to:l}),I(c.from,{}),j(l)},se=(e,l)=>{const d=z(e.target.value,n,f,"date",O),F=V&&S(V,d)>0,x=R&&S(d,R)>0;return l===T.FROM?Pe(e.target.value,d,F,x):Te(e.target.value,d,F,x)};return{datepickerProps:{month:J,onMonthChange:j,onSelect:Ie,selected:s,locale:t,fromDate:V,toDate:R,today:n,mode:"range",open:Re,onOpenToggle:()=>X(e=>!e),onClose:()=>{X(!1),N==null||N.focus()},disabled:m,disableWeekends:q},fromInputProps:{onChange:e=>se(e,T.FROM),onFocus:e=>ie(e,T.FROM),onBlur:e=>ae(e,T.FROM),value:Q,setAnchorRef:A},toInputProps:{onChange:e=>se(e,T.TO),onFocus:e=>ie(e,T.TO),onBlur:e=>ae(e,T.TO),value:r,setAnchorRef:A},reset:he,selectedRange:s,setSelected:Se}};h.extend(Ne);const Fe=({fomName:o,tomName:t,label:i,validate:n=[],disabled:V=!1,isReadOnly:R=!1,onChange:m,fromDate:q,toDate:_,isEdited:v})=>{const{formState:{errors:B}}=Me(),{field:p}=de({name:o,rules:{validate:D.useMemo(()=>le(n),[n])}}),{field:O}=de({name:t,rules:{validate:D.useMemo(()=>le(n),[n])}}),N=p.value?h(p.value,P,!0).format(g):"",[A,L]=D.useState(N),f=O.value?h(O.value,P,!0).format(g):"",[a,y]=D.useState(f),{datepickerProps:J,toInputProps:j,fromInputProps:s}=Le({onRangeChange:r=>{const u=r!=null&&r.from?h(r==null?void 0:r.from).format(P):void 0;m&&m(u),p.onChange(u),L(h(u,P,!0).format(g));const c=r!=null&&r.to?h(r==null?void 0:r.to).format(P):void 0;m&&m(c),O.onChange(c),y(c?h(c,P,!0).format(g):"")}}),K=D.useCallback(r=>{const u=h(r.target.value,g,!0).format(P),c=u!=="Invalid Date";L(r.target.value),m&&m(c?u:r.target.value),p.onChange(c?u:r.target.value)},[L,m,p]),Q=D.useCallback(r=>{const u=h(r.target.value,g,!0).format(P),c=u!=="Invalid Date";y(r.target.value),m&&m(c?u:r.target.value),O.onChange(c?u:r.target.value)},[y,m,O]);if(R){const r=p.value?h(p.value,P,!0).format(g):void 0,u=O.value?h(O.value,P,!0).format(g):void 0;return C.jsx(Ee,{label:i,value:`${r} - ${u||""}`,isEdited:v})}const E={...J,fromDate:q,toDate:_};return C.jsx(ee,{...E,children:C.jsxs(We,{gap:"2",children:[C.jsx(qe,{size:"small",children:i}),C.jsxs(we,{gap:"4",children:[C.jsx(ee.Input,{...s,onChange:K,value:A,size:"small",hideLabel:!0,label:"","aria-label":"Fra dato",disabled:V,error:re(B,o)}),C.jsx(ee.Input,{...j,onChange:Q,value:a,size:"small",label:"","aria-label":"Til dato",hideLabel:!0,disabled:V,error:re(B,t)})]})]})})};Fe.__docgenInfo={description:"",methods:[],displayName:"Rangepicker",props:{fomName:{required:!0,tsType:{name:"string"},description:""},tomName:{required:!0,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},validate:{required:!1,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"((value: string) => any)[]"},description:"",defaultValue:{value:"[]",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isReadOnly:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: any) => void",signature:{arguments:[{type:{name:"any"},name:"value"}],return:{name:"void"}}},description:""},fromDate:{required:!1,tsType:{name:"Date"},description:""},toDate:{required:!1,tsType:{name:"Date"},description:""},isEdited:{required:!1,tsType:{name:"boolean"},description:""}}};const xo={component:Fe,tags:["autodocs"],decorators:je({fomPre:"2022-10-22",tomPre:"2022-10-27"})},H={args:{fomName:"fom",tomName:"tom",label:"Dette er en rangepicker"}},$={args:{fomName:"fom",tomName:"tom",label:"Dette er en rangepicker med disabled datoer",fromDate:new Date("2022-10-10"),toDate:new Date("2022-10-14")}},G={args:{label:"Dette er en rangepicker der verdi er valgt",fomName:"fomPre",tomName:"tomPre"}},Y={args:{label:"Dette er en rangepicker som er readonly",fomName:"fomPre",tomName:"tomPre",isReadOnly:!0,isEdited:!0}};var ne,me,ue;H.parameters={...H.parameters,docs:{...(ne=H.parameters)==null?void 0:ne.docs,source:{originalSource:`{
  args: {
    fomName: 'fom',
    tomName: 'tom',
    label: 'Dette er en rangepicker'
  }
}`,...(ue=(me=H.parameters)==null?void 0:me.docs)==null?void 0:ue.source}}};var fe,ce,ve;$.parameters={...$.parameters,docs:{...(fe=$.parameters)==null?void 0:fe.docs,source:{originalSource:`{
  args: {
    fomName: 'fom',
    tomName: 'tom',
    label: 'Dette er en rangepicker med disabled datoer',
    fromDate: new Date('2022-10-10'),
    toDate: new Date('2022-10-14')
  }
}`,...(ve=(ce=$.parameters)==null?void 0:ce.docs)==null?void 0:ve.source}}};var pe,De,be;G.parameters={...G.parameters,docs:{...(pe=G.parameters)==null?void 0:pe.docs,source:{originalSource:`{
  args: {
    label: 'Dette er en rangepicker der verdi er valgt',
    fomName: 'fomPre',
    tomName: 'tomPre'
  }
}`,...(be=(De=G.parameters)==null?void 0:De.docs)==null?void 0:be.source}}};var Ve,Oe,ke;Y.parameters={...Y.parameters,docs:{...(Ve=Y.parameters)==null?void 0:Ve.docs,source:{originalSource:`{
  args: {
    label: 'Dette er en rangepicker som er readonly',
    fomName: 'fomPre',
    tomName: 'tomPre',
    isReadOnly: true,
    isEdited: true
  }
}`,...(ke=(Oe=Y.parameters)==null?void 0:Oe.docs)==null?void 0:ke.source}}};const Co=["Default","MedDisabledDatoer","MedVerdi","ReadOnly"];export{H as Default,$ as MedDisabledDatoer,G as MedVerdi,Y as ReadOnly,Co as __namedExportsOrder,xo as default};
