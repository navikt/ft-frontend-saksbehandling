import{r as i,R as c}from"./index-Dxs5m6lS.js";import{u as k}from"./useId-B9cQ8Pho.js";import{D as de,a as ze}from"./Label-g0SsZd4P.js";import{a as z,u as Ye}from"./Loader-BHKWc60O.js";import{t as _,d as He,o as ue,L as Be,M as V,N as K,O as fe,x as me,e as I,j as Ze,P as J,g as Ve,Q as Ke,R as Ue,S as U}from"./useDateTranslationContext-BEjj1I9s.js";import{a as pe,o as ve,f as be,g as he,h as ge,i as ye,c as we,s as Oe,d as _e,e as xe,k as je,b as Ee,F as Pe}from"./floating-ui.react-BIOaLlQ7.js";import{u as Re}from"./Theme-D6t0sq75.js";import{u as Ie}from"./create-context-B5rPGqtO.js";import{c as $}from"./clsx-B-dksMZM.js";import{o as G}from"./omit-B7stZg_p.js";import"./useId-BdcioVLy.js";var Xe=function(e,l){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)l.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(n[t[o]]=e[t[o]]);return n};const Yt=i.forwardRef((e,l)=>{var{title:n,titleId:t}=e,o=Xe(e,["title","titleId"]);let r=k();return r=n?t||"title-"+r:void 0,i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:l,"aria-labelledby":r},o),n?i.createElement("title",{id:r},n):null,i.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3.75 12a8.25 8.25 0 1 1 16.5 0 8.25 8.25 0 0 1-16.5 0M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25m4.573 7.234a.75.75 0 1 0-1.146-.968l-4.973 5.877L8.03 11.97a.75.75 0 0 0-1.06 1.06l3 3a.75.75 0 0 0 1.102-.046z",clipRule:"evenodd"}))});var Qe=function(e,l){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)l.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(n[t[o]]=e[t[o]]);return n};const Ht=i.forwardRef((e,l)=>{var{title:n,titleId:t}=e,o=Qe(e,["title","titleId"]);let r=k();return r=n?t||"title-"+r:void 0,i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:l,"aria-labelledby":r},o),n?i.createElement("title",{id:r},n):null,i.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 2.25a.75.75 0 0 1 .656.387l9.527 17.25A.75.75 0 0 1 21.526 21H2.474a.75.75 0 0 1-.657-1.113l9.527-17.25A.75.75 0 0 1 12 2.25m8.255 17.25L12 4.551 3.745 19.5zM12 8.75a.75.75 0 0 1 .75.75v4a.75.75 0 0 1-1.5 0v-4a.75.75 0 0 1 .75-.75m0 6.75a1 1 0 1 0 0 2 1 1 0 0 0 0-2",clipRule:"evenodd"}))});var We=function(e,l){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)l.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(n[t[o]]=e[t[o]]);return n};const Bt=i.forwardRef((e,l)=>{var{title:n,titleId:t}=e,o=We(e,["title","titleId"]);let r=k();return r=n?t||"title-"+r:void 0,i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:l,"aria-labelledby":r},o),n?i.createElement("title",{id:r},n):null,i.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12.55 3.75a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5M9.8 5a2.75 2.75 0 1 1 5.5 0 2.75 2.75 0 0 1-5.5 0m3.5 4a.75.75 0 0 1 .75-.75h2a.75.75 0 0 1 .75.75v7.106a.75.75 0 0 1-.75.75H14.8V21a.75.75 0 0 1-1.5 0v-4.894a.75.75 0 0 1 .75-.75h1.25V9.75h-1.25A.75.75 0 0 1 13.3 9m-2.78.916a.25.25 0 0 1 .235-.166h.295a.75.75 0 0 0 0-1.5h-.295c-.74 0-1.4.465-1.648 1.161l-2.263 6.337a.75.75 0 0 0 .706 1.002h2.75V21a.75.75 0 0 0 1.5 0v-5a.75.75 0 0 0-.75-.75H8.614z",clipRule:"evenodd"}))});var qe=function(e,l){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)l.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(n[t[o]]=e[t[o]]);return n};const Zt=i.forwardRef((e,l)=>{var{title:n,titleId:t}=e,o=qe(e,["title","titleId"]);let r=k();return r=n?t||"title-"+r:void 0,i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:l,"aria-labelledby":r},o),n?i.createElement("title",{id:r},n):null,i.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.75 12a.75.75 0 0 1 .75-.75h13a.75.75 0 1 1 0 1.5h-13a.75.75 0 0 1-.75-.75",clipRule:"evenodd"}))});var Ge=function(e,l){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)l.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(n[t[o]]=e[t[o]]);return n};const Vt=i.forwardRef((e,l)=>{var{title:n,titleId:t}=e,o=Ge(e,["title","titleId"]);let r=k();return r=n?t||"title-"+r:void 0,i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:l,"aria-labelledby":r},o),n?i.createElement("title",{id:r},n):null,i.createElement("path",{fill:"currentColor",d:"M12.75 5.5a.75.75 0 0 0-1.5 0v5.75H5.5a.75.75 0 0 0 0 1.5h5.75v5.75a.75.75 0 0 0 1.5 0v-5.75h5.75a.75.75 0 0 0 0-1.5h-5.75z"}))});var Je=function(e,l){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)l.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(n[t[o]]=e[t[o]]);return n};const Kt=i.forwardRef((e,l)=>{var{title:n,titleId:t}=e,o=Je(e,["title","titleId"]);let r=k();return r=n?t||"title-"+r:void 0,i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:l,"aria-labelledby":r},o),n?i.createElement("title",{id:r},n):null,i.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.272 2.25a.75.75 0 0 0-.53.22L2.47 7.742a.75.75 0 0 0-.22.53v7.456c0 .199.079.39.22.53l5.272 5.272c.14.141.331.22.53.22h7.456a.75.75 0 0 0 .53-.22l5.272-5.272a.75.75 0 0 0 .22-.53V8.272a.75.75 0 0 0-.22-.53L16.258 2.47a.75.75 0 0 0-.53-.22zM3.75 8.583 8.583 3.75h6.834l4.833 4.833v6.834l-4.833 4.833H8.583L3.75 15.417zm5.28-.613a.75.75 0 0 0-1.06 1.06L10.94 12l-2.97 2.97a.75.75 0 1 0 1.06 1.06L12 13.06l2.97 2.97a.75.75 0 1 0 1.06-1.06L13.06 12l2.97-2.97a.75.75 0 0 0-1.06-1.06L12 10.94z",clipRule:"evenodd"}))});function H(e,l){const n=_(e),t=_(l),o=n.getTime()-t.getTime();return o<0?-1:o>0?1:o}function et(e,l){const n=_(e),t=_(l);return n.getFullYear()-t.getFullYear()}function Se(e,l){const n=_(e),t=_(l),o=ae(n,t),r=Math.abs(He(n,t));n.setDate(n.getDate()-o*r);const d=+(ae(n,t)===-o),a=o*(r-d);return a===0?0:a}function ae(e,l){const n=e.getFullYear()-l.getFullYear()||e.getMonth()-l.getMonth()||e.getDate()-l.getDate()||e.getHours()-l.getHours()||e.getMinutes()-l.getMinutes()||e.getSeconds()-l.getSeconds()||e.getMilliseconds()-l.getMilliseconds();return n<0?-1:n>0?1:n}function se(e,l){return+_(e)-+_(l)}function X(e){const l=_(e);return l.setHours(23,59,59,999),l}function tt(e){const l=_(e);return+X(l)==+ue(l)}function nt(e,l){const n=_(e),t=_(l),o=H(n,t),r=Math.abs(Be(n,t));let d;if(r<1)d=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-o*r);let a=H(n,t)===-o;tt(_(e))&&r===1&&H(e,t)===1&&(a=!1),d=o*(r-Number(a))}return d===0?0:d}function ot(e,l){const n=_(e),t=_(l),o=H(n,t),r=Math.abs(et(n,t));n.setFullYear(1584),t.setFullYear(1584);const d=H(n,t)===-o,a=o*(r-+d);return a===0?0:a}function lt(e){const l=_(e),n=l.getFullYear();return l.setFullYear(n+1,0,0),l.setHours(23,59,59,999),l}function rt(e,l){return V(e,-l)}const Ut=()=>c.createElement("span",{className:"navds-stack__spacer"}),Ce=i.createContext({startDate:new Date,endDate:new Date,direction:"left",setStart:()=>null,setEndInclusive:()=>null,activeRow:0,setActiveRow:()=>null,initiate:()=>null,addFocusable:()=>null}),B=()=>{const e=i.useContext(Ce);return e||console.warn("useTimelineContext must be used with TimelineContext (<Timeline />)"),e},at=({horizontalPosition:e})=>e<=98&&e>=0,ie=(e,l)=>Se(e,l)<=1,st=({horizontalPosition:e,width:l})=>e>=0&&e<=100&&l>0,ee=(e,l,n)=>{const t=se(n,l);return se(e,l)/t*100},Q=(e,l,n,t)=>{const o=ee(e,n,t),r=ee(l,n,t)-o;return{horizontalPosition:o,width:r}},it=(e,l,n,t,o,r)=>{const d=Math.ceil(n/10),a=K(l);return new Array(n).fill(a).map((m,p)=>{if(p%d!==0)return null;const f=fe(m,p),{horizontalPosition:h,width:v}=Q(f,me(f,1),e,l);return{direction:t,horizontalPosition:h,label:I(f,o,{locale:r}),date:f,width:v}}).filter(m=>m!==null)},ct=(e,l,n,t,o)=>{const r=Ze(e),d=ue(l),a=nt(d,r)+1;return new Array(a).fill(r).map((m,p)=>{const f=J(m,p),{horizontalPosition:h,width:v}=Q(f,J(f,1),e,l);return{direction:n,horizontalPosition:h,label:I(f,t,{locale:o}),date:f,width:v}})},dt=(e,l,n,t,o)=>{const r=Ve(e),d=lt(l),a=ot(d,e)+1;return new Array(a).fill(r).map((m,p)=>{const f=V(m,p),{horizontalPosition:h,width:v}=Q(f,V(f,1),e,l);return{direction:n,horizontalPosition:h,label:I(f,t,{locale:o}),date:f,width:v}})},ut=(e,l,n,t,o)=>{const r=Se(l,e);if(r<40){const a=o("dayFormat");return it(e,l,r,n,a,t)}if(r<370){const a=o("monthFormat");return ct(e,l,n,a,t)}const d=o("yearFormat");return dt(e,l,n,d,t)},ft=({templates:e})=>{const{endDate:l,startDate:n,direction:t}=B(),o=z("Timeline",{dayFormat:e==null?void 0:e.day,monthFormat:e==null?void 0:e.month,yearFormat:e==null?void 0:e.year}),r=Ye(),d=ut(n,l,t,r,o);return c.createElement("div",{className:"navds-timeline__axislabels","aria-hidden":"true"},d.filter(at).map(a=>c.createElement(de,{className:"navds-timeline__axislabels-label",as:"div",key:a.label,style:{justifyContent:t==="left"?"flex-start":"flex-end",[t]:`${a.horizontalPosition}%`,width:`${a.width}%`}},a.label)))};var mt=function(e,l){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)l.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(n[t[o]]=e[t[o]]);return n};const De=i.forwardRef((e,l)=>{var{date:n,children:t}=e,o=mt(e,["date","children"]);const{startDate:r,endDate:d,direction:a}=B(),[m,p]=i.useState(!1),f=i.useRef(null),h=z("Timeline"),O=!Re(!1),{context:y,placement:u,middlewareData:{arrow:{x:w,y:g}={}},refs:P,floatingStyles:M}=pe({placement:"top",open:m,onOpenChange:b=>p(b),whileElementsMounted:ye,middleware:[ve(O?16:8),be(),he({padding:5,fallbackPlacements:["bottom","top"]}),ge({element:f,padding:5})]}),F=we(y,{handleClose:Oe(),restMs:25,delay:{open:1e3},move:!1}),T=_e(y),Z=xe(y),S=je(y,{role:"dialog"}),{getFloatingProps:C,getReferenceProps:L}=Ee([F,T,Z,S]),N=Ie(P.setReference,l),s={top:"bottom",right:"left",bottom:"top",left:"right"}[u.split("-")[0]];return c.createElement(c.Fragment,null,c.createElement("div",{className:"navds-timeline__pin-wrapper",style:{[a]:`${ee(n,r,d)}%`}},c.createElement("button",Object.assign({},o,{ref:N,className:"navds-timeline__pin-button","aria-label":h("Pin.pin",{date:I(n,h("dateFormat"))}),type:"button","aria-expanded":t?m:void 0},L({onKeyDown:b=>{var x;(x=o==null?void 0:o.onKeyDown)===null||x===void 0||x.call(o,b),b.key==="Enter"?p(D=>!D):b.key===" "&&p(!1)}})))),t&&m&&c.createElement(Pe,{context:y,modal:!1,initialFocus:-1,returnFocus:!1},c.createElement("div",Object.assign({className:"navds-timeline__popover","data-placement":u,ref:P.setFloating},C(),{tabIndex:void 0,style:M}),t,O&&c.createElement("div",{ref:f,style:Object.assign(Object.assign(Object.assign({},w!=null?{left:w}:{}),g!=null?{top:g}:{}),s?{[s]:"-0.5rem"}:{}),className:"navds-timeline__popover-arrow"}))))});De.componentType="pin";const Fe=i.createContext({periodId:"",firstFocus:!1}),Me=()=>{const e=i.useContext(Fe);return e||console.warn("usePeriodContext must be used with PeriodContext"),e},Te=i.createContext({periods:[],id:"",active:!1,index:0}),te=()=>{const e=i.useContext(Te);return e||console.warn("useRowContext must be used with RowContext"),e},Ae=(e,l,n)=>$(`navds-timeline__period navds-timeline__period--${n}`,{"navds-timeline__period--connected-both":e==="both","navds-timeline__period--connected-right":e==="right"&&l==="left"||e==="left"&&l==="right","navds-timeline__period--connected-left":e==="left"&&l==="left"||e==="right"&&l==="right"}),Le=(e,l,n,t,o)=>{const r=o("dateFormat"),d=I(e,r),a=I(l,r);return o("Period.period",{status:t||o(`Period.${n}`),start:d,end:a})},pt=c.memo(({onSelectPeriod:e,start:l,end:n,status:t,cropped:o,direction:r,left:d,width:a,icon:m,children:p,isActive:f,statusLabel:h,restProps:v,periodRef:O})=>{const[y,u]=i.useState(!1),{index:w}=te(),{firstFocus:g}=Me(),{initiate:P,addFocusable:M}=B(),F=i.useRef(null),T=z("Timeline"),S=!Re(!1),{context:C,placement:L,middlewareData:{arrow:{x:N,y:s}={}},refs:b,floatingStyles:x}=pe({placement:"top",open:y,onOpenChange:E=>u(E),whileElementsMounted:ye,middleware:[ve(S?16:8),be(),he({padding:5,fallbackPlacements:["bottom","top"]}),ge({element:F,padding:5})]}),D=we(C,{handleClose:Oe(),restMs:25,delay:{open:1e3},move:!1}),Y=_e(C),j=xe(C),q=je(C,{role:"dialog"}),{getFloatingProps:R,getReferenceProps:Ne}=Ee([D,Y,j,q]),$e=Ie(b.setReference,O),re={top:"bottom",right:"left",bottom:"top",left:"right"}[L.split("-")[0]];return c.createElement(c.Fragment,null,c.createElement("button",Object.assign({},v,{type:"button",ref:E=>{g&&M(E,w),$e(E)},"aria-label":Le(l,n,t,h,T),className:$("navds-timeline__period--clickable",Ae(o,r,t),v==null?void 0:v.className,{"navds-timeline__period--selected":f}),"aria-expanded":p?y:void 0,"aria-current":f||void 0},Ne({onFocus:()=>{P(w)},onKeyDown:E=>{var A;(A=v==null?void 0:v.onKeydown)===null||A===void 0||A.call(v,E),E.key==="Enter"&&u(ke=>!ke),E.key===" "&&(e==null||e(E),u(!1))},style:{width:`${a}%`,[r]:`${d}%`},onClick:E=>{var A;(A=v==null?void 0:v.onClick)===null||A===void 0||A.call(v,E),E.detail!==0&&(e==null||e(E))}})),c.createElement("span",{className:"navds-timeline__period--inner"},m)),p&&y&&c.createElement(Pe,{context:C,modal:!1,initialFocus:-1,returnFocus:!1},c.createElement("div",Object.assign({className:"navds-timeline__popover","data-placement":L,ref:b.setFloating},R(),{style:x}),p,S&&c.createElement("div",{ref:F,style:Object.assign(Object.assign(Object.assign({},N!=null?{left:N}:{}),s!=null?{top:s}:{}),re?{[re]:"-0.5rem"}:{}),className:"navds-timeline__popover-arrow"}))))}),vt=({start:e,end:l,status:n,cropped:t,direction:o,left:r,width:d,icon:a,statusLabel:m,restProps:p,periodRef:f})=>{const h=z("Timeline");return c.createElement("div",Object.assign({ref:f},p,{className:$(Ae(t,o,n),p==null?void 0:p.className),style:{width:`${d}%`,[o]:`${r}%`}}),c.createElement("span",{className:"navds-timeline__period--inner"},a,c.createElement("span",{className:"sr-only"},Le(e,l,n,m,h))))},ne=i.forwardRef(({icon:e},l)=>{const{periods:n}=te(),{periodId:t,restProps:o}=Me(),r=n.find(g=>g.id===t);if(!r)return c.createElement(c.Fragment,null);const{start:d,endInclusive:a,width:m,horizontalPosition:p,status:f="neutral",onSelectPeriod:h,cropped:v,direction:O,children:y,isActive:u,statusLabel:w}=r;return h||y?c.createElement(pt,{periodRef:l,start:d,end:a,status:f,onSelectPeriod:h,cropped:v||"",direction:O,width:m,left:p,icon:e,isActive:u,statusLabel:w,restProps:o},y):c.createElement(vt,{periodRef:l,start:d,end:a,status:f,cropped:v||"",direction:O,width:m,left:p,icon:e,statusLabel:w,restProps:o})});ne.componentType="period";var bt=function(e,l){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)l.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(n[t[o]]=e[t[o]]);return n};const oe=i.forwardRef((e,l)=>{var{label:n,className:t,headingTag:o="h3",icon:r}=e,d=bt(e,["label","className","headingTag","icon"]);const{periods:a,id:m,active:p}=te(),{setActiveRow:f}=B(),h=z("Timeline"),v=a.reduce((u,w)=>u.end>w.end?u:w,{}),O=a.reduce((u,w)=>u.end<w.end?u:w,{}),y=a.find(u=>!!u.children||!!u.onSelectPeriod);return c.createElement(c.Fragment,null,n&&c.createElement(ze,{as:o,id:`timeline-row-${m}`,className:"navds-timeline__row-label",size:"small"},r,n),c.createElement("div",{className:$("navds-timeline__row",{"navds-timeline__row--active":p})},c.createElement("ol",Object.assign({},d,{tabIndex:-1,ref:l,"aria-label":a.length===0?h("Row.noPeriods"):h("Row.period",{start:I(O.start,h("dateFormat")),end:I(v.end,h("dateFormat"))}),className:$("navds-timeline__row-periods",t),onKeyDown:u=>{(u.key==="ArrowDown"||u.key==="ArrowUp")&&(u.preventDefault(),f(u.key))}}),a==null?void 0:a.map(u=>c.createElement("li",{key:`period-${u.id}`},c.createElement(Fe.Provider,{value:{periodId:u.id,firstFocus:(y==null?void 0:y.id)===u.id,restProps:u==null?void 0:u.restProps}},c.createElement(ne,{start:u.start,end:u.endInclusive,icon:u.icon,ref:u==null?void 0:u.ref})))))))});oe.componentType="row";const ht=(e,l)=>e.horizontalPosition-l.horizontalPosition,gt=(e,l,n,t="left",o,r,d)=>{const a=e.start,m=e.end,p=o<r.length-1&&!Ke(r[o+1].start,m),{horizontalPosition:f,width:h}=Q(K(a),X(p?K(fe(r[o+1].start,1)):m),l,n);return{id:`r-${d}-p-${o}`,start:a,endInclusive:m,horizontalPosition:f,direction:t,width:h,end:m,status:e.status,onSelectPeriod:e.onSelectPeriod,icon:e.icon,children:e.children,isActive:e.isActive,statusLabel:e.statusLabel}},yt=(e,l,n)=>{const t=l>0&&ie(e.start,n[l-1].endInclusive),o=l<n.length-1&&ie(n[l+1].start,e.endInclusive);return t&&o?Object.assign(Object.assign({},e),{cropped:"both"}):t?Object.assign(Object.assign({},e),{cropped:"left"}):o?Object.assign(Object.assign({},e),{cropped:"right"}):e},wt=e=>{let{horizontalPosition:l,width:n,cropped:t}=e;return l+n>100&&(n=100-l,t=t==="left"||t==="both"?"both":"right"),l<0&&l+n>0&&(n=l+n,l=0,t=t==="right"||t==="both"?"both":"left"),Object.assign(Object.assign({},e),{width:n,horizontalPosition:l,cropped:t})},Ot=(e,l,n,t)=>i.useMemo(()=>e.map((o,r)=>{const d=o.periods.sort((a,m)=>a.start.valueOf()-m.start.valueOf()).map((a,m)=>Object.assign(Object.assign({},gt(a,l,n,t,m,o.periods,r)),{restProps:a==null?void 0:a.restProps,ref:a==null?void 0:a.ref})).sort(ht).map(yt).map(wt).filter(st);return{id:`tl-row-${r}`,label:o.label,headingTag:o.headingTag||"h3",icon:o.icon,periods:t==="left"?d:d.reverse(),restProps:o==null?void 0:o.restProps,ref:o==null?void 0:o.ref}}),[e,l,n,t]),_t=({startDate:e,rows:l})=>i.useMemo(()=>{if(e)return e;const n=l.flat().filter(o=>o.start).map(o=>o.start);return n.length===0?new Date:n.reduce((o,r)=>r<o?r:o)},[e,l]),xt=(e,l)=>l.end>e?l.end:e,jt=e=>e.flat().reduce(xt,new Date(0)),ce=({endDate:e,rows:l})=>i.useMemo(()=>e||me(jt(l),1),[e,l]),Et=e=>{const l=[];return e==null||e.forEach(n=>{var t,o,r,d,a,m,p,f,h,v,O,y;const u=[];if(c.isValidElement(n)&&(!((t=n==null?void 0:n.props)===null||t===void 0)&&t.children)){if(Array.isArray(n.props.children))for(let w=0;w<n.props.children.length;w++){const g=n.props.children[w];u.push({start:(o=g==null?void 0:g.props)===null||o===void 0?void 0:o.start,end:(r=g==null?void 0:g.props)===null||r===void 0?void 0:r.end,status:((d=g==null?void 0:g.props)===null||d===void 0?void 0:d.status)||"neutral",onSelectPeriod:(a=g.props)===null||a===void 0?void 0:a.onSelectPeriod,label:n.props.label,icon:g.props.icon,children:g.props.children,isActive:g.props.isActive,statusLabel:g.props.statusLabel,restProps:G(g.props,["start","end","status","onSelectPeriod","label","icon","children","isActive","statusLabel"]),ref:g==null?void 0:g.ref})}else u.push({start:n.props.children.props.start,end:n.props.children.props.end,status:((m=n.props.children.props)===null||m===void 0?void 0:m.status)||"neutral",onSelectPeriod:(p=n.props.children.props)===null||p===void 0?void 0:p.onSelectPeriod,label:n.props.label,icon:(f=n.props.children.props)===null||f===void 0?void 0:f.icon,children:(h=n.props.children.props)===null||h===void 0?void 0:h.children,statusLabel:(v=n.props.children.props)===null||v===void 0?void 0:v.statusLabel,restProps:G(n.props.children.props,["start","end","status","onSelectPeriod","label","icon","children","isActive","statusLabel"]),ref:(y=(O=n.props)===null||O===void 0?void 0:O.children)===null||y===void 0?void 0:y.ref});l.push({label:n.props.label,icon:n.props.icon,headingTag:n.props.headingTag,periods:u,restProps:G(n.props,["label","icon","headingTag"]),ref:n==null?void 0:n.ref})}}),l};var Pt=function(e,l){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)l.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(n[t[o]]=e[t[o]]);return n};const Rt=i.forwardRef((e,l)=>{var{label:n,interval:t,count:o}=e,r=Pt(e,["label","interval","count"]);const{setStart:d,endDate:a,startDate:m,direction:p}=B(),f=z("Timeline"),h=f("dateFormat");let v;t==="month"?v=p==="left"?Ue(a,o):J(m,o):v=p==="left"?rt(a,o):V(m,o);const O=p==="left"?U(m,v):U(a,v);return c.createElement(de,{as:"li"},c.createElement("button",Object.assign({type:"button","aria-label":O?f("Zoom.reset"):f("Zoom.zoom",{start:I(v,h),end:I(a,h)}),ref:l},r,{className:"navds-timeline__zoom-button",onClick:()=>{d(v)},"aria-pressed":O}),n))});var It=function(e,l){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)l.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(n[t[o]]=e[t[o]]);return n};const le=i.forwardRef((e,l)=>{var{className:n,children:t}=e,o=It(e,["className","children"]);return c.createElement("ul",Object.assign({ref:l,className:$(n,"navds-timeline__zoom")},o),t)});le.Button=Rt;le.componentType="zoom";var St=function(e,l){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)l.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(n[t[o]]=e[t[o]]);return n};const W=i.forwardRef((e,l)=>{var{children:n,startDate:t,endDate:o,direction:r="left",axisLabelTemplates:d}=e,a=St(e,["children","startDate","endDate","direction","axisLabelTemplates"]);const m=Array.isArray(n),p=i.useRef([]);m||(n=[n]);const f=c.Children.toArray(n).filter(s=>{var b;return((b=s==null?void 0:s.type)===null||b===void 0?void 0:b.componentType)==="row"}),h=c.Children.toArray(n).filter(s=>{var b;return((b=s==null?void 0:s.type)===null||b===void 0?void 0:b.componentType)==="pin"}).map(s=>()=>s),v=c.Children.toArray(n).find(s=>{var b;return((b=s==null?void 0:s.type)===null||b===void 0?void 0:b.componentType)==="zoom"}),O=i.useMemo(()=>Et(f),[f]),y=O.map(s=>s!=null&&s.periods?s.periods:[]),u=K(_t({startDate:t,rows:y})),[w,g]=i.useState(u),[P,M]=i.useState(null),[F,T]=i.useState(X(ce({endDate:o,rows:y}))),Z=X(ce({endDate:o,rows:y})),S=Ot(O,t??w,o??F,r),C=s=>{if(!(t||o))if(r==="left"){if(U(s,w)){g(u);return}g(s)}else{if(U(s,F)){T(Z);return}T(s)}},L=s=>{var b,x,D,Y;if(P!==null&&s==="ArrowDown"){for(let j=P+1;j<S.length;j++)if(S[j].periods.find(R=>!!R.children||!!R.onSelectPeriod)){M(j),(x=(b=p.current.find(R=>R.id===j))===null||b===void 0?void 0:b.ref)===null||x===void 0||x.focus();break}return}if(P!==null&&s==="ArrowUp"){for(let j=P-1;j>=0;j--)if(S[j].periods.find(R=>!!R.children||!!R.onSelectPeriod)){M(j),(Y=(D=p.current.find(R=>R.id===j))===null||D===void 0?void 0:D.ref)===null||Y===void 0||Y.focus();break}return}},N=(s,b)=>{let x=p.current;x=x.filter(D=>D.id!==b),x.push({ref:s,id:b}),p.current=x};return c.createElement(Ce.Provider,{value:{startDate:t??w,endDate:o??F,direction:r,setStart:s=>C(s),setEndInclusive:s=>T(s),activeRow:P,setActiveRow:s=>L(s),initiate:s=>M(s),addFocusable:N}},c.createElement("div",Object.assign({},a,{ref:l}),c.createElement("div",{className:"navds-timeline"},c.createElement(ft,{templates:d}),h.map((s,b)=>c.createElement(s,{key:`pin-${b}`})),S.map((s,b)=>c.createElement(Te.Provider,{key:`row-${s.id}`,value:{periods:s.periods,id:s.id,active:P===b,index:b}},c.createElement(oe,Object.assign({},s==null?void 0:s.restProps,{ref:s==null?void 0:s.ref,label:s.label,icon:s.icon,headingTag:s.headingTag}))))),v))});W.Row=oe;W.Period=ne;W.Pin=De;W.Zoom=le;export{Ut as S,W as T,Vt as a,Zt as b,Bt as c,Ht as d,Yt as e,Kt as f};
