import{r as b,e as l,u as S,a as me,b as ve,c as He}from"./iframe-DzXUO6GT.js";import{u as Y}from"./useId-DZKQXQUP.js";import{D as pe,B as Ve}from"./Label-BptAkRyu.js";import{a as B,u as Ze}from"./Loader-IncALmTQ.js";import{t as z,n as q,d as Ke,e as be,b as Ue,c as K,s as U,f as ge,g as he,h as R,j as Xe,k as ee,l as We,m as qe,o as Ge,p as Je,i as X}from"./subMonths-CSH-MLNW.js";import{a as ye,o as we,g as Oe,h as _e,i as Ee,f as je,c as xe,s as Pe,d as Re,e as Ie,b as Ce,F as Se}from"./floating-ui.react-ChwVIx_A.js";import{o as ie}from"./omit-B7stZg_p.js";import"./useId-BTmGetX7.js";var Qe=function(e,a){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)a.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(o[t[n]]=e[t[n]]);return o};const Bt=b.forwardRef((e,a)=>{var{title:o,titleId:t}=e,n=Qe(e,["title","titleId"]);let r=Y();return r=o?t||"title-"+r:void 0,l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:a,"aria-labelledby":r},n),o?l.createElement("title",{id:r},o):null,l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3.75 12a8.25 8.25 0 1 1 16.5 0 8.25 8.25 0 0 1-16.5 0M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25m4.573 7.234a.75.75 0 1 0-1.146-.968l-4.973 5.877L8.03 11.97a.75.75 0 0 0-1.06 1.06l3 3a.75.75 0 0 0 1.102-.046z",clipRule:"evenodd"}))});var et=function(e,a){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)a.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(o[t[n]]=e[t[n]]);return o};const Ht=b.forwardRef((e,a)=>{var{title:o,titleId:t}=e,n=et(e,["title","titleId"]);let r=Y();return r=o?t||"title-"+r:void 0,l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:a,"aria-labelledby":r},n),o?l.createElement("title",{id:r},o):null,l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 2.25a.75.75 0 0 1 .656.387l9.527 17.25A.75.75 0 0 1 21.526 21H2.474a.75.75 0 0 1-.657-1.113l9.527-17.25A.75.75 0 0 1 12 2.25m8.255 17.25L12 4.551 3.745 19.5zM12 8.75a.75.75 0 0 1 .75.75v4a.75.75 0 0 1-1.5 0v-4a.75.75 0 0 1 .75-.75m0 6.75a1 1 0 1 0 0 2 1 1 0 0 0 0-2",clipRule:"evenodd"}))});var tt=function(e,a){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)a.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(o[t[n]]=e[t[n]]);return o};const Vt=b.forwardRef((e,a)=>{var{title:o,titleId:t}=e,n=tt(e,["title","titleId"]);let r=Y();return r=o?t||"title-"+r:void 0,l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:a,"aria-labelledby":r},n),o?l.createElement("title",{id:r},o):null,l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12.55 3.75a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5M9.8 5a2.75 2.75 0 1 1 5.5 0 2.75 2.75 0 0 1-5.5 0m3.5 4a.75.75 0 0 1 .75-.75h2a.75.75 0 0 1 .75.75v7.106a.75.75 0 0 1-.75.75H14.8V21a.75.75 0 0 1-1.5 0v-4.894a.75.75 0 0 1 .75-.75h1.25V9.75h-1.25A.75.75 0 0 1 13.3 9m-2.78.916a.25.25 0 0 1 .235-.166h.295a.75.75 0 0 0 0-1.5h-.295c-.74 0-1.4.465-1.648 1.161l-2.263 6.337a.75.75 0 0 0 .706 1.002h2.75V21a.75.75 0 0 0 1.5 0v-5a.75.75 0 0 0-.75-.75H8.614z",clipRule:"evenodd"}))});var nt=function(e,a){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)a.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(o[t[n]]=e[t[n]]);return o};const Zt=b.forwardRef((e,a)=>{var{title:o,titleId:t}=e,n=nt(e,["title","titleId"]);let r=Y();return r=o?t||"title-"+r:void 0,l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:a,"aria-labelledby":r},n),o?l.createElement("title",{id:r},o):null,l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.75 12a.75.75 0 0 1 .75-.75h13a.75.75 0 1 1 0 1.5h-13a.75.75 0 0 1-.75-.75",clipRule:"evenodd"}))});var ot=function(e,a){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)a.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(o[t[n]]=e[t[n]]);return o};const Kt=b.forwardRef((e,a)=>{var{title:o,titleId:t}=e,n=ot(e,["title","titleId"]);let r=Y();return r=o?t||"title-"+r:void 0,l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:a,"aria-labelledby":r},n),o?l.createElement("title",{id:r},o):null,l.createElement("path",{fill:"currentColor",d:"M12.75 5.5a.75.75 0 0 0-1.5 0v5.75H5.5a.75.75 0 0 0 0 1.5h5.75v5.75a.75.75 0 0 0 1.5 0v-5.75h5.75a.75.75 0 0 0 0-1.5h-5.75z"}))});var at=function(e,a){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)a.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(o[t[n]]=e[t[n]]);return o};const Ut=b.forwardRef((e,a)=>{var{title:o,titleId:t}=e,n=at(e,["title","titleId"]);let r=Y();return r=o?t||"title-"+r:void 0,l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:a,"aria-labelledby":r},n),o?l.createElement("title",{id:r},o):null,l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.272 2.25a.75.75 0 0 0-.53.22L2.47 7.742a.75.75 0 0 0-.22.53v7.456c0 .199.079.39.22.53l5.272 5.272c.14.141.331.22.53.22h7.456a.75.75 0 0 0 .53-.22l5.272-5.272a.75.75 0 0 0 .22-.53V8.272a.75.75 0 0 0-.22-.53L16.258 2.47a.75.75 0 0 0-.53-.22zM3.75 8.583 8.583 3.75h6.834l4.833 4.833v6.834l-4.833 4.833H8.583L3.75 15.417zm5.28-.613a.75.75 0 0 0-1.06 1.06L10.94 12l-2.97 2.97a.75.75 0 1 0 1.06 1.06L12 13.06l2.97 2.97a.75.75 0 1 0 1.06-1.06L13.06 12l2.97-2.97a.75.75 0 0 0-1.06-1.06L12 10.94z",clipRule:"evenodd"}))});function V(e,a){const o=+z(e)-+z(a);return o<0?-1:o>0?1:o}function rt(e,a,o){const[t,n]=q(o?.in,e,a);return t.getFullYear()-n.getFullYear()}function De(e,a,o){const[t,n]=q(o?.in,e,a),r=se(t,n),f=Math.abs(Ke(t,n));t.setDate(t.getDate()-r*f);const s=+(se(t,n)===-r),c=r*(f-s);return c===0?0:c}function se(e,a){const o=e.getFullYear()-a.getFullYear()||e.getMonth()-a.getMonth()||e.getDate()-a.getDate()||e.getHours()-a.getHours()||e.getMinutes()-a.getMinutes()||e.getSeconds()-a.getSeconds()||e.getMilliseconds()-a.getMilliseconds();return o<0?-1:o>0?1:o}function ce(e,a){return+z(e)-+z(a)}function W(e,a){const o=z(e,a?.in);return o.setHours(23,59,59,999),o}function lt(e,a){const o=z(e,a?.in);return+W(o,a)==+be(o,a)}function it(e,a,o){const[t,n,r]=q(o?.in,e,e,a),f=V(n,r),s=Math.abs(Ue(n,r));if(s<1)return 0;n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-f*s);let c=V(n,r)===-f;lt(t)&&s===1&&V(t,r)===1&&(c=!1);const v=f*(s-+c);return v===0?0:v}function st(e,a,o){const[t,n]=q(o?.in,e,a),r=V(t,n),f=Math.abs(rt(t,n));t.setFullYear(1584),n.setFullYear(1584);const s=V(t,n)===-r,c=r*(f-+s);return c===0?0:c}function ct(e,a,o){return K(e,-a,o)}const Xt=()=>{const{cn:e}=S();return l.createElement("span",{className:e("navds-stack__spacer")})},Fe=b.createContext({startDate:new Date,endDate:new Date,direction:"left",setStart:()=>null,setEndInclusive:()=>null,activeRow:0,setActiveRow:()=>null,initiate:()=>null,addFocusable:()=>null}),Z=()=>{const e=b.useContext(Fe);return e||console.warn("useTimelineContext must be used with TimelineContext (<Timeline />)"),e},dt=({horizontalPosition:e})=>e<=98&&e>=0,de=(e,a)=>De(e,a)<=1,ft=({horizontalPosition:e,width:a})=>e>=0&&e<=100&&a>0,te=(e,a,o)=>{const t=ce(o,a);return ce(e,a)/t*100},G=(e,a,o,t)=>{const n=te(e,o,t),r=te(a,o,t)-n;return{horizontalPosition:n,width:r}},ut=(e,a,o,t,n,r)=>{const f=Math.ceil(o/10),s=U(a);return new Array(o).fill(s).map((c,v)=>{if(v%f!==0)return null;const m=ge(c,v),{horizontalPosition:g,width:d}=G(m,he(m,1),e,a);return{direction:t,horizontalPosition:g,label:R(m,n,{locale:r}),date:m,width:d}}).filter(c=>c!==null)},mt=(e,a,o,t,n)=>{const r=Xe(e),f=be(a),s=it(f,r)+1;return new Array(s).fill(r).map((c,v)=>{const m=ee(c,v),{horizontalPosition:g,width:d}=G(m,ee(m,1),e,a);return{direction:o,horizontalPosition:g,label:R(m,t,{locale:n}),date:m,width:d}})},vt=(e,a,o,t,n)=>{const r=We(e),f=qe(a),s=st(f,e)+1;return new Array(s).fill(r).map((c,v)=>{const m=K(c,v),{horizontalPosition:g,width:d}=G(m,K(m,1),e,a);return{direction:o,horizontalPosition:g,label:R(m,t,{locale:n}),date:m,width:d}})},pt=(e,a,o,t,n)=>{const r=De(a,e);if(r<40){const s=n("dayFormat");return ut(e,a,r,o,s,t)}if(r<370){const s=n("monthFormat");return mt(e,a,o,s,t)}const f=n("yearFormat");return vt(e,a,o,f,t)},bt=({templates:e})=>{const{endDate:a,startDate:o,direction:t}=Z(),n=B("Timeline",{dayFormat:e?.day,monthFormat:e?.month,yearFormat:e?.year}),r=Ze(),f=pt(o,a,t,r,n),{cn:s}=S();return l.createElement("div",{className:s("navds-timeline__axislabels"),"aria-hidden":"true"},f.filter(dt).map(c=>l.createElement(pe,{className:s("navds-timeline__axislabels-label"),as:"div",key:c.label,style:{justifyContent:t==="left"?"flex-start":"flex-end",[t]:`${c.horizontalPosition}%`,width:`${c.width}%`}},c.label)))};var gt=function(e,a){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)a.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(o[t[n]]=e[t[n]]);return o};const Me=b.forwardRef((e,a)=>{var{date:o,children:t}=e,n=gt(e,["date","children"]);const{cn:r}=S(),{startDate:f,endDate:s,direction:c}=Z(),[v,m]=b.useState(!1),g=b.useRef(null),d=B("Timeline"),h=me(!1),O=!h?.isDarkside,{context:y,placement:u,middlewareData:{arrow:{x:w,y:I}={}},refs:x,floatingStyles:M}=ye({placement:"top",open:v,onOpenChange:i=>m(i),whileElementsMounted:je,middleware:[we(O?16:8),Oe(),_e({padding:5,fallbackPlacements:["bottom","top"]}),Ee({element:g,padding:5})]}),T=xe(y,{handleClose:Pe(),restMs:25,delay:{open:1e3},move:!1}),A=Re(y),k=Ie(y),{getFloatingProps:D,getReferenceProps:L}=Ce([T,A,k]),$=ve(x.setReference,a),C={top:"bottom",right:"left",bottom:"top",left:"right"}[u.split("-")[0]];return l.createElement(l.Fragment,null,l.createElement("div",{className:r("navds-timeline__pin-wrapper"),style:{[c]:`${te(o,f,s)}%`}},l.createElement("button",Object.assign({},n,{ref:$,className:r("navds-timeline__pin-button"),"aria-label":d("Pin.pin",{date:R(o,d("dateFormat"))}),type:"button","aria-expanded":t?v:void 0},L({onKeyDown:i=>{var p;(p=n?.onKeyDown)===null||p===void 0||p.call(n,i),i.key==="Enter"?m(_=>!_):i.key===" "&&m(!1)}})))),t&&v&&l.createElement(Se,{context:y,modal:!1,initialFocus:-1,returnFocus:!1},l.createElement("div",Object.assign({className:r("navds-timeline__popover"),"data-placement":u,ref:x.setFloating,role:"dialog"},D(),{style:M}),t,O&&l.createElement("div",{ref:g,style:Object.assign(Object.assign(Object.assign({},w!=null?{left:w}:{}),I!=null?{top:I}:{}),C?{[C]:"-0.5rem"}:{}),className:r("navds-timeline__popover-arrow")}))))});Me.componentType="pin";const Te=b.createContext({periodId:"",firstFocus:!1}),Ae=()=>{const e=b.useContext(Te);return e||console.warn("usePeriodContext must be used with PeriodContext"),e},Le=b.createContext({periods:[],id:"",active:!1,index:0}),ne=()=>{const e=b.useContext(Le);return e||console.warn("useRowContext must be used with RowContext"),e},Ne=(e,a,o)=>He(`navds-timeline__period navds-timeline__period--${o}`,{"navds-timeline__period--connected-both":e==="both","navds-timeline__period--connected-right":e==="right"&&a==="left"||e==="left"&&a==="right","navds-timeline__period--connected-left":e==="left"&&a==="left"||e==="right"&&a==="right"}),ke=(e,a,o,t,n)=>{const r=n("dateFormat"),f=R(e,r),s=R(a,r);return n("Period.period",{status:t||n(`Period.${o}`),start:f,end:s})},ht=l.memo(({onSelectPeriod:e,start:a,end:o,status:t,cropped:n,direction:r,left:f,width:s,icon:c,children:v,isActive:m,statusLabel:g,restProps:d,periodRef:h})=>{var O,y;const{cn:u}=S(),[w,I]=b.useState(!1),{index:x}=ne(),{firstFocus:M}=Ae(),{initiate:T,addFocusable:A}=Z(),k=b.useRef(null),D=B("Timeline"),L=me(!1),$=!L?.isDarkside,{context:C,placement:i,middlewareData:{arrow:{x:p,y:_}={}},refs:F,floatingStyles:H}=ye({placement:(O=d?.placement)!==null&&O!==void 0?O:"top",open:w,onOpenChange:j=>I(j),whileElementsMounted:je,middleware:[we($?16:8),Oe(),_e({padding:5,fallbackPlacements:["bottom","top"]}),Ee({element:k,padding:5})]}),E=xe(C,{handleClose:Pe(),restMs:25,delay:{open:1e3},move:!1}),Q=Re(C),P=Ie(C),{getFloatingProps:$e,getReferenceProps:ze}=Ce([E,Q,P]),Ye=ve(F.setReference,h),le={top:"bottom",right:"left",bottom:"top",left:"right"}[i.split("-")[0]];return l.createElement(l.Fragment,null,l.createElement("button",Object.assign({},d,{"data-color":(y=d?.["data-color"])!==null&&y!==void 0?y:t,type:"button",ref:j=>{M&&A(j,x),Ye(j)},"aria-label":ke(a,o,t,g,D),className:u("navds-timeline__period--clickable",Ne(n,r,t),d?.className,{"navds-timeline__period--selected":m}),"aria-expanded":v?w:void 0,"aria-current":m||void 0},ze({onFocus:()=>{T(x)},onKeyDown:j=>{var N;(N=d?.onKeydown)===null||N===void 0||N.call(d,j),j.key==="Enter"&&I(Be=>!Be),j.key===" "&&(e?.(j),I(!1))},style:{width:`${s}%`,[r]:`${f}%`},onClick:j=>{var N;(N=d?.onClick)===null||N===void 0||N.call(d,j),j.detail!==0&&e?.(j)}})),l.createElement("span",{className:u("navds-timeline__period--inner")},c)),v&&w&&l.createElement(Se,{context:C,modal:!1,initialFocus:-1,returnFocus:!1},l.createElement("div",Object.assign({className:u("navds-timeline__popover"),"data-placement":i,ref:F.setFloating,role:"dialog"},$e(),{style:H}),v,$&&l.createElement("div",{ref:k,style:Object.assign(Object.assign(Object.assign({},p!=null?{left:p}:{}),_!=null?{top:_}:{}),le?{[le]:"-0.5rem"}:{}),className:u("navds-timeline__popover-arrow")}))))}),yt=({start:e,end:a,status:o,cropped:t,direction:n,left:r,width:f,icon:s,statusLabel:c,restProps:v,periodRef:m})=>{var g;const d=B("Timeline"),{cn:h}=S();return l.createElement("div",Object.assign({ref:m},v,{"data-color":(g=v?.["data-color"])!==null&&g!==void 0?g:o,className:h(Ne(t,n,o),v?.className),style:{width:`${f}%`,[n]:`${r}%`}}),l.createElement("span",{className:h("navds-timeline__period--inner")},s,l.createElement("span",{className:h("navds-sr-only")},ke(e,a,o,c,d))))},oe=b.forwardRef(({icon:e},a)=>{const{periods:o}=ne(),{periodId:t,restProps:n}=Ae(),r=o.find(w=>w.id===t);if(!r)return l.createElement(l.Fragment,null);const{start:f,endInclusive:s,width:c,horizontalPosition:v,status:m="neutral",onSelectPeriod:g,cropped:d,direction:h,children:O,isActive:y,statusLabel:u}=r;return g||O?l.createElement(ht,{periodRef:a,start:f,end:s,status:m,onSelectPeriod:g,cropped:d||"",direction:h,width:c,left:v,icon:e,isActive:y,statusLabel:u,restProps:n},O):l.createElement(yt,{periodRef:a,start:f,end:s,status:m,cropped:d||"",direction:h,width:c,left:v,icon:e,statusLabel:u,restProps:n})});oe.componentType="period";var wt=function(e,a){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)a.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(o[t[n]]=e[t[n]]);return o};const ae=b.forwardRef((e,a)=>{var{label:o,className:t,headingTag:n="h3",icon:r}=e,f=wt(e,["label","className","headingTag","icon"]);const{cn:s}=S(),{periods:c,id:v,active:m}=ne(),{setActiveRow:g}=Z(),d=B("Timeline"),h=c.reduce((u,w)=>u.end>w.end?u:w,{}),O=c.reduce((u,w)=>u.end<w.end?u:w,{}),y=c.find(u=>!!u.children||!!u.onSelectPeriod);return l.createElement(l.Fragment,null,o&&l.createElement(Ve,{as:n,id:`timeline-row-${v}`,className:s("navds-timeline__row-label"),size:"small"},r,o),l.createElement("div",{className:s("navds-timeline__row",{"navds-timeline__row--active":m})},l.createElement("ol",Object.assign({},f,{tabIndex:-1,ref:a,"aria-label":c.length===0?d("Row.noPeriods"):d("Row.period",{start:R(O.start,d("dateFormat")),end:R(h.end,d("dateFormat"))}),className:s("navds-timeline__row-periods",t),onKeyDown:u=>{(u.key==="ArrowDown"||u.key==="ArrowUp")&&(u.preventDefault(),g(u.key))}}),c?.map(u=>l.createElement("li",{key:`period-${u.id}`},l.createElement(Te.Provider,{value:{periodId:u.id,firstFocus:y?.id===u.id,restProps:u?.restProps}},l.createElement(oe,{start:u.start,end:u.endInclusive,icon:u.icon,ref:u?.ref})))))))});ae.componentType="row";const Ot=(e,a)=>e.horizontalPosition-a.horizontalPosition,_t=(e,a,o,t="left",n,r,f)=>{const s=e.start,c=e.end,v=n<r.length-1&&!Ge(r[n+1].start,c),{horizontalPosition:m,width:g}=G(U(s),W(v?U(ge(r[n+1].start,1)):c),a,o);return{id:`r-${f}-p-${n}`,start:s,endInclusive:c,horizontalPosition:m,direction:t,width:g,end:c,status:e.status,onSelectPeriod:e.onSelectPeriod,icon:e.icon,children:e.children,isActive:e.isActive,statusLabel:e.statusLabel}},Et=(e,a,o)=>{const t=a>0&&de(e.start,o[a-1].endInclusive),n=a<o.length-1&&de(o[a+1].start,e.endInclusive);return t&&n?Object.assign(Object.assign({},e),{cropped:"both"}):t?Object.assign(Object.assign({},e),{cropped:"left"}):n?Object.assign(Object.assign({},e),{cropped:"right"}):e},jt=e=>{let{horizontalPosition:a,width:o,cropped:t}=e;return a+o>100&&(o=100-a,t=t==="left"||t==="both"?"both":"right"),a<0&&a+o>0&&(o=a+o,a=0,t=t==="right"||t==="both"?"both":"left"),Object.assign(Object.assign({},e),{width:o,horizontalPosition:a,cropped:t})},xt=(e,a,o,t)=>b.useMemo(()=>e.map((n,r)=>{const f=n.periods.sort((s,c)=>s.start.valueOf()-c.start.valueOf()).map((s,c)=>Object.assign(Object.assign({},_t(s,a,o,t,c,n.periods,r)),{restProps:s?.restProps,ref:s?.ref})).sort(Ot).map(Et).map(jt).filter(ft);return{id:`tl-row-${r}`,label:n.label,headingTag:n.headingTag||"h3",icon:n.icon,periods:t==="left"?f:f.reverse(),restProps:n?.restProps,ref:n?.ref}}),[e,a,o,t]),Pt=({startDate:e,rows:a})=>b.useMemo(()=>{if(e)return e;const o=a.flat().filter(n=>n.start).map(n=>n.start);return o.length===0?new Date:o.reduce((n,r)=>r<n?r:n)},[e,a]),Rt=(e,a)=>a.end>e?a.end:e,It=e=>e.flat().reduce(Rt,new Date(0)),fe=({endDate:e,rows:a})=>b.useMemo(()=>e||he(It(a),1),[e,a]),ue=e=>Object.prototype.propertyIsEnumerable.call(e.props,"ref")?e.props.ref:e.ref,Ct=e=>{const a=[];return e?.forEach(o=>{const t=[];!l.isValidElement(o)||!o.props.children||(l.Children.toArray(o.props.children).forEach(n=>{l.isValidElement(n)&&t.push({start:n.props.start,end:n.props.end,status:n.props.status||"neutral",onSelectPeriod:n.props.onSelectPeriod,icon:n.props.icon,children:n.props.children,isActive:n.props.isActive,statusLabel:n.props.statusLabel,restProps:ie(n.props,["start","end","status","onSelectPeriod","icon","children","isActive","statusLabel","placement"]),ref:ue(n)})}),a.push({label:o.props.label,icon:o.props.icon,headingTag:o.props.headingTag,periods:t,restProps:ie(o.props,["label","icon","headingTag"]),ref:ue(o)}))}),a};var St=function(e,a){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)a.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(o[t[n]]=e[t[n]]);return o};const Dt=b.forwardRef((e,a)=>{var{label:o,interval:t,count:n}=e,r=St(e,["label","interval","count"]);const{setStart:f,endDate:s,startDate:c,direction:v}=Z(),m=B("Timeline"),g=m("dateFormat"),{cn:d}=S();let h;t==="month"?h=v==="left"?Je(s,n):ee(c,n):h=v==="left"?ct(s,n):K(c,n);const O=v==="left"?X(c,h):X(s,h);return l.createElement(pe,{as:"li"},l.createElement("button",Object.assign({type:"button","aria-label":O?m("Zoom.reset"):m("Zoom.zoom",{start:R(h,g),end:R(s,g)}),ref:a},r,{className:d("navds-timeline__zoom-button"),onClick:()=>{f(h)},"aria-pressed":O}),o))});var Ft=function(e,a){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)a.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(o[t[n]]=e[t[n]]);return o};const re=b.forwardRef((e,a)=>{var{className:o,children:t}=e,n=Ft(e,["className","children"]);const{cn:r}=S();return l.createElement("ul",Object.assign({ref:a,className:r(o,"navds-timeline__zoom")},n),t)});re.Button=Dt;re.componentType="zoom";var Mt=function(e,a){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)a.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(o[t[n]]=e[t[n]]);return o};const J=b.forwardRef((e,a)=>{var{children:o,startDate:t,endDate:n,direction:r="left",axisLabelTemplates:f}=e,s=Mt(e,["children","startDate","endDate","direction","axisLabelTemplates"]);const{cn:c}=S(),v=Array.isArray(o),m=b.useRef([]);v||(o=[o]);const g=l.Children.toArray(o).filter(i=>{var p;return((p=i?.type)===null||p===void 0?void 0:p.componentType)==="row"}),d=l.Children.toArray(o).filter(i=>{var p;return((p=i?.type)===null||p===void 0?void 0:p.componentType)==="pin"}).map(i=>()=>i),h=l.Children.toArray(o).find(i=>{var p;return((p=i?.type)===null||p===void 0?void 0:p.componentType)==="zoom"}),O=b.useMemo(()=>Ct(g),[g]),y=O.map(i=>i?.periods?i.periods:[]),u=U(Pt({startDate:t,rows:y})),[w,I]=b.useState(u),[x,M]=b.useState(null),[T,A]=b.useState(W(fe({endDate:n,rows:y}))),k=W(fe({endDate:n,rows:y})),D=xt(O,t??w,n??T,r),L=i=>{if(!(t||n))if(r==="left"){if(X(i,w)){I(u);return}I(i)}else{if(X(i,T)){A(k);return}A(i)}},$=i=>{var p,_,F,H;if(x!==null&&i==="ArrowDown"){for(let E=x+1;E<D.length;E++)if(D[E].periods.find(P=>!!P.children||!!P.onSelectPeriod)){M(E),(_=(p=m.current.find(P=>P.id===E))===null||p===void 0?void 0:p.ref)===null||_===void 0||_.focus();break}return}if(x!==null&&i==="ArrowUp"){for(let E=x-1;E>=0;E--)if(D[E].periods.find(P=>!!P.children||!!P.onSelectPeriod)){M(E),(H=(F=m.current.find(P=>P.id===E))===null||F===void 0?void 0:F.ref)===null||H===void 0||H.focus();break}return}},C=(i,p)=>{let _=m.current;_=_.filter(F=>F.id!==p),_.push({ref:i,id:p}),m.current=_};return l.createElement(Fe.Provider,{value:{startDate:t??w,endDate:n??T,direction:r,setStart:i=>L(i),setEndInclusive:i=>A(i),activeRow:x,setActiveRow:i=>$(i),initiate:i=>M(i),addFocusable:C}},l.createElement("div",Object.assign({},s,{ref:a}),l.createElement("div",{className:c("navds-timeline")},l.createElement(bt,{templates:f}),d.map((i,p)=>l.createElement(i,{key:`pin-${p}`})),D.map((i,p)=>l.createElement(Le.Provider,{key:`row-${i.id}`,value:{periods:i.periods,id:i.id,active:x===p,index:p}},l.createElement(ae,Object.assign({},i?.restProps,{ref:i?.ref,label:i.label,icon:i.icon,headingTag:i.headingTag}))))),h))});J.Row=ae;J.Period=oe;J.Pin=Me;J.Zoom=re;export{Xt as S,J as T,Kt as a,Zt as b,Vt as c,Ht as d,Bt as e,Ut as f};
