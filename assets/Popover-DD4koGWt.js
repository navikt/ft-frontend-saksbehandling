import{u as X,a as q,i as J,o as Q,g as ee,f as te,h as ne}from"./floating-ui.react-C49gkrzP.js";import{c as W}from"./clsx-B-dksMZM.js";import{e as m,r as l}from"./index-DASCADcX.js";import{D as se}from"./useDateTranslationContext-CJAj3RHb.js";import{S as re,u as ie}from"./Theme-s5aaJqOF.js";import{c as oe,m as ae,u as $}from"./create-context-Bo0OP0Ib.js";import"./useId-BiFzyKmP.js";import{u as j}from"./useClientLayoutEffect-Dt_TuINI.js";import{a as M}from"./Checkmark-abnGd_Ay.js";import{G as de}from"./index-CL4jvrHg.js";function A(s){return s.sort((t,n)=>{const e=t.compareDocumentPosition(n);if(e&Node.DOCUMENT_POSITION_FOLLOWING||e&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(e&Node.DOCUMENT_POSITION_PRECEDING||e&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(e&Node.DOCUMENT_POSITION_DISCONNECTED||e&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0})}const le=s=>typeof s=="object"&&"nodeType"in s&&s.nodeType===Node.ELEMENT_NODE;function K(s,t,n){let e=s+1;return n&&e>=t&&(e=0),e}function V(s,t,n){let e=s-1;return n&&e<0&&(e=t),e}const k=s=>s;class ce{constructor(){this.descendants=new Map,this.register=t=>{if(t!=null)return le(t)?this.registerNode(t):n=>{this.registerNode(n,t)}},this.unregister=t=>{this.descendants.delete(t);const n=A(Array.from(this.descendants.keys()));this.assignIndex(n)},this.destroy=()=>{this.descendants.clear()},this.assignIndex=t=>{this.descendants.forEach(n=>{const e=t.indexOf(n.node);n.index=e,n.node.dataset.index=n.index.toString()})},this.count=()=>this.descendants.size,this.enabledCount=()=>this.enabledValues().length,this.values=()=>Array.from(this.descendants.values()).sort((n,e)=>n.index-e.index),this.enabledValues=()=>this.values().filter(t=>!t.disabled),this.item=t=>{if(this.count()!==0)return this.values()[t]},this.enabledItem=t=>{if(this.enabledCount()!==0)return this.enabledValues()[t]},this.first=()=>this.item(0),this.firstEnabled=()=>this.enabledItem(0),this.last=()=>this.item(this.descendants.size-1),this.lastEnabled=()=>{const t=this.enabledValues().length-1;return this.enabledItem(t)},this.indexOf=t=>{var n,e;return t&&(e=(n=this.descendants.get(t))===null||n===void 0?void 0:n.index)!==null&&e!==void 0?e:-1},this.enabledIndexOf=t=>t==null?-1:this.enabledValues().findIndex(n=>n.node.isSameNode(t)),this.next=(t,n=!0)=>{const e=K(t,this.count(),n);return this.item(e)},this.nextEnabled=(t,n=!0)=>{const e=this.item(t);if(!e)return;const r=this.enabledIndexOf(e.node),o=K(r,this.enabledCount(),n);return this.enabledItem(o)},this.prev=(t,n=!0)=>{const e=V(t,this.count()-1,n);return this.item(e)},this.prevEnabled=(t,n=!0)=>{const e=this.item(t);if(!e)return;const r=this.enabledIndexOf(e.node),o=V(r,this.enabledCount()-1,n);return this.enabledItem(o)},this.registerNode=(t,n)=>{if(!t)return;const e=this.descendants.get(t);if(e){this.descendants.set(t,Object.assign({index:e.index,node:t},n));return}const r=Array.from(this.descendants.keys()).concat(t),o=A(r);n!=null&&n.disabled&&(n.disabled=!!n.disabled);const d=Object.assign({node:t,index:-1},n);this.descendants.set(t,d),this.assignIndex(o)}}}function ue(){const[s,t]=oe({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"}),n=k(o=>m.createElement(s,Object.assign({},o.value),o.children));function e(o){const d=t(),[u,f]=l.useState(-1),c=l.useRef(null);j(()=>()=>{c.current&&d.unregister(c.current)},[]),j(()=>{if(!c.current)return;const p=Number(c.current.dataset.index);u!==p&&!Number.isNaN(p)&&f(p)});const i=k(o?d.register(o):d.register);return{descendants:d,index:u,enabledIndex:d.enabledIndexOf(c.current),register:ae([i,c])}}function r(){return l.useRef(new ce).current}return[n,t,r,e]}function fe(s,t=globalThis==null?void 0:globalThis.document){const n=M(s);l.useEffect(()=>{const e=r=>{r.key==="Escape"&&n(r)};return t.addEventListener("keydown",e,!0),()=>t.removeEventListener("keydown",e,!0)},[n,t])}const H={FOCUS_OUTSIDE:"AKSEL_FOCUS_OUTSIDE",POINTER_DOWN_OUTSIDE:"AKSEL_POINTER_DOWN_OUTSIDE"};function Z(s,t,n,{discrete:e}={discrete:!1}){if(!t)return;const r=n.originalEvent.target,o=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:n});r.addEventListener(s,t,{once:!0}),e&&r?de.flushSync(()=>r.dispatchEvent(o)):r.dispatchEvent(o)}function ve(s,t=globalThis==null?void 0:globalThis.document){const n=M(s),e=l.useRef(!1);return l.useEffect(()=>{const r=o=>{if(o.target&&!e.current){const d={originalEvent:o};Z(H.FOCUS_OUTSIDE,n,d)}};return t.addEventListener("focusin",r),()=>t.removeEventListener("focusin",r)},[t,n]),{onFocusCapture:()=>{e.current=!0},onBlurCapture:()=>{e.current=!1}}}function he(s,t=globalThis==null?void 0:globalThis.document){const n=M(s),e=l.useRef(!1),r=l.useRef(()=>{});return l.useEffect(()=>{const o=u=>{function f(){Z(H.POINTER_DOWN_OUTSIDE,n,{originalEvent:u},{discrete:!0})}u.target&&!e.current?u.pointerType==="touch"?(t.removeEventListener("click",r.current),r.current=f,t.addEventListener("click",r.current,{once:!0})):f():t.removeEventListener("click",r.current),e.current=!1},d=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(d),t.removeEventListener("pointerdown",o),t.removeEventListener("click",r.current)}},[t,n]),{onPointerDownCapture:()=>{e.current=!0}}}var be=function(s,t){var n={};for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&t.indexOf(e)<0&&(n[e]=s[e]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(s);r<e.length;r++)t.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(s,e[r])&&(n[e[r]]=s[e[r]]);return n};const[me,pe,ge,Ee]=ue();let x=0,B;const Oe=l.forwardRef((s,t)=>pe(!1)?m.createElement(G,Object.assign({ref:t},s)):m.createElement(ye,null,m.createElement(G,Object.assign({ref:t},s)))),ye=({children:s})=>{const t=ge();return m.createElement(me,{value:t},s)},G=l.forwardRef((s,t)=>{var n,{children:e,asChild:r,onEscapeKeyDown:o,onPointerDownOutside:d,onFocusOutside:u,onInteractOutside:f,onDismiss:c,safeZone:i,disableOutsidePointerEvents:p=!1,enabled:h=!0}=s,N=be(s,["children","asChild","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss","safeZone","disableOutsidePointerEvents","enabled"]);const[,L]=l.useState({}),{register:U,index:D,descendants:E}=Ee({disableOutsidePointerEvents:p,disabled:!h,forceUpdate:()=>L({})}),[g,w]=l.useState(null),v=$(w,U,t),b=(n=g==null?void 0:g.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,C=l.useRef(!1),y=l.useRef(!1),_=(()=>{let a=-1;return E.enabledValues().forEach((T,O)=>{T.disableOutsidePointerEvents&&(a=O)}),{isPointerEventsEnabled:D>=a,isBodyPointerEventsDisabled:x>0,pointerStyle:D>=a&&x>0?"auto":void 0}})();function S(a){var P,T;if(!(i!=null&&i.anchor)&&!(i!=null&&i.dismissable)||!h)return;a.defaultPrevented||(C.current=!0,a.detail.originalEvent.type==="pointerdown"&&(y.current=!0));const O=a.target;a.detail.originalEvent.type==="pointerdown"?(!((P=i==null?void 0:i.anchor)===null||P===void 0)&&P.contains(O)||O===(i==null?void 0:i.anchor))&&a.preventDefault():!(O instanceof HTMLElement&&![i==null?void 0:i.anchor,i==null?void 0:i.dismissable].some(F=>F==null?void 0:F.contains(O))&&!O.contains((T=i==null?void 0:i.dismissable)!==null&&T!==void 0?T:null))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&y.current&&a.preventDefault(),y.current=!1,C.current=!1}const R=he(a=>{!_.isPointerEventsEnabled||!h||(d==null||d(a),f==null||f(a),i&&S(a),!a.defaultPrevented&&c&&c())},b),I=ve(a=>{h&&(u==null||u(a),f==null||f(a),i&&S(a),!a.defaultPrevented&&c&&c())},b);fe(a=>{!h||!(D===E.enabledCount()-1)||(o==null||o(a),!a.defaultPrevented&&c&&(a.preventDefault(),c()))},b),l.useEffect(()=>{if(!(!g||!h||!p))return x===0&&(B=b.body.style.pointerEvents,b.body.style.pointerEvents="none"),x++,()=>{x===1&&(b.body.style.pointerEvents=B),x--}},[g,b,p,E,h]),l.useEffect(()=>()=>E.values().forEach(a=>a.forceUpdate()),[E,g]);const z=r?re:"div";return m.createElement(z,Object.assign({ref:v},N,{onFocusCapture:I.onFocusCapture,onBlurCapture:I.onBlurCapture,onPointerDownCapture:R.onPointerDownCapture,style:Object.assign({pointerEvents:_.pointerStyle},N.style)}),e)});var Ie=function(s,t){var n={};for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&t.indexOf(e)<0&&(n[e]=s[e]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(s);r<e.length;r++)t.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(s,e[r])&&(n[e[r]]=s[e[r]]);return n};const xe=l.forwardRef((s,t)=>{var{className:n}=s,e=Ie(s,["className"]);return m.createElement("div",Object.assign({},e,{ref:t,className:W("navds-popover__content",n)}))});var Ne=function(s,t){var n={};for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&t.indexOf(e)<0&&(n[e]=s[e]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(s);r<e.length;r++)t.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(s,e[r])&&(n[e[r]]=s[e[r]]);return n};const De=l.forwardRef((s,t)=>{var{className:n,children:e,anchorEl:r,arrow:o=!0,open:d,onClose:u,placement:f="top",offset:c,strategy:i,flip:p=!0}=s,h=Ne(s,["className","children","anchorEl","arrow","open","onClose","placement","offset","strategy","flip"]);const N=l.useRef(null),L=X(!1)!==void 0,U=l.useContext(se)!==null,D=i??(L?"fixed":"absolute"),E=U?!1:p,g=ie(!1),{update:w,refs:v,placement:b,middlewareData:{arrow:{x:C,y}={}},floatingStyles:_}=q({strategy:D,placement:f,open:d,middleware:[Q(c??(g?8:o?16:4)),E&&ee({padding:5,fallbackPlacements:["bottom","top"]}),te({padding:12}),ne({element:N,padding:8})]});j(()=>{v.setReference(r)},[r]);const S=$(v.setFloating,t);j(()=>{if(!v.reference.current||!v.floating.current||!d)return;const I=J(v.reference.current,v.floating.current,w);return()=>I()},[v.floating,v.reference,w,d,r]);const R={top:"bottom",right:"left",bottom:"top",left:"right"}[b.split("-")[0]];return m.createElement(Oe,{asChild:!0,safeZone:{anchor:r,dismissable:v.floating.current},onDismiss:()=>d&&(u==null?void 0:u()),enabled:d},m.createElement("div",Object.assign({ref:S},h,{className:W("navds-popover",n,{"navds-popover--hidden":!d||!r}),style:Object.assign(Object.assign({},h.style),_),"data-placement":b,"aria-hidden":!d||!r}),e,o&&!g&&m.createElement("div",{ref:I=>{N.current=I},style:Object.assign(Object.assign(Object.assign({},C!=null?{left:C}:{}),y!=null?{top:y}:{}),R?{[R]:"-0.5rem"}:{}),className:"navds-popover__arrow"})))});De.Content=xe;export{De as P,ue as c};
