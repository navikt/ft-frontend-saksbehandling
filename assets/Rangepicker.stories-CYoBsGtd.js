import{g as se,a as oe,r as ge}from"./formUtils-ZifNUAy7.js";import{j as C}from"./jsx-runtime-CLpGMVip.js";import{r as b}from"./index-B5OHeJSP.js";import{u as je,a as le}from"./ReadOnlyIcon-3mCRcvzc.js";import{d as h,A as I,P as E}from"./index.es-Dh3mAfPy.js";import{c as Ne}from"./customParseFormat-BKfttFiC.js";import{R as Me}from"./ReadOnlyField-8gUhE9Qi.js";import{d as S,i as N,a as W,p as z,b as Ee}from"./useDateTranslationContext-DuYWebvA.js";import{u as xe}from"./Loader-CoAqN6Lw.js";import{f as v,i as w,g as Ce,D as ee}from"./DatePicker-DoJN_gWH.js";import"./Provider-B_QIWjIe.js";import{V as We,H as we}from"./VStack-DrfGxCua.js";import{L as qe}from"./Label-ZYbyet41.js";import"./chunk-D5ZWXAHU-DlerbUHg.js";import"./v4-CtRu48qb.js";import"./Button-C4dKKha_.js";import"./clsx-B-dksMZM.js";import"./omit-B7stZg_p.js";import"./useId-e75EoDiw.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./useId-B9OmVTHV.js";import"./index-D9DDUrbY.js";import"./index.es-BdLW2Tvk.js";import"./message-BcVJpMje.js";import"./Modal-C6iE4cX-.js";import"./floating-ui.react-FIE1On8Y.js";import"./create-context-BlrHNsQj.js";import"./index-sT6466e8.js";import"./index-DYwZEShM.js";import"./XMark-BWJopseo.js";import"./Alert-Pz1mMbfe.js";import"./XMarkOctagonFill-BUHxl6gj.js";import"./ExclamationmarkTriangleFill-Ck4a0gXp.js";import"./PersonPencilFill-DS1qmMzQ.js";import"./KeyVerticalFill-CH0oXMyL.js";import"./Box-B_1ucAEI.js";import"./Theme-6IdwQf2V.js";import"./BasePrimitive-B7qNT1W_.js";import"./Checkmark-uHeVskEM.js";import"./ChevronDown-Bw2TG6jd.js";import"./useFormField-BKpVC0Pg.js";import"./Popover-CgZ7HliT.js";import"./useClientLayoutEffect-DnVV5Q77.js";import"./Select-wYL7g-5T.js";const te=(t={},d={})=>({from:Object.assign({isDisabled:!1,isWeekend:!1,isEmpty:!1,isInvalid:!1,isBefore:!1,isAfter:!1,isValidDate:!0},t),to:Object.assign({isDisabled:!1,isWeekend:!1,isEmpty:!1,isInvalid:!1,isBefore:!1,isAfter:!1,isBeforeFrom:!1,isValidDate:!0},d)}),P={FROM:"FROM",TO:"TO"},Be=(t,d)=>{const i=(d==null?void 0:d.fromDate)&&t&&S(d==null?void 0:d.fromDate,t)>0,r=(d==null?void 0:d.toDate)&&t&&S(t,d==null?void 0:d.toDate)>0;if(N(t)&&!(d!=null&&d.disableWeekends&&w(t))&&!(d!=null&&d.disabled&&W(t,d.disabled)))return{isValidDate:!1,isInvalid:!N(t),isWeekend:(d==null?void 0:d.disableWeekends)&&w(t),isDisabled:(d==null?void 0:d.disabled)&&W(t,d.disabled),isBefore:i,isAfter:r};if(i||r)return{isValidDate:!1,isBefore:i,isAfter:r}},_e=(t,d,i)=>{var r;const V=(i==null?void 0:i.fromDate)&&t&&S(i==null?void 0:i.fromDate,t)>0,F=(i==null?void 0:i.toDate)&&t&&S(t,i==null?void 0:i.toDate)>0,u=(r=d&&S(d,t)>0)!==null&&r!==void 0?r:!1;if(N(t)&&!(i!=null&&i.disableWeekends&&w(t))&&!(i!=null&&i.disabled&&W(t,i.disabled)))return{isValidDate:!1,isInvalid:!N(t),isWeekend:(i==null?void 0:i.disableWeekends)&&w(t),isDisabled:(i==null?void 0:i.disabled)&&W(t,i.disabled),isBefore:V,isAfter:F,isBeforeFrom:u};if(V||F||u)return{isValidDate:!1,isBefore:V,isAfter:F,isBeforeFrom:u}},ne=(t,d)=>{if(!t||!(t!=null&&t.from))return te({isEmpty:!0,isValidDate:!1},{isEmpty:!0,isValidDate:!1});const i=Be(t.from,d),r=t.to?_e(t.to,t.from,d):{isEmpty:!0,isValidDate:!1};return te(Object.assign({},i),Object.assign({},r))},Ae=(t={})=>{const{locale:d,defaultSelected:i,today:r=new Date,fromDate:V,toDate:F,disabled:u,disableWeekends:q,onRangeChange:_,inputFormat:p,onValidate:B,defaultMonth:D,allowTwoDigitYear:k=!0}=t,[M,y]=b.useState(null),A=xe(),m=d?Ce(d):A,[s,L]=b.useState(i),[J,g]=b.useState(s?s==null?void 0:s.from:D??r),[n,K]=b.useState(s??{from:void 0,to:void 0}),[Q,j]=b.useState(s!=null&&s.from?v(s.from,m,"date",p):""),[l,f]=b.useState(s!=null&&s.to?v(s.to,m,"date",p):""),[c,U]=b.useState(ne(n,t)),[Fe,X]=b.useState(!1),O=e=>{_==null||_(e),K(e)},T=(e={},a={})=>{const o=te(e,a);U(o),B==null||B(o)},he=()=>{O(s??{from:void 0,to:void 0}),g(s?s==null?void 0:s.from:D??r),U(ne(s??{from:void 0,to:void 0},t)),j(s!=null&&s.from?v(s.from,m,"date",p):""),f(s!=null&&s.to?v(s.to,m,"date",p):""),L(i)},Se=e=>{O(e),j(e!=null&&e.from?v(e.from,m,"date",p):""),f(e!=null&&e.to?v(e==null?void 0:e.to,m,"date",p):""),U(ne(e,t))},de=(e,a)=>{if(e.target.readOnly)return;const o=z(e.target.value,r,m,"date",k);if(N(o)){a===P.FROM?j(v(o,m,"date",p)):f(v(o,m,"date",p));const R=V&&o&&S(V,o)>0,x=F&&o&&S(o,F)>0;!R&&!x&&g(o)}},ie=(e,a)=>{const o=z(e.target.value,r,m,"date",k);N(o)&&(a===P.FROM?j(v(o,m,"date",p)):a===P.TO&&f(v(o,m,"date",p)))},Z=e=>N(e)&&!(q&&w(e))&&!(u&&W(e,u)),Te=e=>{e!=null&&e.from&&(e!=null&&e.to)&&(X(!1),M==null||M.focus());const a=!(n!=null&&n.from)&&(n!=null&&n.to)?n==null?void 0:n.to:e==null?void 0:e.to,o=Ee(a,e==null?void 0:e.from);e!=null&&e.from?j(v(e==null?void 0:e.from,m,"date",p)):j(""),f(a&&!o?v(a,m,"date",p):""),O({from:e==null?void 0:e.from,to:o?void 0:a}),T({isValidDate:!!(e!=null&&e.from),isEmpty:!(e!=null&&e.from)},{isValidDate:!!(e!=null&&e.to),isEmpty:!a||o})},Ie=(e="",a,o=!1,R=!1)=>{if(j(e),!Z(a)){O(Object.assign(Object.assign({},n),{from:void 0})),T({isEmpty:!e,isValidDate:!1,isInvalid:!N(a),isWeekend:q&&w(a),isDisabled:u&&W(a,u),isBefore:o,isAfter:R},c.to);return}if(o||R){O(Object.assign(Object.assign({},n),{from:void 0})),T({isValidDate:!1,isBefore:o,isAfter:R},c.to);return}if(n!=null&&n.to&&S(a,n==null?void 0:n.to)>0){O({to:a,from:a}),f(v(a,m,"date",p)),g(a),T();return}if(l&&!(n!=null&&n.to)){const x=z(l,r,m,"date",k);if(Z(x)){O({from:a,to:x}),g(a),T();return}}O(Object.assign(Object.assign({},n),{from:a})),T({},c.to),g(a)},Pe=(e="",a,o=!1,R=!1)=>{if(f(e),!Z(a)){O({from:n==null?void 0:n.from,to:void 0}),T(c.from,{isEmpty:!e,isValidDate:!1,isInvalid:!N(a),isWeekend:q&&w(a),isDisabled:u&&W(a,u),isBefore:o,isAfter:R});return}if(o||R){O({from:n==null?void 0:n.from,to:void 0}),T(c.from,{isValidDate:!1,isBefore:o,isAfter:R});return}if(n!=null&&n.from&&S(n==null?void 0:n.from,a)>0){O({from:n==null?void 0:n.from,to:void 0}),T(c.from,{isValidDate:!1,isBeforeFrom:!0});return}O({from:n==null?void 0:n.from,to:a}),T(c.from,{}),g(a)},ae=(e,a)=>{const o=z(e.target.value,r,m,"date",k),R=V&&S(V,o)>0,x=F&&S(o,F)>0;return a===P.FROM?Ie(e.target.value,o,R,x):Pe(e.target.value,o,R,x)};return{datepickerProps:{month:J,onMonthChange:g,onSelect:Te,selected:n,locale:d,fromDate:V,toDate:F,today:r,mode:"range",open:Fe,onOpenToggle:()=>X(e=>!e),onClose:()=>{X(!1),M==null||M.focus()},disabled:u,disableWeekends:q},fromInputProps:{onChange:e=>ae(e,P.FROM),onFocus:e=>de(e,P.FROM),onBlur:e=>ie(e,P.FROM),value:Q,setAnchorRef:y},toInputProps:{onChange:e=>ae(e,P.TO),onFocus:e=>de(e,P.TO),onBlur:e=>ie(e,P.TO),value:l,setAnchorRef:y},reset:he,selectedRange:n,setSelected:Se}};h.extend(Ne);const Re=({fomName:t,tomName:d,label:i,validate:r=[],disabled:V=!1,isReadOnly:F=!1,onChange:u,fromDate:q,toDate:_,isEdited:p})=>{const{formState:{errors:B}}=je(),{field:D}=le({name:t,rules:{validate:b.useMemo(()=>se(r),[r])}}),{field:k}=le({name:d,rules:{validate:b.useMemo(()=>se(r),[r])}}),M=D.value?h(D.value,I,!0).format(E):"",[y,A]=b.useState(M),m=k.value?h(k.value,I,!0).format(E):"",[s,L]=b.useState(m),{datepickerProps:J,toInputProps:g,fromInputProps:n}=Ae({onRangeChange:l=>{const f=l!=null&&l.from?h(l==null?void 0:l.from).format(I):void 0;u&&u(f),D.onChange(f),A(h(f,I,!0).format(E));const c=l!=null&&l.to?h(l==null?void 0:l.to).format(I):void 0;u&&u(c),k.onChange(c),L(c?h(c,I,!0).format(E):"")}}),K=b.useCallback(l=>{const f=h(l.target.value,E,!0).format(I),c=f!=="Invalid Date";A(l.target.value),u&&u(c?f:l.target.value),D.onChange(c?f:l.target.value)},[A,u,D]),Q=b.useCallback(l=>{const f=h(l.target.value,E,!0).format(I),c=f!=="Invalid Date";L(l.target.value),u&&u(c?f:l.target.value),k.onChange(c?f:l.target.value)},[L,u,k]);if(F){const l=D.value?h(D.value,I,!0).format(E):void 0,f=k.value?h(k.value,I,!0).format(E):void 0;return C.jsx(Me,{label:i,value:`${l} - ${f||""}`,isEdited:p})}const j={...J,fromDate:q,toDate:_};return C.jsx(ee,{...j,children:C.jsxs(We,{gap:"2",children:[C.jsx(qe,{size:"small",children:i}),C.jsxs(we,{gap:"4",children:[C.jsx(ee.Input,{...n,onChange:K,value:y,size:"small",hideLabel:!0,label:"","aria-label":"Fra dato",disabled:V,error:oe(B,t)}),C.jsx(ee.Input,{...g,onChange:Q,value:s,size:"small",label:"","aria-label":"Til dato",hideLabel:!0,disabled:V,error:oe(B,d)})]})]})})};Re.__docgenInfo={description:"",methods:[],displayName:"Rangepicker",props:{fomName:{required:!0,tsType:{name:"string"},description:""},tomName:{required:!0,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},validate:{required:!1,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"((value: string) => any)[]"},description:"",defaultValue:{value:"[]",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isReadOnly:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: any) => void",signature:{arguments:[{type:{name:"any"},name:"value"}],return:{name:"void"}}},description:""},fromDate:{required:!1,tsType:{name:"Date"},description:""},toDate:{required:!1,tsType:{name:"Date"},description:""},isEdited:{required:!1,tsType:{name:"boolean"},description:""}}};const Wn={title:"form-hooks/Rangepicker",component:Re,tags:["autodocs"],decorators:ge({fomPre:"2022-10-22",tomPre:"2022-10-27"})},H={args:{fomName:"fom",tomName:"tom",label:"Dette er en rangepicker"}},$={args:{fomName:"fom",tomName:"tom",label:"Dette er en rangepicker med disabled datoer",fromDate:new Date("2022-10-10"),toDate:new Date("2022-10-14")}},G={args:{label:"Dette er en rangepicker der verdi er valgt",fomName:"fomPre",tomName:"tomPre"}},Y={args:{label:"Dette er en rangepicker som er readonly",fomName:"fomPre",tomName:"tomPre",isReadOnly:!0,isEdited:!0}};var re,ue,fe;H.parameters={...H.parameters,docs:{...(re=H.parameters)==null?void 0:re.docs,source:{originalSource:`{
  args: {
    fomName: 'fom',
    tomName: 'tom',
    label: 'Dette er en rangepicker'
  }
}`,...(fe=(ue=H.parameters)==null?void 0:ue.docs)==null?void 0:fe.source}}};var me,ce,pe;$.parameters={...$.parameters,docs:{...(me=$.parameters)==null?void 0:me.docs,source:{originalSource:`{
  args: {
    fomName: 'fom',
    tomName: 'tom',
    label: 'Dette er en rangepicker med disabled datoer',
    fromDate: new Date('2022-10-10'),
    toDate: new Date('2022-10-14')
  }
}`,...(pe=(ce=$.parameters)==null?void 0:ce.docs)==null?void 0:pe.source}}};var De,be,ve;G.parameters={...G.parameters,docs:{...(De=G.parameters)==null?void 0:De.docs,source:{originalSource:`{
  args: {
    label: 'Dette er en rangepicker der verdi er valgt',
    fomName: 'fomPre',
    tomName: 'tomPre'
  }
}`,...(ve=(be=G.parameters)==null?void 0:be.docs)==null?void 0:ve.source}}};var Ve,ke,Oe;Y.parameters={...Y.parameters,docs:{...(Ve=Y.parameters)==null?void 0:Ve.docs,source:{originalSource:`{
  args: {
    label: 'Dette er en rangepicker som er readonly',
    fomName: 'fomPre',
    tomName: 'tomPre',
    isReadOnly: true,
    isEdited: true
  }
}`,...(Oe=(ke=Y.parameters)==null?void 0:ke.docs)==null?void 0:Oe.source}}};const wn=["Default","MedDisabledDatoer","MedVerdi","ReadOnly"];export{H as Default,$ as MedDisabledDatoer,G as MedVerdi,Y as ReadOnly,wn as __namedExportsOrder,Wn as default};
