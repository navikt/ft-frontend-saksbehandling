import{r as c,e as d}from"./index-DASCADcX.js";import{u as z}from"./useId-sDoo_C8F.js";import{u as D,a as fe,b as me,c as Be}from"./Theme-Bqc_BD0M.js";import{D as ve,a as He}from"./Label-CfBdhDeq.js";import{a as Y,u as Ze}from"./Loader-C31s9nuZ.js";import{t as $,n as W,d as Ve,g as pe,h as Ke,j as K,s as U,k as be,l as he,m as R,o as Ue,q as te,r as Xe,u as qe,v as We,w as Ge,c as X}from"./DatePicker-C4BZGChU.js";import{a as ge,o as ye,f as we,g as Oe,h as _e,i as xe,c as je,s as Ee,d as Pe,e as Re,k as Ie,b as Se,F as Ce}from"./floating-ui.react-CkbDYyWV.js";import{o as ee}from"./omit-B7stZg_p.js";import"./useId-BiFzyKmP.js";var Je=function(e,l){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)l.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(o[t[n]]=e[t[n]]);return o};const Bt=c.forwardRef((e,l)=>{var{title:o,titleId:t}=e,n=Je(e,["title","titleId"]);let r=z();return r=o?t||"title-"+r:void 0,c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:l,"aria-labelledby":r},n),o?c.createElement("title",{id:r},o):null,c.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3.75 12a8.25 8.25 0 1 1 16.5 0 8.25 8.25 0 0 1-16.5 0M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25m4.573 7.234a.75.75 0 1 0-1.146-.968l-4.973 5.877L8.03 11.97a.75.75 0 0 0-1.06 1.06l3 3a.75.75 0 0 0 1.102-.046z",clipRule:"evenodd"}))});var Qe=function(e,l){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)l.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(o[t[n]]=e[t[n]]);return o};const Ht=c.forwardRef((e,l)=>{var{title:o,titleId:t}=e,n=Qe(e,["title","titleId"]);let r=z();return r=o?t||"title-"+r:void 0,c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:l,"aria-labelledby":r},n),o?c.createElement("title",{id:r},o):null,c.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 2.25a.75.75 0 0 1 .656.387l9.527 17.25A.75.75 0 0 1 21.526 21H2.474a.75.75 0 0 1-.657-1.113l9.527-17.25A.75.75 0 0 1 12 2.25m8.255 17.25L12 4.551 3.745 19.5zM12 8.75a.75.75 0 0 1 .75.75v4a.75.75 0 0 1-1.5 0v-4a.75.75 0 0 1 .75-.75m0 6.75a1 1 0 1 0 0 2 1 1 0 0 0 0-2",clipRule:"evenodd"}))});var et=function(e,l){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)l.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(o[t[n]]=e[t[n]]);return o};const Zt=c.forwardRef((e,l)=>{var{title:o,titleId:t}=e,n=et(e,["title","titleId"]);let r=z();return r=o?t||"title-"+r:void 0,c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:l,"aria-labelledby":r},n),o?c.createElement("title",{id:r},o):null,c.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12.55 3.75a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5M9.8 5a2.75 2.75 0 1 1 5.5 0 2.75 2.75 0 0 1-5.5 0m3.5 4a.75.75 0 0 1 .75-.75h2a.75.75 0 0 1 .75.75v7.106a.75.75 0 0 1-.75.75H14.8V21a.75.75 0 0 1-1.5 0v-4.894a.75.75 0 0 1 .75-.75h1.25V9.75h-1.25A.75.75 0 0 1 13.3 9m-2.78.916a.25.25 0 0 1 .235-.166h.295a.75.75 0 0 0 0-1.5h-.295c-.74 0-1.4.465-1.648 1.161l-2.263 6.337a.75.75 0 0 0 .706 1.002h2.75V21a.75.75 0 0 0 1.5 0v-5a.75.75 0 0 0-.75-.75H8.614z",clipRule:"evenodd"}))});var tt=function(e,l){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)l.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(o[t[n]]=e[t[n]]);return o};const Vt=c.forwardRef((e,l)=>{var{title:o,titleId:t}=e,n=tt(e,["title","titleId"]);let r=z();return r=o?t||"title-"+r:void 0,c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:l,"aria-labelledby":r},n),o?c.createElement("title",{id:r},o):null,c.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.75 12a.75.75 0 0 1 .75-.75h13a.75.75 0 1 1 0 1.5h-13a.75.75 0 0 1-.75-.75",clipRule:"evenodd"}))});var nt=function(e,l){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)l.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(o[t[n]]=e[t[n]]);return o};const Kt=c.forwardRef((e,l)=>{var{title:o,titleId:t}=e,n=nt(e,["title","titleId"]);let r=z();return r=o?t||"title-"+r:void 0,c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:l,"aria-labelledby":r},n),o?c.createElement("title",{id:r},o):null,c.createElement("path",{fill:"currentColor",d:"M12.75 5.5a.75.75 0 0 0-1.5 0v5.75H5.5a.75.75 0 0 0 0 1.5h5.75v5.75a.75.75 0 0 0 1.5 0v-5.75h5.75a.75.75 0 0 0 0-1.5h-5.75z"}))});var ot=function(e,l){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)l.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(o[t[n]]=e[t[n]]);return o};const Ut=c.forwardRef((e,l)=>{var{title:o,titleId:t}=e,n=ot(e,["title","titleId"]);let r=z();return r=o?t||"title-"+r:void 0,c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:l,"aria-labelledby":r},n),o?c.createElement("title",{id:r},o):null,c.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.272 2.25a.75.75 0 0 0-.53.22L2.47 7.742a.75.75 0 0 0-.22.53v7.456c0 .199.079.39.22.53l5.272 5.272c.14.141.331.22.53.22h7.456a.75.75 0 0 0 .53-.22l5.272-5.272a.75.75 0 0 0 .22-.53V8.272a.75.75 0 0 0-.22-.53L16.258 2.47a.75.75 0 0 0-.53-.22zM3.75 8.583 8.583 3.75h6.834l4.833 4.833v6.834l-4.833 4.833H8.583L3.75 15.417zm5.28-.613a.75.75 0 0 0-1.06 1.06L10.94 12l-2.97 2.97a.75.75 0 1 0 1.06 1.06L12 13.06l2.97 2.97a.75.75 0 1 0 1.06-1.06L13.06 12l2.97-2.97a.75.75 0 0 0-1.06-1.06L12 10.94z",clipRule:"evenodd"}))});function H(e,l){const o=+$(e)-+$(l);return o<0?-1:o>0?1:o}function lt(e,l,o){const[t,n]=W(o==null?void 0:o.in,e,l);return t.getFullYear()-n.getFullYear()}function De(e,l,o){const[t,n]=W(o==null?void 0:o.in,e,l),r=ie(t,n),u=Math.abs(Ve(t,n));t.setDate(t.getDate()-r*u);const a=+(ie(t,n)===-r),s=r*(u-a);return s===0?0:s}function ie(e,l){const o=e.getFullYear()-l.getFullYear()||e.getMonth()-l.getMonth()||e.getDate()-l.getDate()||e.getHours()-l.getHours()||e.getMinutes()-l.getMinutes()||e.getSeconds()-l.getSeconds()||e.getMilliseconds()-l.getMilliseconds();return o<0?-1:o>0?1:o}function ce(e,l){return+$(e)-+$(l)}function q(e,l){const o=$(e,l==null?void 0:l.in);return o.setHours(23,59,59,999),o}function rt(e,l){const o=$(e,l==null?void 0:l.in);return+q(o,l)==+pe(o,l)}function at(e,l,o){const[t,n,r]=W(o==null?void 0:o.in,e,e,l),u=H(n,r),a=Math.abs(Ke(n,r));if(a<1)return 0;n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-u*a);let s=H(n,r)===-u;rt(t)&&a===1&&H(t,r)===1&&(s=!1);const p=u*(a-+s);return p===0?0:p}function st(e,l,o){const[t,n]=W(o==null?void 0:o.in,e,l),r=H(t,n),u=Math.abs(lt(t,n));t.setFullYear(1584),n.setFullYear(1584);const a=H(t,n)===-r,s=r*(u-+a);return s===0?0:s}function it(e,l,o){return K(e,-l,o)}const Xt=()=>{const{cn:e}=D();return d.createElement("span",{className:e("navds-stack__spacer")})},Fe=c.createContext({startDate:new Date,endDate:new Date,direction:"left",setStart:()=>null,setEndInclusive:()=>null,activeRow:0,setActiveRow:()=>null,initiate:()=>null,addFocusable:()=>null}),Z=()=>{const e=c.useContext(Fe);return e||console.warn("useTimelineContext must be used with TimelineContext (<Timeline />)"),e},ct=({horizontalPosition:e})=>e<=98&&e>=0,de=(e,l)=>De(e,l)<=1,dt=({horizontalPosition:e,width:l})=>e>=0&&e<=100&&l>0,ne=(e,l,o)=>{const t=ce(o,l);return ce(e,l)/t*100},G=(e,l,o,t)=>{const n=ne(e,o,t),r=ne(l,o,t)-n;return{horizontalPosition:n,width:r}},ut=(e,l,o,t,n,r)=>{const u=Math.ceil(o/10),a=U(l);return new Array(o).fill(a).map((s,p)=>{if(p%u!==0)return null;const f=be(s,p),{horizontalPosition:g,width:v}=G(f,he(f,1),e,l);return{direction:t,horizontalPosition:g,label:R(f,n,{locale:r}),date:f,width:v}}).filter(s=>s!==null)},ft=(e,l,o,t,n)=>{const r=Ue(e),u=pe(l),a=at(u,r)+1;return new Array(a).fill(r).map((s,p)=>{const f=te(s,p),{horizontalPosition:g,width:v}=G(f,te(f,1),e,l);return{direction:o,horizontalPosition:g,label:R(f,t,{locale:n}),date:f,width:v}})},mt=(e,l,o,t,n)=>{const r=Xe(e),u=qe(l),a=st(u,e)+1;return new Array(a).fill(r).map((s,p)=>{const f=K(s,p),{horizontalPosition:g,width:v}=G(f,K(f,1),e,l);return{direction:o,horizontalPosition:g,label:R(f,t,{locale:n}),date:f,width:v}})},vt=(e,l,o,t,n)=>{const r=De(l,e);if(r<40){const a=n("dayFormat");return ut(e,l,r,o,a,t)}if(r<370){const a=n("monthFormat");return ft(e,l,o,a,t)}const u=n("yearFormat");return mt(e,l,o,u,t)},pt=({templates:e})=>{const{endDate:l,startDate:o,direction:t}=Z(),n=Y("Timeline",{dayFormat:e==null?void 0:e.day,monthFormat:e==null?void 0:e.month,yearFormat:e==null?void 0:e.year}),r=Ze(),u=vt(o,l,t,r,n),{cn:a}=D();return d.createElement("div",{className:a("navds-timeline__axislabels"),"aria-hidden":"true"},u.filter(ct).map(s=>d.createElement(ve,{className:a("navds-timeline__axislabels-label"),as:"div",key:s.label,style:{justifyContent:t==="left"?"flex-start":"flex-end",[t]:`${s.horizontalPosition}%`,width:`${s.width}%`}},s.label)))};var bt=function(e,l){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)l.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(o[t[n]]=e[t[n]]);return o};const Me=c.forwardRef((e,l)=>{var{date:o,children:t}=e,n=bt(e,["date","children"]);const{cn:r}=D(),{startDate:u,endDate:a,direction:s}=Z(),[p,f]=c.useState(!1),g=c.useRef(null),v=Y("Timeline"),w=!fe(!1),{context:y,placement:m,middlewareData:{arrow:{x:b,y:M}={}},refs:E,floatingStyles:T}=ge({placement:"top",open:p,onOpenChange:h=>f(h),whileElementsMounted:xe,middleware:[ye(w?16:8),we(),Oe({padding:5,fallbackPlacements:["bottom","top"]}),_e({element:g,padding:5})]}),F=je(y,{handleClose:Ee(),restMs:25,delay:{open:1e3},move:!1}),A=Pe(y),V=Re(y),I=Ie(y,{role:"dialog"}),{getFloatingProps:S,getReferenceProps:N}=Se([F,A,V,I]),k=me(E.setReference,l),i={top:"bottom",right:"left",bottom:"top",left:"right"}[m.split("-")[0]];return d.createElement(d.Fragment,null,d.createElement("div",{className:r("navds-timeline__pin-wrapper"),style:{[s]:`${ne(o,u,a)}%`}},d.createElement("button",Object.assign({},n,{ref:k,className:r("navds-timeline__pin-button"),"aria-label":v("Pin.pin",{date:R(o,v("dateFormat"))}),type:"button","aria-expanded":t?p:void 0},N({onKeyDown:h=>{var _;(_=n==null?void 0:n.onKeyDown)===null||_===void 0||_.call(n,h),h.key==="Enter"?f(C=>!C):h.key===" "&&f(!1)}})))),t&&p&&d.createElement(Ce,{context:y,modal:!1,initialFocus:-1,returnFocus:!1},d.createElement("div",Object.assign({className:r("navds-timeline__popover"),"data-placement":m,ref:E.setFloating},S(),{tabIndex:void 0,style:T}),t,w&&d.createElement("div",{ref:g,style:Object.assign(Object.assign(Object.assign({},b!=null?{left:b}:{}),M!=null?{top:M}:{}),i?{[i]:"-0.5rem"}:{}),className:r("navds-timeline__popover-arrow")}))))});Me.componentType="pin";const Te=c.createContext({periodId:"",firstFocus:!1}),Ae=()=>{const e=c.useContext(Te);return e||console.warn("usePeriodContext must be used with PeriodContext"),e},Le=c.createContext({periods:[],id:"",active:!1,index:0}),oe=()=>{const e=c.useContext(Le);return e||console.warn("useRowContext must be used with RowContext"),e},Ne=(e,l,o)=>Be(`navds-timeline__period navds-timeline__period--${o}`,{"navds-timeline__period--connected-both":e==="both","navds-timeline__period--connected-right":e==="right"&&l==="left"||e==="left"&&l==="right","navds-timeline__period--connected-left":e==="left"&&l==="left"||e==="right"&&l==="right"}),ke=(e,l,o,t,n)=>{const r=n("dateFormat"),u=R(e,r),a=R(l,r);return n("Period.period",{status:t||n(`Period.${o}`),start:u,end:a})},ht=d.memo(({onSelectPeriod:e,start:l,end:o,status:t,cropped:n,direction:r,left:u,width:a,icon:s,children:p,isActive:f,statusLabel:g,restProps:v,periodRef:O})=>{const{cn:w}=D(),[y,m]=c.useState(!1),{index:b}=oe(),{firstFocus:M}=Ae(),{initiate:E,addFocusable:T}=Z(),F=c.useRef(null),A=Y("Timeline"),I=!fe(!1),{context:S,placement:N,middlewareData:{arrow:{x:k,y:i}={}},refs:h,floatingStyles:_}=ge({placement:"top",open:y,onOpenChange:j=>m(j),whileElementsMounted:xe,middleware:[ye(I?16:8),we(),Oe({padding:5,fallbackPlacements:["bottom","top"]}),_e({element:F,padding:5})]}),C=je(S,{handleClose:Ee(),restMs:25,delay:{open:1e3},move:!1}),B=Pe(S),x=Re(S),Q=Ie(S,{role:"dialog"}),{getFloatingProps:P,getReferenceProps:$e}=Se([C,B,x,Q]),ze=me(h.setReference,O),se={top:"bottom",right:"left",bottom:"top",left:"right"}[N.split("-")[0]];return d.createElement(d.Fragment,null,d.createElement("button",Object.assign({},v,{type:"button",ref:j=>{M&&T(j,b),ze(j)},"aria-label":ke(l,o,t,g,A),className:w("navds-timeline__period--clickable",Ne(n,r,t),v==null?void 0:v.className,{"navds-timeline__period--selected":f}),"aria-expanded":p?y:void 0,"aria-current":f||void 0},$e({onFocus:()=>{E(b)},onKeyDown:j=>{var L;(L=v==null?void 0:v.onKeydown)===null||L===void 0||L.call(v,j),j.key==="Enter"&&m(Ye=>!Ye),j.key===" "&&(e==null||e(j),m(!1))},style:{width:`${a}%`,[r]:`${u}%`},onClick:j=>{var L;(L=v==null?void 0:v.onClick)===null||L===void 0||L.call(v,j),j.detail!==0&&(e==null||e(j))}})),d.createElement("span",{className:w("navds-timeline__period--inner")},s)),p&&y&&d.createElement(Ce,{context:S,modal:!1,initialFocus:-1,returnFocus:!1},d.createElement("div",Object.assign({className:w("navds-timeline__popover"),"data-placement":N,ref:h.setFloating},P(),{style:_}),p,I&&d.createElement("div",{ref:F,style:Object.assign(Object.assign(Object.assign({},k!=null?{left:k}:{}),i!=null?{top:i}:{}),se?{[se]:"-0.5rem"}:{}),className:w("navds-timeline__popover-arrow")}))))}),gt=({start:e,end:l,status:o,cropped:t,direction:n,left:r,width:u,icon:a,statusLabel:s,restProps:p,periodRef:f})=>{const g=Y("Timeline"),{cn:v}=D();return d.createElement("div",Object.assign({ref:f},p,{className:v(Ne(t,n,o),p==null?void 0:p.className),style:{width:`${u}%`,[n]:`${r}%`}}),d.createElement("span",{className:v("navds-timeline__period--inner")},a,d.createElement("span",{className:v("navds-sr-only")},ke(e,l,o,s,g))))},le=c.forwardRef(({icon:e},l)=>{const{periods:o}=oe(),{periodId:t,restProps:n}=Ae(),r=o.find(b=>b.id===t);if(!r)return d.createElement(d.Fragment,null);const{start:u,endInclusive:a,width:s,horizontalPosition:p,status:f="neutral",onSelectPeriod:g,cropped:v,direction:O,children:w,isActive:y,statusLabel:m}=r;return g||w?d.createElement(ht,{periodRef:l,start:u,end:a,status:f,onSelectPeriod:g,cropped:v||"",direction:O,width:s,left:p,icon:e,isActive:y,statusLabel:m,restProps:n},w):d.createElement(gt,{periodRef:l,start:u,end:a,status:f,cropped:v||"",direction:O,width:s,left:p,icon:e,statusLabel:m,restProps:n})});le.componentType="period";var yt=function(e,l){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)l.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(o[t[n]]=e[t[n]]);return o};const re=c.forwardRef((e,l)=>{var{label:o,className:t,headingTag:n="h3",icon:r}=e,u=yt(e,["label","className","headingTag","icon"]);const{cn:a}=D(),{periods:s,id:p,active:f}=oe(),{setActiveRow:g}=Z(),v=Y("Timeline"),O=s.reduce((m,b)=>m.end>b.end?m:b,{}),w=s.reduce((m,b)=>m.end<b.end?m:b,{}),y=s.find(m=>!!m.children||!!m.onSelectPeriod);return d.createElement(d.Fragment,null,o&&d.createElement(He,{as:n,id:`timeline-row-${p}`,className:a("navds-timeline__row-label"),size:"small"},r,o),d.createElement("div",{className:a("navds-timeline__row",{"navds-timeline__row--active":f})},d.createElement("ol",Object.assign({},u,{tabIndex:-1,ref:l,"aria-label":s.length===0?v("Row.noPeriods"):v("Row.period",{start:R(w.start,v("dateFormat")),end:R(O.end,v("dateFormat"))}),className:a("navds-timeline__row-periods",t),onKeyDown:m=>{(m.key==="ArrowDown"||m.key==="ArrowUp")&&(m.preventDefault(),g(m.key))}}),s==null?void 0:s.map(m=>d.createElement("li",{key:`period-${m.id}`},d.createElement(Te.Provider,{value:{periodId:m.id,firstFocus:(y==null?void 0:y.id)===m.id,restProps:m==null?void 0:m.restProps}},d.createElement(le,{start:m.start,end:m.endInclusive,icon:m.icon,ref:m==null?void 0:m.ref})))))))});re.componentType="row";const wt=(e,l)=>e.horizontalPosition-l.horizontalPosition,Ot=(e,l,o,t="left",n,r,u)=>{const a=e.start,s=e.end,p=n<r.length-1&&!We(r[n+1].start,s),{horizontalPosition:f,width:g}=G(U(a),q(p?U(be(r[n+1].start,1)):s),l,o);return{id:`r-${u}-p-${n}`,start:a,endInclusive:s,horizontalPosition:f,direction:t,width:g,end:s,status:e.status,onSelectPeriod:e.onSelectPeriod,icon:e.icon,children:e.children,isActive:e.isActive,statusLabel:e.statusLabel}},_t=(e,l,o)=>{const t=l>0&&de(e.start,o[l-1].endInclusive),n=l<o.length-1&&de(o[l+1].start,e.endInclusive);return t&&n?Object.assign(Object.assign({},e),{cropped:"both"}):t?Object.assign(Object.assign({},e),{cropped:"left"}):n?Object.assign(Object.assign({},e),{cropped:"right"}):e},xt=e=>{let{horizontalPosition:l,width:o,cropped:t}=e;return l+o>100&&(o=100-l,t=t==="left"||t==="both"?"both":"right"),l<0&&l+o>0&&(o=l+o,l=0,t=t==="right"||t==="both"?"both":"left"),Object.assign(Object.assign({},e),{width:o,horizontalPosition:l,cropped:t})},jt=(e,l,o,t)=>c.useMemo(()=>e.map((n,r)=>{const u=n.periods.sort((a,s)=>a.start.valueOf()-s.start.valueOf()).map((a,s)=>Object.assign(Object.assign({},Ot(a,l,o,t,s,n.periods,r)),{restProps:a==null?void 0:a.restProps,ref:a==null?void 0:a.ref})).sort(wt).map(_t).map(xt).filter(dt);return{id:`tl-row-${r}`,label:n.label,headingTag:n.headingTag||"h3",icon:n.icon,periods:t==="left"?u:u.reverse(),restProps:n==null?void 0:n.restProps,ref:n==null?void 0:n.ref}}),[e,l,o,t]),Et=({startDate:e,rows:l})=>c.useMemo(()=>{if(e)return e;const o=l.flat().filter(n=>n.start).map(n=>n.start);return o.length===0?new Date:o.reduce((n,r)=>r<n?r:n)},[e,l]),Pt=(e,l)=>l.end>e?l.end:e,Rt=e=>e.flat().reduce(Pt,new Date(0)),ue=({endDate:e,rows:l})=>c.useMemo(()=>e||he(Rt(l),1),[e,l]),It=e=>{const l=[];return e==null||e.forEach(o=>{var t,n,r,u,a,s,p,f,g,v,O,w;const y=[];if(d.isValidElement(o)&&(!((t=o==null?void 0:o.props)===null||t===void 0)&&t.children)){if(Array.isArray(o.props.children))for(let m=0;m<o.props.children.length;m++){const b=o.props.children[m];y.push({start:(n=b==null?void 0:b.props)===null||n===void 0?void 0:n.start,end:(r=b==null?void 0:b.props)===null||r===void 0?void 0:r.end,status:((u=b==null?void 0:b.props)===null||u===void 0?void 0:u.status)||"neutral",onSelectPeriod:(a=b.props)===null||a===void 0?void 0:a.onSelectPeriod,label:o.props.label,icon:b.props.icon,children:b.props.children,isActive:b.props.isActive,statusLabel:b.props.statusLabel,restProps:ee(b.props,["start","end","status","onSelectPeriod","label","icon","children","isActive","statusLabel"]),ref:b==null?void 0:b.ref})}else y.push({start:o.props.children.props.start,end:o.props.children.props.end,status:((s=o.props.children.props)===null||s===void 0?void 0:s.status)||"neutral",onSelectPeriod:(p=o.props.children.props)===null||p===void 0?void 0:p.onSelectPeriod,label:o.props.label,icon:(f=o.props.children.props)===null||f===void 0?void 0:f.icon,children:(g=o.props.children.props)===null||g===void 0?void 0:g.children,statusLabel:(v=o.props.children.props)===null||v===void 0?void 0:v.statusLabel,restProps:ee(o.props.children.props,["start","end","status","onSelectPeriod","label","icon","children","isActive","statusLabel"]),ref:(w=(O=o.props)===null||O===void 0?void 0:O.children)===null||w===void 0?void 0:w.ref});l.push({label:o.props.label,icon:o.props.icon,headingTag:o.props.headingTag,periods:y,restProps:ee(o.props,["label","icon","headingTag"]),ref:o==null?void 0:o.ref})}}),l};var St=function(e,l){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)l.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(o[t[n]]=e[t[n]]);return o};const Ct=c.forwardRef((e,l)=>{var{label:o,interval:t,count:n}=e,r=St(e,["label","interval","count"]);const{setStart:u,endDate:a,startDate:s,direction:p}=Z(),f=Y("Timeline"),g=f("dateFormat"),{cn:v}=D();let O;t==="month"?O=p==="left"?Ge(a,n):te(s,n):O=p==="left"?it(a,n):K(s,n);const w=p==="left"?X(s,O):X(a,O);return d.createElement(ve,{as:"li"},d.createElement("button",Object.assign({type:"button","aria-label":w?f("Zoom.reset"):f("Zoom.zoom",{start:R(O,g),end:R(a,g)}),ref:l},r,{className:v("navds-timeline__zoom-button"),onClick:()=>{u(O)},"aria-pressed":w}),o))});var Dt=function(e,l){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)l.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(o[t[n]]=e[t[n]]);return o};const ae=c.forwardRef((e,l)=>{var{className:o,children:t}=e,n=Dt(e,["className","children"]);const{cn:r}=D();return d.createElement("ul",Object.assign({ref:l,className:r(o,"navds-timeline__zoom")},n),t)});ae.Button=Ct;ae.componentType="zoom";var Ft=function(e,l){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)l.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(o[t[n]]=e[t[n]]);return o};const J=c.forwardRef((e,l)=>{var{children:o,startDate:t,endDate:n,direction:r="left",axisLabelTemplates:u}=e,a=Ft(e,["children","startDate","endDate","direction","axisLabelTemplates"]);const{cn:s}=D(),p=Array.isArray(o),f=c.useRef([]);p||(o=[o]);const g=d.Children.toArray(o).filter(i=>{var h;return((h=i==null?void 0:i.type)===null||h===void 0?void 0:h.componentType)==="row"}),v=d.Children.toArray(o).filter(i=>{var h;return((h=i==null?void 0:i.type)===null||h===void 0?void 0:h.componentType)==="pin"}).map(i=>()=>i),O=d.Children.toArray(o).find(i=>{var h;return((h=i==null?void 0:i.type)===null||h===void 0?void 0:h.componentType)==="zoom"}),w=c.useMemo(()=>It(g),[g]),y=w.map(i=>i!=null&&i.periods?i.periods:[]),m=U(Et({startDate:t,rows:y})),[b,M]=c.useState(m),[E,T]=c.useState(null),[F,A]=c.useState(q(ue({endDate:n,rows:y}))),V=q(ue({endDate:n,rows:y})),I=jt(w,t??b,n??F,r),S=i=>{if(!(t||n))if(r==="left"){if(X(i,b)){M(m);return}M(i)}else{if(X(i,F)){A(V);return}A(i)}},N=i=>{var h,_,C,B;if(E!==null&&i==="ArrowDown"){for(let x=E+1;x<I.length;x++)if(I[x].periods.find(P=>!!P.children||!!P.onSelectPeriod)){T(x),(_=(h=f.current.find(P=>P.id===x))===null||h===void 0?void 0:h.ref)===null||_===void 0||_.focus();break}return}if(E!==null&&i==="ArrowUp"){for(let x=E-1;x>=0;x--)if(I[x].periods.find(P=>!!P.children||!!P.onSelectPeriod)){T(x),(B=(C=f.current.find(P=>P.id===x))===null||C===void 0?void 0:C.ref)===null||B===void 0||B.focus();break}return}},k=(i,h)=>{let _=f.current;_=_.filter(C=>C.id!==h),_.push({ref:i,id:h}),f.current=_};return d.createElement(Fe.Provider,{value:{startDate:t??b,endDate:n??F,direction:r,setStart:i=>S(i),setEndInclusive:i=>A(i),activeRow:E,setActiveRow:i=>N(i),initiate:i=>T(i),addFocusable:k}},d.createElement("div",Object.assign({},a,{ref:l}),d.createElement("div",{className:s("navds-timeline")},d.createElement(pt,{templates:u}),v.map((i,h)=>d.createElement(i,{key:`pin-${h}`})),I.map((i,h)=>d.createElement(Le.Provider,{key:`row-${i.id}`,value:{periods:i.periods,id:i.id,active:E===h,index:h}},d.createElement(re,Object.assign({},i==null?void 0:i.restProps,{ref:i==null?void 0:i.ref,label:i.label,icon:i.icon,headingTag:i.headingTag}))))),O))});J.Row=re;J.Period=le;J.Pin=Me;J.Zoom=ae;export{Xt as S,J as T,Kt as a,Vt as b,Zt as c,Ht as d,Bt as e,Ut as f};
