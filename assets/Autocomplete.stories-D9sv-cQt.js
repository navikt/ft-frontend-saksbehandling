var F=Object.defineProperty;var M=(a,s,e)=>s in a?F(a,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[s]=e;var p=(a,s,e)=>M(a,typeof s!="symbol"?s+"":s,e);import{e as _,j as i}from"./iframe-DlqD_I3e.js";import{S}from"./Search-By3aBhs4.js";const L="_autocompleteSuggestion__substring_mf7v0_1",$="_autocompleteSuggestion__inner_mf7v0_4",r={autocompleteSuggestion__substring:L,autocompleteSuggestion__inner:$,"autocompleteSuggestion--active":"_autocompleteSuggestion--active_mf7v0_12"};class k extends _.Component{constructor(s){super(s),this.state={value:s.value},this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}onClick(){const{onClick:s}=this.props,{value:e}=this.state;s(e)}onMouseMove(){const{setSuggestionIndex:s,index:e}=this.props;s(e)}render(){const{match:s,active:e,avoidBlur:t,id:n}=this.props,{value:o}=this.state.value,u=o.toLowerCase().startsWith(s.toLowerCase());return i.jsx("li",{id:n,role:"option","aria-selected":e,onClick:this.onClick,onMouseMove:this.onMouseMove,onFocus:t,onMouseDown:t,onKeyDown:t,className:"autocompleteSuggestion typo-normal",children:u?i.jsxs("span",{className:`${r.autocompleteSuggestion__inner} ${e?r["autocompleteSuggestion--active"]:""}`,children:[o.substring(0,s.length),i.jsx("span",{className:r.autocompleteSuggestion__substring,children:o.substring(s.length)})]}):i.jsx("span",{className:`${r.autocompleteSuggestion__inner} ${e?r["autocompleteSuggestion--active"]:""}`,children:o})})}}k.__docgenInfo={description:"",methods:[{name:"onClick",docblock:null,modifiers:[],params:[],returns:null},{name:"onMouseMove",docblock:null,modifiers:[],params:[],returns:null}],displayName:"AutocompleteSuggestion",props:{id:{required:!0,tsType:{name:"string"},description:""},index:{required:!0,tsType:{name:"number"},description:""},onClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: Suggestion) => void",signature:{arguments:[{type:{name:"Suggestion"},name:"value"}],return:{name:"void"}}},description:""},value:{required:!0,tsType:{name:"Suggestion"},description:""},match:{required:!0,tsType:{name:"string"},description:""},active:{required:!0,tsType:{name:"boolean"},description:""},setSuggestionIndex:{required:!0,tsType:{name:"signature",type:"function",raw:"(index: number) => void",signature:{arguments:[{type:{name:"number"},name:"index"}],return:{name:"void"}}},description:""},avoidBlur:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const A="_autocomplete_9dlnp_1",R="_autocomplete__suggestions_9dlnp_27",h={autocomplete:A,autocomplete__suggestions:R,"autocomplete__suggestions--hidden":"_autocomplete__suggestions--hidden_9dlnp_31"};class B extends _.Component{constructor(e){super(e);p(this,"input");p(this,"inputRef");this.state={activeSuggestionIndex:-1,hasFocus:!1,shouldShowSuggestions:!0,setAriaActiveDescendant:!1,shouldBlur:!0,blurDelay:null},this.inputRef=t=>{this.input=t},this.onChange=this.onChange.bind(this),this.onBlur=this.onBlur.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onFocus=this.onFocus.bind(this),this.setValue=this.setValue.bind(this),this.setSuggestionIndex=this.setSuggestionIndex.bind(this),this.avoidBlur=this.avoidBlur.bind(this),this.clearBlurDelay=this.clearBlurDelay.bind(this),this.onSearchButtonClick=this.onSearchButtonClick.bind(this)}componentWillUnmount(){const{blurDelay:e}=this.state;e&&(clearTimeout(e),this.setState({blurDelay:null}))}onChange(e){const{onChange:t}=this.props;this.setState({activeSuggestionIndex:-1,shouldShowSuggestions:!0}),t(e)}onSearchButtonClick(e){const{onSearchButtonClick:t}=this.props;e.preventDefault(),t&&t()}onKeyDown(e){const{shouldShowSuggestions:t}=this.state;let{activeSuggestionIndex:n}=this.state;const{suggestions:o}=this.props,u=n>-1;switch(this.setState({setAriaActiveDescendant:e.keyCode===38||e.keyCode===40}),e.keyCode){case 9:u&&t&&this.setValue(o[n]);break;case 13:u&&t?(e.preventDefault(),this.setValue(o[n])):t&&o.length===1?this.setValue(o[0]):this.setState({shouldShowSuggestions:!1});break;case 27:t&&o.length>0&&(e.preventDefault(),this.setState({shouldShowSuggestions:!1}));break;case 38:t&&(e.preventDefault(),n=n-1===-2?-1:n-1,this.setState({activeSuggestionIndex:n}));break;case 40:t&&(e.preventDefault(),n=n+1===o.length?o.length-1:n+1,this.setState({activeSuggestionIndex:n}));break}}onFocus(){this.setState({hasFocus:!0,activeSuggestionIndex:-1})}onBlur(){const e=setTimeout(()=>{const{shouldBlur:n}=this.state;n&&this.setState({hasFocus:!1})},10);this.setState({blurDelay:e});const{onBlur:t}=this.props;t&&t()}setSuggestionIndex(e){this.setState({activeSuggestionIndex:e}),this.clearBlurDelay()}setValue(e){this.setState({shouldShowSuggestions:!1,activeSuggestionIndex:-1},()=>{this.inputRef.focus()}),this.clearBlurDelay();const{onSelect:t}=this.props;t(e)}avoidBlur(){this.setState({shouldBlur:!1})}clearBlurDelay(){const{blurDelay:e}=this.state;e&&(clearTimeout(e),this.setState({blurDelay:null})),this.setState({shouldBlur:!0})}render(){const{suggestions:e,id:t,ariaLabel:n,placeholder:o,value:u,name:x,shouldFocusOnMount:C,isLoading:D}=this.props,{activeSuggestionIndex:d,setAriaActiveDescendant:w,hasFocus:T,shouldShowSuggestions:I}=this.state,g=T&&I&&e.length>0,q=w&&d>-1?`${t}-item-${d}`:void 0;return i.jsxs("div",{className:`${h.autocomplete} autocomplete`,"aria-expanded":g,"aria-owns":`${t}-suggestions`,"aria-haspopup":"listbox",children:[i.jsx(S,{variant:"primary",id:t,name:x,"aria-label":n,"aria-autocomplete":"list","aria-controls":`${t}-suggestions`,"aria-activedescendant":q,placeholder:o,value:u,autoComplete:"off",onChange:this.onChange,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onFocus:this.onFocus,ref:l=>{this.inputRef=l},className:"typo-normal",autoFocus:C,label:n,hideLabel:!0,children:i.jsx(S.Button,{loading:D,onClick:this.onSearchButtonClick})}),i.jsx("ul",{id:`${t}-suggestions`,role:"listbox",className:g?h.autocomplete__suggestions:h["autocomplete__suggestions--hidden"],children:g&&e.map((l,m)=>i.jsx(k,{id:`${t}-item-${m}`,index:m,value:l,match:u,active:m===d,onClick:this.setValue,setSuggestionIndex:this.setSuggestionIndex,avoidBlur:this.avoidBlur},l.key))})]})}}B.__docgenInfo={description:"",methods:[{name:"onChange",docblock:null,modifiers:[],params:[{name:"value",optional:!1,type:{name:"string"}}],returns:null},{name:"onSearchButtonClick",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:{name:"ReactFormEvent",raw:"React.FormEvent<HTMLButtonElement>",elements:[{name:"HTMLButtonElement"}],alias:"React.FormEvent"}}],returns:null},{name:"onKeyDown",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:{name:"ReactKeyboardEvent",raw:"React.KeyboardEvent",alias:"React.KeyboardEvent"}}],returns:null},{name:"onFocus",docblock:null,modifiers:[],params:[],returns:null},{name:"onBlur",docblock:null,modifiers:[],params:[],returns:null},{name:"setSuggestionIndex",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:{name:"number"}}],returns:null},{name:"setValue",docblock:null,modifiers:[],params:[{name:"value",optional:!1,type:{name:"Suggestion",alias:"Suggestion"}}],returns:null},{name:"avoidBlur",docblock:null,modifiers:[],params:[],returns:null},{name:"clearBlurDelay",docblock:null,modifiers:[],params:[],returns:null}],displayName:"Autocomplete",props:{onSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: Suggestion) => void",signature:{arguments:[{type:{name:"Suggestion"},name:"value"}],return:{name:"void"}}},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},onBlur:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},placeholder:{required:!0,tsType:{name:"string"},description:""},suggestions:{required:!0,tsType:{name:"Array",elements:[{name:"Suggestion"}],raw:"Suggestion[]"},description:""},value:{required:!0,tsType:{name:"string"},description:""},ariaLabel:{required:!0,tsType:{name:"string"},description:""},id:{required:!0,tsType:{name:"string"},description:""},name:{required:!1,tsType:{name:"string"},description:""},shouldFocusOnMount:{required:!1,tsType:{name:"boolean"},description:""},isLoading:{required:!1,tsType:{name:"boolean"},description:""},onSearchButtonClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const{action:v}=__STORYBOOK_MODULE_ACTIONS__,N={component:B},c={args:{value:"Verdi",onChange:v("button-click"),ariaLabel:"ariaLabel",id:"autocompleteId",placeholder:"",suggestions:[{key:"testItem",value:"Test Item"}],onSelect:v("button-click")}};var y,f,b;c.parameters={...c.parameters,docs:{...(y=c.parameters)==null?void 0:y.docs,source:{originalSource:`{
  args: {
    value: 'Verdi',
    onChange: action('button-click'),
    ariaLabel: 'ariaLabel',
    id: 'autocompleteId',
    placeholder: '',
    suggestions: [{
      key: 'testItem',
      value: 'Test Item'
    }],
    onSelect: action('button-click')
  }
}`,...(b=(f=c.parameters)==null?void 0:f.docs)==null?void 0:b.source}}};const V=["Default"];export{c as Default,V as __namedExportsOrder,N as default};
