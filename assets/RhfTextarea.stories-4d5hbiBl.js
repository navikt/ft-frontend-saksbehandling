import{g as ee,a as te,r as re}from"./formUtils-BabEHBhI.js";import{r as h,b as ae,e as s,u as G,c as ne,j as A}from"./iframe-DzXUO6GT.js";import{u as se,a as oe}from"./index.esm-nh5QY85X.js";import{R as le}from"./ReadOnlyField-r78r3bkP.js";import{T as ie}from"./Tag-CK0q-o9t.js";import{B as J,L as de,E as ce}from"./Label-BptAkRyu.js";import{o as ue}from"./omit-B7stZg_p.js";import{u as me}from"./useId-BTmGetX7.js";import{P as fe}from"./index-C9-rAhI6.js";import{u as B}from"./useClientLayoutEffect-B9dXjG7B.js";import{d as K}from"./debounce-C1tMA4l2.js";import{c as pe}from"./composeEventHandlers-krbYd5LM.js";import{a as ge}from"./ReadOnlyIcon-BmYdC75R.js";import{u as ve}from"./useFormField-a1sx1jM8.js";import{a as he}from"./Loader-IncALmTQ.js";import"./VStack-vldtWtPo.js";import"./BasePrimitive-DGW3gu2x.js";import"./Button-af7718Cc.js";import"./preload-helper-PPVm8Dsz.js";import"./index.es-CkQmGgSL.js";import"./index.es-yTIDcLWJ.js";import"./dayjs.min-BFUBMDMt.js";import"./index-DfaBx6Pe.js";import"./PersonPencilFill-DyJneeHY.js";import"./useId-DZKQXQUP.js";import"./Alert-DFJmKH85.js";import"./ExclamationmarkTriangleFill-DDAH-o0u.js";import"./XMarkOctagonFill-CoZ8IwgD.js";import"./XMark-CpZNF069.js";import"./Tooltip-B3LKtxru.js";import"./floating-ui.react-ChwVIx_A.js";import"./Provider-CLScYENo.js";import"./useControllableState-DmC_MG6f.js";import"./Box-DL9bOJYF.js";import"./KeyVerticalFill-DFYvwClO.js";import"./index-Byb5gg4O.js";import"./ReadMore-BBeWwL2Z.js";import"./ChevronDown-DkSCMhYg.js";var ye=function(e,n){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(e);r<t.length;r++)n.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(e,t[r])&&(a[t[r]]=e[t[r]]);return a};const V=(e,n,a)=>{const{outerHeightStyle:t,overflow:r}=n;return a.current<20&&(t>0&&Math.abs((e.outerHeightStyle||0)-t)>1||e.overflow!==r)?(a.current+=1,n):e},q=e=>(e?.ownerDocument||document).defaultView||window;function C(e){return parseInt(e,10)||0}const be=h.forwardRef((e,n)=>{var a,t,{className:r,onChange:o,maxRows:f,minRows:d=1,autoScrollbar:R,style:l,value:b}=e,T=ye(e,["className","onChange","maxRows","minRows","autoScrollbar","style","value"]);const{current:M}=h.useRef(b!=null),c=h.useRef(null),y=ae(c,n),x=h.useRef(null),p=h.useRef(0),[L,N]=h.useState({outerHeightStyle:0}),w=s.useCallback(()=>{const m=c.current,g=q(m).getComputedStyle(m);if(g.width==="0px")return{outerHeightStyle:0};const v=x.current;v.style.width=g.width,v.value=m.value||T.placeholder||"x",v.value.slice(-1)===`
`&&(v.value+=" ");const _=g.boxSizing,u=C(g.paddingBottom)+C(g.paddingTop),F=C(g.borderBottomWidth)+C(g.borderTopWidth),j=v.scrollHeight-u;v.value="x";const z=v.scrollHeight-u;let O=j;d&&(O=Math.max(Number(d)*z,O)),f&&(O=Math.min(Number(f)*z,O)),O=Math.max(O,z);const X=O+(_==="border-box"?u+F:0),Y=Math.abs(O-j)<=1;return{outerHeightStyle:X,overflow:Y}},[f,d,T.placeholder]),i=()=>{const m=w();U(m)||N(S=>V(S,m,p))};B(()=>{const m=()=>{const u=w();U(u)||fe.flushSync(()=>{N(F=>V(F,u,p))})},S=K(()=>{var u,F,j;if(p.current=0,!((u=c.current)===null||u===void 0)&&u.style.height||!((F=c.current)===null||F===void 0)&&F.style.width){((j=c.current)===null||j===void 0?void 0:j.style.overflow)==="hidden"&&N(z=>Object.assign(Object.assign({},z),{overflow:!1}));return}m()},166,!0),g=c.current,v=q(g);v.addEventListener("resize",S);let _;return typeof ResizeObserver<"u"&&(_=new ResizeObserver(S),_.observe(g)),()=>{S.clear(),v.removeEventListener("resize",S),_&&_.disconnect()}},[w]),B(()=>{i()}),h.useEffect(()=>{p.current=0},[b]);const E=m=>{p.current=0,M||i(),o&&o(m)},k=Object.assign({"--__ac-textarea-height":L.outerHeightStyle+"px","--__axc-textarea-height":L.outerHeightStyle+"px",overflow:L.overflow&&!R&&!(!((a=c.current)===null||a===void 0)&&a.style.height)&&!(!((t=c.current)===null||t===void 0)&&t.style.width)?"hidden":void 0},l);return s.createElement(s.Fragment,null,s.createElement("textarea",Object.assign({value:b,onChange:E,ref:y,rows:d,style:k},T,{className:r})),s.createElement("textarea",{"aria-hidden":!0,className:r,readOnly:!0,ref:x,tabIndex:-1,style:Object.assign({visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"},l)}))});function U(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflow}const xe=({maxLengthId:e,maxLength:n,currentLength:a,size:t,i18n:r})=>{const{cn:o}=G(),f=he("Textarea",{charsLeft:r?.counterLeft?`{chars} ${r.counterLeft}`:void 0,charsTooMany:r?.counterTooMuch?`{chars} ${r.counterTooMuch}`:void 0}),d=n-a,[R,l]=h.useState(d);return h.useEffect(()=>{const b=K(()=>{l(d)},2e3);return b(),()=>{b.clear()}},[d]),s.createElement(s.Fragment,null,s.createElement("span",{id:e,className:o("navds-sr-only")},f("maxLength",{maxLength:n})),d<20&&s.createElement("span",{role:"status",className:o("navds-textarea__sr-counter navds-sr-only")},$(R,f)),s.createElement(J,{className:o("navds-textarea__counter",{"navds-textarea__counter--error":d<0}),size:t},$(d,f)))},$=(e,n)=>e<0?n("charsTooMany",{chars:Math.abs(e)}):n("charsLeft",{chars:e});var we=function(e,n){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(e);r<t.length;r++)n.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(e,t[r])&&(a[t[r]]=e[t[r]]);return a};const Se=h.forwardRef((e,n)=>{var a,t,r;const{inputProps:o,errorId:f,showErrorMsg:d,hasError:R,size:l,inputDescriptionId:b}=ve(e,"textarea"),{label:T,className:M,description:c,maxLength:y,hideLabel:x=!1,resize:p,UNSAFE_autoScrollbar:L,i18n:N,readOnly:w}=e,i=we(e,["label","className","description","maxLength","hideLabel","resize","UNSAFE_autoScrollbar","i18n","readOnly"]),{cn:E}=G(),k=me(),m=y!==void 0&&y>0,[S,g]=h.useState((a=e?.defaultValue)!==null&&a!==void 0?a:""),v=()=>{let u=i?.minRows?i?.minRows:3;return l==="small"&&(u=i?.minRows?i?.minRows:2),u},_=ne(o["aria-describedby"],{[k??""]:m});return s.createElement("div",{className:E(M,"navds-form-field",`navds-form-field--${l}`,{"navds-form-field--disabled":!!o.disabled,"navds-form-field--readonly":w,"navds-textarea--readonly":w,"navds-textarea--error":R,"navds-textarea--autoscrollbar":L,[`navds-textarea--resize-${p===!0?"both":p}`]:p})},s.createElement(de,{htmlFor:o.id,size:l,className:E("navds-form-field__label",{"navds-sr-only":x})},w&&s.createElement(ge,null),T),!!c&&s.createElement(J,{className:E("navds-form-field__description",{"navds-sr-only":x}),id:b,size:l,as:"div"},c),s.createElement(be,Object.assign({},ue(i,["error","errorId","size"]),o,{onChange:pe(e.onChange,e.value===void 0?u=>g(u.target.value):void 0),minRows:v(),autoScrollbar:L,ref:n,readOnly:w,className:E("navds-textarea__input","navds-body-short",`navds-body-short--${l??"medium"}`)},_?{"aria-describedby":_}:{})),m&&!w&&!o.disabled&&s.createElement(xe,{maxLengthId:k,maxLength:y,currentLength:(r=(t=e.value)===null||t===void 0?void 0:t.length)!==null&&r!==void 0?r:S.length,size:l,i18n:N}),s.createElement("div",{className:E("navds-form-field__error"),id:f,"aria-relevant":"additions removals","aria-live":"polite"},d&&s.createElement(ce,{size:l,showIcon:!0},e.error)))}),_e="_textAreaFieldWithBadges_bdz0b_1",Te="_etikettWrapper_bdz0b_4",Z={textAreaFieldWithBadges:_e,etikettWrapper:Te},Q=({name:e,control:n,label:a,readOnly:t,maxLength:r,badges:o,validate:f=[],parse:d=c=>c,className:R,description:l,isEdited:b,size:T="small",...M})=>{const{formState:{errors:c}}=se(),{field:y}=oe({name:e,control:n,rules:{validate:h.useMemo(()=>ee(f),[f])}});return t?A.jsx(le,{size:T,label:a,value:y.value,type:"textarea",isEdited:b,hideLabel:M.hideLabel}):A.jsxs("div",{className:o?Z.textAreaFieldWithBadges:null,children:[o&&A.jsx("div",{className:Z.etikettWrapper,children:o.map(({type:x,titleText:p})=>A.jsx(ie,{variant:x,size:"small",children:p},p))}),A.jsx(Se,{size:T,label:a,description:l,className:R,autoComplete:"off",...y,onChange:x=>y.onChange(x.currentTarget.value!==""?d(x.currentTarget.value):null),value:y.value?y.value:"",error:te(c,e),maxLength:r,...M})]})};Q.__docgenInfo={description:"",methods:[],displayName:"RhfTextarea",props:{label:{required:!0,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},readOnly:{required:!1,tsType:{name:"boolean"},description:""},size:{required:!1,tsType:{name:"union",raw:"'small' | 'medium'",elements:[{name:"literal",value:"'small'"},{name:"literal",value:"'medium'"}]},description:"",defaultValue:{value:"'small'",computed:!1}},description:{required:!1,tsType:{name:"string"},description:""},maxLength:{required:!1,tsType:{name:"number"},description:""},badges:{required:!1,tsType:{name:"Array",elements:[{name:"Badges"}],raw:"Badges[]"},description:""},validate:{required:!1,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"((value: string) => ValidationReturnType)[]"},description:"",defaultValue:{value:"[]",computed:!1}},parse:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string | number) => string | number",signature:{arguments:[{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"value"}],return:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]}}},description:"",defaultValue:{value:"value => value",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},isEdited:{required:!1,tsType:{name:"boolean"},description:""},control:{required:!0,tsType:{name:"UseControllerProps['control']",raw:"UseControllerProps<T>['control']"},description:""}}};const dt={component:Q,tags:["autodocs"],decorators:re({testTextAreaFieldPre:`Ein tekst med linjeskift.
Neste linje, så to linjeskift.

Så tre linjeskift.


Siste linje`}),args:{control:void 0}},D={args:{label:"Dette er et tekstfelt",name:"testTextAreaField"}},H={args:{label:"Dette er et tekstfelt der verdi er valgt",name:"testTextAreaFieldPre"}},P={args:{label:"Dette er et tekstfelt som er readonly",name:"testTextAreaFieldPre",readOnly:!0}},W={args:{label:"Dette er et tekstfelt med maks lengde",name:"testTextAreaField",maxLength:50}},I={args:{label:"Dette er et tekstfelt med badge",name:"testTextAreaField",badges:[{type:"warning",titleText:"Dette er en test"}]}};D.parameters={...D.parameters,docs:{...D.parameters?.docs,source:{originalSource:`{
  args: {
    label: 'Dette er et tekstfelt',
    name: 'testTextAreaField'
  }
}`,...D.parameters?.docs?.source}}};H.parameters={...H.parameters,docs:{...H.parameters?.docs,source:{originalSource:`{
  args: {
    label: 'Dette er et tekstfelt der verdi er valgt',
    name: 'testTextAreaFieldPre'
  }
}`,...H.parameters?.docs?.source}}};P.parameters={...P.parameters,docs:{...P.parameters?.docs,source:{originalSource:`{
  args: {
    label: 'Dette er et tekstfelt som er readonly',
    name: 'testTextAreaFieldPre',
    readOnly: true
  }
}`,...P.parameters?.docs?.source}}};W.parameters={...W.parameters,docs:{...W.parameters?.docs,source:{originalSource:`{
  args: {
    label: 'Dette er et tekstfelt med maks lengde',
    name: 'testTextAreaField',
    maxLength: 50
  }
}`,...W.parameters?.docs?.source}}};I.parameters={...I.parameters,docs:{...I.parameters?.docs,source:{originalSource:`{
  args: {
    label: 'Dette er et tekstfelt med badge',
    name: 'testTextAreaField',
    badges: [{
      type: 'warning',
      titleText: 'Dette er en test'
    }]
  }
}`,...I.parameters?.docs?.source}}};const ct=["Default","MedVerdi","ReadOnly","MedMaxLength","MedMBadge"];export{D as Default,I as MedMBadge,W as MedMaxLength,H as MedVerdi,P as ReadOnly,ct as __namedExportsOrder,dt as default};
