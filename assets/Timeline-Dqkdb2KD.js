import{r as i,R as d}from"./index-B5OHeJSP.js";import{u as k}from"./useId-B9OmVTHV.js";import{D as ce,a as ze}from"./Label-ZYbyet41.js";import{a as z,u as Ye}from"./Loader-CoAqN6Lw.js";import{t as _,d as He,o as ue,L as Be,M as V,N as K,O as fe,x as me,e as I,s as Ze,P as J,k as Ve,Q as Ke,R as Ue,S as U}from"./useDateTranslationContext-DuYWebvA.js";import{a as pe,i as be,o as he,f as ge,g as ve,h as ye,c as we,s as Oe,d as _e,e as xe,k as Ee,b as je,F as Pe}from"./floating-ui.react-FIE1On8Y.js";import{u as Re}from"./Theme-6IdwQf2V.js";import{u as Ie}from"./create-context-BlrHNsQj.js";import{c as $}from"./clsx-B-dksMZM.js";import{o as G}from"./omit-B7stZg_p.js";import"./useId-e75EoDiw.js";var Xe=function(e,r){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,t=Object.getOwnPropertySymbols(e);l<t.length;l++)r.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(e,t[l])&&(n[t[l]]=e[t[l]]);return n};const Yt=i.forwardRef((e,r)=>{var{title:n,titleId:t}=e,l=Xe(e,["title","titleId"]);let a=k();return a=n?t||"title-"+a:void 0,i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:r,"aria-labelledby":a},l),n?i.createElement("title",{id:a},n):null,i.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3.75 12a8.25 8.25 0 1 1 16.5 0 8.25 8.25 0 0 1-16.5 0M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25m4.573 7.234a.75.75 0 1 0-1.146-.968l-4.973 5.877L8.03 11.97a.75.75 0 0 0-1.06 1.06l3 3a.75.75 0 0 0 1.102-.046z",clipRule:"evenodd"}))});var Qe=function(e,r){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,t=Object.getOwnPropertySymbols(e);l<t.length;l++)r.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(e,t[l])&&(n[t[l]]=e[t[l]]);return n};const Ht=i.forwardRef((e,r)=>{var{title:n,titleId:t}=e,l=Qe(e,["title","titleId"]);let a=k();return a=n?t||"title-"+a:void 0,i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:r,"aria-labelledby":a},l),n?i.createElement("title",{id:a},n):null,i.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 2.25a.75.75 0 0 1 .656.387l9.527 17.25A.75.75 0 0 1 21.526 21H2.474a.75.75 0 0 1-.657-1.113l9.527-17.25A.75.75 0 0 1 12 2.25m8.255 17.25L12 4.551 3.745 19.5zM12 8.75a.75.75 0 0 1 .75.75v4a.75.75 0 0 1-1.5 0v-4a.75.75 0 0 1 .75-.75m0 6.75a1 1 0 1 0 0 2 1 1 0 0 0 0-2",clipRule:"evenodd"}))});var We=function(e,r){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,t=Object.getOwnPropertySymbols(e);l<t.length;l++)r.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(e,t[l])&&(n[t[l]]=e[t[l]]);return n};const Bt=i.forwardRef((e,r)=>{var{title:n,titleId:t}=e,l=We(e,["title","titleId"]);let a=k();return a=n?t||"title-"+a:void 0,i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:r,"aria-labelledby":a},l),n?i.createElement("title",{id:a},n):null,i.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12.55 3.75a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5M9.8 5a2.75 2.75 0 1 1 5.5 0 2.75 2.75 0 0 1-5.5 0m3.5 4a.75.75 0 0 1 .75-.75h2a.75.75 0 0 1 .75.75v7.106a.75.75 0 0 1-.75.75H14.8V21a.75.75 0 0 1-1.5 0v-4.894a.75.75 0 0 1 .75-.75h1.25V9.75h-1.25A.75.75 0 0 1 13.3 9m-2.78.916a.25.25 0 0 1 .235-.166h.295a.75.75 0 0 0 0-1.5h-.295c-.74 0-1.4.465-1.648 1.161l-2.263 6.337a.75.75 0 0 0 .706 1.002h2.75V21a.75.75 0 0 0 1.5 0v-5a.75.75 0 0 0-.75-.75H8.614z",clipRule:"evenodd"}))});var qe=function(e,r){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,t=Object.getOwnPropertySymbols(e);l<t.length;l++)r.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(e,t[l])&&(n[t[l]]=e[t[l]]);return n};const Zt=i.forwardRef((e,r)=>{var{title:n,titleId:t}=e,l=qe(e,["title","titleId"]);let a=k();return a=n?t||"title-"+a:void 0,i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:r,"aria-labelledby":a},l),n?i.createElement("title",{id:a},n):null,i.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.75 12a.75.75 0 0 1 .75-.75h13a.75.75 0 1 1 0 1.5h-13a.75.75 0 0 1-.75-.75",clipRule:"evenodd"}))});var Ge=function(e,r){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,t=Object.getOwnPropertySymbols(e);l<t.length;l++)r.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(e,t[l])&&(n[t[l]]=e[t[l]]);return n};const Vt=i.forwardRef((e,r)=>{var{title:n,titleId:t}=e,l=Ge(e,["title","titleId"]);let a=k();return a=n?t||"title-"+a:void 0,i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:r,"aria-labelledby":a},l),n?i.createElement("title",{id:a},n):null,i.createElement("path",{fill:"currentColor",d:"M12.75 5.5a.75.75 0 0 0-1.5 0v5.75H5.5a.75.75 0 0 0 0 1.5h5.75v5.75a.75.75 0 0 0 1.5 0v-5.75h5.75a.75.75 0 0 0 0-1.5h-5.75z"}))});var Je=function(e,r){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,t=Object.getOwnPropertySymbols(e);l<t.length;l++)r.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(e,t[l])&&(n[t[l]]=e[t[l]]);return n};const Kt=i.forwardRef((e,r)=>{var{title:n,titleId:t}=e,l=Je(e,["title","titleId"]);let a=k();return a=n?t||"title-"+a:void 0,i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:r,"aria-labelledby":a},l),n?i.createElement("title",{id:a},n):null,i.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.272 2.25a.75.75 0 0 0-.53.22L2.47 7.742a.75.75 0 0 0-.22.53v7.456c0 .199.079.39.22.53l5.272 5.272c.14.141.331.22.53.22h7.456a.75.75 0 0 0 .53-.22l5.272-5.272a.75.75 0 0 0 .22-.53V8.272a.75.75 0 0 0-.22-.53L16.258 2.47a.75.75 0 0 0-.53-.22zM3.75 8.583 8.583 3.75h6.834l4.833 4.833v6.834l-4.833 4.833H8.583L3.75 15.417zm5.28-.613a.75.75 0 0 0-1.06 1.06L10.94 12l-2.97 2.97a.75.75 0 1 0 1.06 1.06L12 13.06l2.97 2.97a.75.75 0 1 0 1.06-1.06L13.06 12l2.97-2.97a.75.75 0 0 0-1.06-1.06L12 10.94z",clipRule:"evenodd"}))});function H(e,r){const n=_(e),t=_(r),l=n.getTime()-t.getTime();return l<0?-1:l>0?1:l}function et(e,r){const n=_(e),t=_(r);return n.getFullYear()-t.getFullYear()}function Se(e,r){const n=_(e),t=_(r),l=oe(n,t),a=Math.abs(He(n,t));n.setDate(n.getDate()-l*a);const c=+(oe(n,t)===-l),o=l*(a-c);return o===0?0:o}function oe(e,r){const n=e.getFullYear()-r.getFullYear()||e.getMonth()-r.getMonth()||e.getDate()-r.getDate()||e.getHours()-r.getHours()||e.getMinutes()-r.getMinutes()||e.getSeconds()-r.getSeconds()||e.getMilliseconds()-r.getMilliseconds();return n<0?-1:n>0?1:n}function se(e,r){return+_(e)-+_(r)}function X(e){const r=_(e);return r.setHours(23,59,59,999),r}function tt(e){const r=_(e);return+X(r)==+ue(r)}function nt(e,r){const n=_(e),t=_(r),l=H(n,t),a=Math.abs(Be(n,t));let c;if(a<1)c=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-l*a);let o=H(n,t)===-l;tt(_(e))&&a===1&&H(e,t)===1&&(o=!1),c=l*(a-Number(o))}return c===0?0:c}function lt(e,r){const n=_(e),t=_(r),l=H(n,t),a=Math.abs(et(n,t));n.setFullYear(1584),t.setFullYear(1584);const c=H(n,t)===-l,o=l*(a-+c);return o===0?0:o}function rt(e){const r=_(e),n=r.getFullYear();return r.setFullYear(n+1,0,0),r.setHours(23,59,59,999),r}function at(e,r){return V(e,-r)}const Ut=()=>d.createElement("span",{className:"navds-stack__spacer"}),Ce=i.createContext({startDate:new Date,endDate:new Date,direction:"left",setStart:()=>null,setEndInclusive:()=>null,activeRow:0,setActiveRow:()=>null,initiate:()=>null,addFocusable:()=>null}),B=()=>{const e=i.useContext(Ce);return e||console.warn("useTimelineContext must be used with TimelineContext (<Timeline />)"),e},ot=({horizontalPosition:e})=>e<=98&&e>=0,ie=(e,r)=>Se(e,r)<=1,st=({horizontalPosition:e,width:r})=>e>=0&&e<=100&&r>0,ee=(e,r,n)=>{const t=se(n,r);return se(e,r)/t*100},Q=(e,r,n,t)=>{const l=ee(e,n,t),a=ee(r,n,t)-l;return{horizontalPosition:l,width:a}},it=(e,r,n,t,l,a)=>{const c=Math.ceil(n/10),o=K(r);return new Array(n).fill(o).map((m,p)=>{if(p%c!==0)return null;const f=fe(m,p),{horizontalPosition:g,width:b}=Q(f,me(f,1),e,r);return{direction:t,horizontalPosition:g,label:I(f,l,{locale:a}),date:f,width:b}}).filter(m=>m!==null)},dt=(e,r,n,t,l)=>{const a=Ze(e),c=ue(r),o=nt(c,a)+1;return new Array(o).fill(a).map((m,p)=>{const f=J(m,p),{horizontalPosition:g,width:b}=Q(f,J(f,1),e,r);return{direction:n,horizontalPosition:g,label:I(f,t,{locale:l}),date:f,width:b}})},ct=(e,r,n,t,l)=>{const a=Ve(e),c=rt(r),o=lt(c,e)+1;return new Array(o).fill(a).map((m,p)=>{const f=V(m,p),{horizontalPosition:g,width:b}=Q(f,V(f,1),e,r);return{direction:n,horizontalPosition:g,label:I(f,t,{locale:l}),date:f,width:b}})},ut=(e,r,n,t,l)=>{const a=Se(r,e);if(a<40){const o=l("dayFormat");return it(e,r,a,n,o,t)}if(a<370){const o=l("monthFormat");return dt(e,r,n,o,t)}const c=l("yearFormat");return ct(e,r,n,c,t)},ft=({templates:e})=>{const{endDate:r,startDate:n,direction:t}=B(),l=z("Timeline",{dayFormat:e==null?void 0:e.day,monthFormat:e==null?void 0:e.month,yearFormat:e==null?void 0:e.year}),a=Ye(),c=ut(n,r,t,a,l);return d.createElement("div",{className:"navds-timeline__axislabels","aria-hidden":"true"},c.filter(ot).map(o=>d.createElement(ce,{className:"navds-timeline__axislabels-label",as:"div",key:o.label,style:{justifyContent:t==="left"?"flex-start":"flex-end",[t]:`${o.horizontalPosition}%`,width:`${o.width}%`}},o.label)))};var mt=function(e,r){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,t=Object.getOwnPropertySymbols(e);l<t.length;l++)r.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(e,t[l])&&(n[t[l]]=e[t[l]]);return n};const De=i.forwardRef((e,r)=>{var{date:n,children:t}=e,l=mt(e,["date","children"]);const{startDate:a,endDate:c,direction:o}=B(),[m,p]=i.useState(!1),f=i.useRef(null),g=z("Timeline"),O=!Re(!1),{context:y,placement:u,middlewareData:{arrow:{x:w,y:v}={}},refs:P,floatingStyles:M}=pe({placement:"top",open:m,onOpenChange:h=>p(h),whileElementsMounted:be,middleware:[he(O?16:8),ge(),ve({padding:5,fallbackPlacements:["bottom","top"]}),ye({element:f,padding:5})]}),F=we(y,{handleClose:Oe(),restMs:25,delay:{open:1e3},move:!1}),T=_e(y),Z=xe(y),S=Ee(y,{role:"dialog"}),{getFloatingProps:C,getReferenceProps:L}=je([F,T,Z,S]),N=Ie(P.setReference,r),s={top:"bottom",right:"left",bottom:"top",left:"right"}[u.split("-")[0]];return d.createElement(d.Fragment,null,d.createElement("div",{className:"navds-timeline__pin-wrapper",style:{[o]:`${ee(n,a,c)}%`}},d.createElement("button",Object.assign({},l,{ref:N,className:"navds-timeline__pin-button","aria-label":g("Pin.pin",{date:I(n,g("dateFormat"))}),type:"button","aria-expanded":t?m:void 0},L({onKeyDown:h=>{var x;(x=l==null?void 0:l.onKeyDown)===null||x===void 0||x.call(l,h),h.key==="Enter"?p(D=>!D):h.key===" "&&p(!1)}})))),t&&m&&d.createElement(Pe,{context:y,modal:!1,initialFocus:-1,returnFocus:!1},d.createElement("div",Object.assign({className:"navds-timeline__popover","data-placement":u,ref:P.setFloating},C(),{tabIndex:void 0,style:M}),t,O&&d.createElement("div",{ref:f,style:Object.assign(Object.assign(Object.assign({},w!=null?{left:w}:{}),v!=null?{top:v}:{}),s?{[s]:"-0.5rem"}:{}),className:"navds-timeline__popover-arrow"}))))});De.componentType="pin";const Fe=i.createContext({periodId:"",firstFocus:!1}),Me=()=>{const e=i.useContext(Fe);return e||console.warn("usePeriodContext must be used with PeriodContext"),e},Te=i.createContext({periods:[],id:"",active:!1,index:0}),te=()=>{const e=i.useContext(Te);return e||console.warn("useRowContext must be used with RowContext"),e},Ae=(e,r,n)=>$(`navds-timeline__period navds-timeline__period--${n}`,{"navds-timeline__period--connected-both":e==="both","navds-timeline__period--connected-right":e==="right"&&r==="left"||e==="left"&&r==="right","navds-timeline__period--connected-left":e==="left"&&r==="left"||e==="right"&&r==="right"}),Le=(e,r,n,t,l)=>{const a=l("dateFormat"),c=I(e,a),o=I(r,a);return l("Period.period",{status:t||l(`Period.${n}`),start:c,end:o})},pt=d.memo(({onSelectPeriod:e,start:r,end:n,status:t,cropped:l,direction:a,left:c,width:o,icon:m,children:p,isActive:f,statusLabel:g,restProps:b,periodRef:O})=>{const[y,u]=i.useState(!1),{index:w}=te(),{firstFocus:v}=Me(),{initiate:P,addFocusable:M}=B(),F=i.useRef(null),T=z("Timeline"),S=!Re(!1),{context:C,placement:L,middlewareData:{arrow:{x:N,y:s}={}},refs:h,floatingStyles:x}=pe({placement:"top",open:y,onOpenChange:j=>u(j),whileElementsMounted:be,middleware:[he(S?16:8),ge(),ve({padding:5,fallbackPlacements:["bottom","top"]}),ye({element:F,padding:5})]}),D=we(C,{handleClose:Oe(),restMs:25,delay:{open:1e3},move:!1}),Y=_e(C),E=xe(C),q=Ee(C,{role:"dialog"}),{getFloatingProps:R,getReferenceProps:Ne}=je([D,Y,E,q]),$e=Ie(h.setReference,O),ae={top:"bottom",right:"left",bottom:"top",left:"right"}[L.split("-")[0]];return d.createElement(d.Fragment,null,d.createElement("button",Object.assign({},b,{type:"button",ref:j=>{v&&M(j,w),$e(j)},"aria-label":Le(r,n,t,g,T),className:$("navds-timeline__period--clickable",Ae(l,a,t),b==null?void 0:b.className,{"navds-timeline__period--selected":f}),"aria-expanded":p?y:void 0,"aria-current":f||void 0},Ne({onFocus:()=>{P(w)},onKeyDown:j=>{var A;(A=b==null?void 0:b.onKeydown)===null||A===void 0||A.call(b,j),j.key==="Enter"&&u(ke=>!ke),j.key===" "&&(e==null||e(j),u(!1))},style:{width:`${o}%`,[a]:`${c}%`},onClick:j=>{var A;(A=b==null?void 0:b.onClick)===null||A===void 0||A.call(b,j),j.detail!==0&&(e==null||e(j))}})),d.createElement("span",{className:"navds-timeline__period--inner"},m)),p&&y&&d.createElement(Pe,{context:C,modal:!1,initialFocus:-1,returnFocus:!1},d.createElement("div",Object.assign({className:"navds-timeline__popover","data-placement":L,ref:h.setFloating},R(),{style:x}),p,S&&d.createElement("div",{ref:F,style:Object.assign(Object.assign(Object.assign({},N!=null?{left:N}:{}),s!=null?{top:s}:{}),ae?{[ae]:"-0.5rem"}:{}),className:"navds-timeline__popover-arrow"}))))}),bt=({start:e,end:r,status:n,cropped:t,direction:l,left:a,width:c,icon:o,statusLabel:m,restProps:p,periodRef:f})=>{const g=z("Timeline");return d.createElement("div",Object.assign({ref:f},p,{className:$(Ae(t,l,n),p==null?void 0:p.className),style:{width:`${c}%`,[l]:`${a}%`}}),d.createElement("span",{className:"navds-timeline__period--inner"},o,d.createElement("span",{className:"sr-only"},Le(e,r,n,m,g))))},ne=i.forwardRef(({icon:e},r)=>{const{periods:n}=te(),{periodId:t,restProps:l}=Me(),a=n.find(v=>v.id===t);if(!a)return d.createElement(d.Fragment,null);const{start:c,endInclusive:o,width:m,horizontalPosition:p,status:f="neutral",onSelectPeriod:g,cropped:b,direction:O,children:y,isActive:u,statusLabel:w}=a;return g||y?d.createElement(pt,{periodRef:r,start:c,end:o,status:f,onSelectPeriod:g,cropped:b||"",direction:O,width:m,left:p,icon:e,isActive:u,statusLabel:w,restProps:l},y):d.createElement(bt,{periodRef:r,start:c,end:o,status:f,cropped:b||"",direction:O,width:m,left:p,icon:e,statusLabel:w,restProps:l})});ne.componentType="period";var ht=function(e,r){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,t=Object.getOwnPropertySymbols(e);l<t.length;l++)r.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(e,t[l])&&(n[t[l]]=e[t[l]]);return n};const le=i.forwardRef((e,r)=>{var{label:n,className:t,headingTag:l="h3",icon:a}=e,c=ht(e,["label","className","headingTag","icon"]);const{periods:o,id:m,active:p}=te(),{setActiveRow:f}=B(),g=z("Timeline"),b=o.reduce((u,w)=>u.end>w.end?u:w,{}),O=o.reduce((u,w)=>u.end<w.end?u:w,{}),y=o.find(u=>!!u.children||!!u.onSelectPeriod);return d.createElement(d.Fragment,null,n&&d.createElement(ze,{as:l,id:`timeline-row-${m}`,className:"navds-timeline__row-label",size:"small"},a,n),d.createElement("div",{className:$("navds-timeline__row",{"navds-timeline__row--active":p})},d.createElement("ol",Object.assign({},c,{tabIndex:-1,ref:r,"aria-label":o.length===0?g("Row.noPeriods"):g("Row.period",{start:I(O.start,g("dateFormat")),end:I(b.end,g("dateFormat"))}),className:$("navds-timeline__row-periods",t),onKeyDown:u=>{(u.key==="ArrowDown"||u.key==="ArrowUp")&&(u.preventDefault(),f(u.key))}}),o==null?void 0:o.map(u=>d.createElement("li",{key:`period-${u.id}`},d.createElement(Fe.Provider,{value:{periodId:u.id,firstFocus:(y==null?void 0:y.id)===u.id,restProps:u==null?void 0:u.restProps}},d.createElement(ne,{start:u.start,end:u.endInclusive,icon:u.icon,ref:u==null?void 0:u.ref})))))))});le.componentType="row";const gt=(e,r)=>e.horizontalPosition-r.horizontalPosition,vt=(e,r,n,t="left",l,a,c)=>{const o=e.start,m=e.end,p=l<a.length-1&&!Ke(a[l+1].start,m),{horizontalPosition:f,width:g}=Q(K(o),X(p?K(fe(a[l+1].start,1)):m),r,n);return{id:`r-${c}-p-${l}`,start:o,endInclusive:m,horizontalPosition:f,direction:t,width:g,end:m,status:e.status,onSelectPeriod:e.onSelectPeriod,icon:e.icon,children:e.children,isActive:e.isActive,statusLabel:e.statusLabel}},yt=(e,r,n)=>{const t=r>0&&ie(e.start,n[r-1].endInclusive),l=r<n.length-1&&ie(n[r+1].start,e.endInclusive);return t&&l?Object.assign(Object.assign({},e),{cropped:"both"}):t?Object.assign(Object.assign({},e),{cropped:"left"}):l?Object.assign(Object.assign({},e),{cropped:"right"}):e},wt=e=>{let{horizontalPosition:r,width:n,cropped:t}=e;return r+n>100&&(n=100-r,t=t==="left"||t==="both"?"both":"right"),r<0&&r+n>0&&(n=r+n,r=0,t=t==="right"||t==="both"?"both":"left"),Object.assign(Object.assign({},e),{width:n,horizontalPosition:r,cropped:t})},Ot=(e,r,n,t)=>i.useMemo(()=>e.map((l,a)=>{const c=l.periods.sort((o,m)=>o.start.valueOf()-m.start.valueOf()).map((o,m)=>Object.assign(Object.assign({},vt(o,r,n,t,m,l.periods,a)),{restProps:o==null?void 0:o.restProps,ref:o==null?void 0:o.ref})).sort(gt).map(yt).map(wt).filter(st);return{id:`tl-row-${a}`,label:l.label,headingTag:l.headingTag||"h3",icon:l.icon,periods:t==="left"?c:c.reverse(),restProps:l==null?void 0:l.restProps,ref:l==null?void 0:l.ref}}),[e,r,n,t]),_t=({startDate:e,rows:r})=>i.useMemo(()=>{if(e)return e;const n=r.flat().filter(l=>l.start).map(l=>l.start);return n.length===0?new Date:n.reduce((l,a)=>a<l?a:l)},[e,r]),xt=(e,r)=>r.end>e?r.end:e,Et=e=>e.flat().reduce(xt,new Date(0)),de=({endDate:e,rows:r})=>i.useMemo(()=>e||me(Et(r),1),[e,r]),jt=e=>{const r=[];return e==null||e.forEach(n=>{var t,l,a,c,o,m,p,f,g,b,O,y;const u=[];if(d.isValidElement(n)&&(!((t=n==null?void 0:n.props)===null||t===void 0)&&t.children)){if(Array.isArray(n.props.children))for(let w=0;w<n.props.children.length;w++){const v=n.props.children[w];u.push({start:(l=v==null?void 0:v.props)===null||l===void 0?void 0:l.start,end:(a=v==null?void 0:v.props)===null||a===void 0?void 0:a.end,status:((c=v==null?void 0:v.props)===null||c===void 0?void 0:c.status)||"neutral",onSelectPeriod:(o=v.props)===null||o===void 0?void 0:o.onSelectPeriod,label:n.props.label,icon:v.props.icon,children:v.props.children,isActive:v.props.isActive,statusLabel:v.props.statusLabel,restProps:G(v.props,["start","end","status","onSelectPeriod","label","icon","children","isActive","statusLabel"]),ref:v==null?void 0:v.ref})}else u.push({start:n.props.children.props.start,end:n.props.children.props.end,status:((m=n.props.children.props)===null||m===void 0?void 0:m.status)||"neutral",onSelectPeriod:(p=n.props.children.props)===null||p===void 0?void 0:p.onSelectPeriod,label:n.props.label,icon:(f=n.props.children.props)===null||f===void 0?void 0:f.icon,children:(g=n.props.children.props)===null||g===void 0?void 0:g.children,statusLabel:(b=n.props.children.props)===null||b===void 0?void 0:b.statusLabel,restProps:G(n.props.children.props,["start","end","status","onSelectPeriod","label","icon","children","isActive","statusLabel"]),ref:(y=(O=n.props)===null||O===void 0?void 0:O.children)===null||y===void 0?void 0:y.ref});r.push({label:n.props.label,icon:n.props.icon,headingTag:n.props.headingTag,periods:u,restProps:G(n.props,["label","icon","headingTag"]),ref:n==null?void 0:n.ref})}}),r};var Pt=function(e,r){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,t=Object.getOwnPropertySymbols(e);l<t.length;l++)r.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(e,t[l])&&(n[t[l]]=e[t[l]]);return n};const Rt=i.forwardRef((e,r)=>{var{label:n,interval:t,count:l}=e,a=Pt(e,["label","interval","count"]);const{setStart:c,endDate:o,startDate:m,direction:p}=B(),f=z("Timeline"),g=f("dateFormat");let b;t==="month"?b=p==="left"?Ue(o,l):J(m,l):b=p==="left"?at(o,l):V(m,l);const O=p==="left"?U(m,b):U(o,b);return d.createElement(ce,{as:"li"},d.createElement("button",Object.assign({type:"button","aria-label":O?f("Zoom.reset"):f("Zoom.zoom",{start:I(b,g),end:I(o,g)}),ref:r},a,{className:"navds-timeline__zoom-button",onClick:()=>{c(b)},"aria-pressed":O}),n))});var It=function(e,r){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,t=Object.getOwnPropertySymbols(e);l<t.length;l++)r.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(e,t[l])&&(n[t[l]]=e[t[l]]);return n};const re=i.forwardRef((e,r)=>{var{className:n,children:t}=e,l=It(e,["className","children"]);return d.createElement("ul",Object.assign({ref:r,className:$(n,"navds-timeline__zoom")},l),t)});re.Button=Rt;re.componentType="zoom";var St=function(e,r){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,t=Object.getOwnPropertySymbols(e);l<t.length;l++)r.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(e,t[l])&&(n[t[l]]=e[t[l]]);return n};const W=i.forwardRef((e,r)=>{var{children:n,startDate:t,endDate:l,direction:a="left",axisLabelTemplates:c}=e,o=St(e,["children","startDate","endDate","direction","axisLabelTemplates"]);const m=Array.isArray(n),p=i.useRef([]);m||(n=[n]);const f=d.Children.toArray(n).filter(s=>{var h;return((h=s==null?void 0:s.type)===null||h===void 0?void 0:h.componentType)==="row"}),g=d.Children.toArray(n).filter(s=>{var h;return((h=s==null?void 0:s.type)===null||h===void 0?void 0:h.componentType)==="pin"}).map(s=>()=>s),b=d.Children.toArray(n).find(s=>{var h;return((h=s==null?void 0:s.type)===null||h===void 0?void 0:h.componentType)==="zoom"}),O=i.useMemo(()=>jt(f),[f]),y=O.map(s=>s!=null&&s.periods?s.periods:[]),u=K(_t({startDate:t,rows:y})),[w,v]=i.useState(u),[P,M]=i.useState(null),[F,T]=i.useState(X(de({endDate:l,rows:y}))),Z=X(de({endDate:l,rows:y})),S=Ot(O,t??w,l??F,a),C=s=>{if(!(t||l))if(a==="left"){if(U(s,w)){v(u);return}v(s)}else{if(U(s,F)){T(Z);return}T(s)}},L=s=>{var h,x,D,Y;if(P!==null&&s==="ArrowDown"){for(let E=P+1;E<S.length;E++)if(S[E].periods.find(R=>!!R.children||!!R.onSelectPeriod)){M(E),(x=(h=p.current.find(R=>R.id===E))===null||h===void 0?void 0:h.ref)===null||x===void 0||x.focus();break}return}if(P!==null&&s==="ArrowUp"){for(let E=P-1;E>=0;E--)if(S[E].periods.find(R=>!!R.children||!!R.onSelectPeriod)){M(E),(Y=(D=p.current.find(R=>R.id===E))===null||D===void 0?void 0:D.ref)===null||Y===void 0||Y.focus();break}return}},N=(s,h)=>{let x=p.current;x=x.filter(D=>D.id!==h),x.push({ref:s,id:h}),p.current=x};return d.createElement(Ce.Provider,{value:{startDate:t??w,endDate:l??F,direction:a,setStart:s=>C(s),setEndInclusive:s=>T(s),activeRow:P,setActiveRow:s=>L(s),initiate:s=>M(s),addFocusable:N}},d.createElement("div",Object.assign({},o,{ref:r}),d.createElement("div",{className:"navds-timeline"},d.createElement(ft,{templates:c}),g.map((s,h)=>d.createElement(s,{key:`pin-${h}`})),S.map((s,h)=>d.createElement(Te.Provider,{key:`row-${s.id}`,value:{periods:s.periods,id:s.id,active:P===h,index:h}},d.createElement(le,Object.assign({},s==null?void 0:s.restProps,{ref:s==null?void 0:s.ref,label:s.label,icon:s.icon,headingTag:s.headingTag}))))),b))});W.Row=le;W.Period=ne;W.Pin=De;W.Zoom=re;export{Ut as S,W as T,Vt as a,Zt as b,Bt as c,Kt as d,Yt as e,Ht as f};
