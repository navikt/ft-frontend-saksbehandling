import{u as X,a as q,i as J,o as Q,g as ee,f as ne,h as te}from"./floating-ui.react-FIE1On8Y.js";import{c as $}from"./clsx-B-dksMZM.js";import{r as u,R as p}from"./index-B5OHeJSP.js";import{D as se}from"./useDateTranslationContext-DuYWebvA.js";import{S as re,u as ie}from"./Theme-6IdwQf2V.js";import{c as ae,m as oe,u as H}from"./create-context-BlrHNsQj.js";import"./useId-e75EoDiw.js";import{u as j}from"./useClientLayoutEffect-DnVV5Q77.js";import{a as k}from"./Checkmark-uHeVskEM.js";import{M as de}from"./index-sT6466e8.js";function A(s){return s.sort((n,t)=>{const e=n.compareDocumentPosition(t);if(e&Node.DOCUMENT_POSITION_FOLLOWING||e&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(e&Node.DOCUMENT_POSITION_PRECEDING||e&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(e&Node.DOCUMENT_POSITION_DISCONNECTED||e&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0})}const ue=s=>typeof s=="object"&&"nodeType"in s&&s.nodeType===Node.ELEMENT_NODE;function K(s,n,t){let e=s+1;return t&&e>=n&&(e=0),e}function V(s,n,t){let e=s-1;return t&&e<0&&(e=n),e}const F=s=>s;class le{constructor(){this.descendants=new Map,this.register=n=>{if(n!=null)return ue(n)?this.registerNode(n):t=>{this.registerNode(t,n)}},this.unregister=n=>{this.descendants.delete(n);const t=A(Array.from(this.descendants.keys()));this.assignIndex(t)},this.destroy=()=>{this.descendants.clear()},this.assignIndex=n=>{this.descendants.forEach(t=>{const e=n.indexOf(t.node);t.index=e,t.node.dataset.index=t.index.toString()})},this.count=()=>this.descendants.size,this.enabledCount=()=>this.enabledValues().length,this.values=()=>Array.from(this.descendants.values()).sort((t,e)=>t.index-e.index),this.enabledValues=()=>this.values().filter(n=>!n.disabled),this.item=n=>{if(this.count()!==0)return this.values()[n]},this.enabledItem=n=>{if(this.enabledCount()!==0)return this.enabledValues()[n]},this.first=()=>this.item(0),this.firstEnabled=()=>this.enabledItem(0),this.last=()=>this.item(this.descendants.size-1),this.lastEnabled=()=>{const n=this.enabledValues().length-1;return this.enabledItem(n)},this.indexOf=n=>{var t,e;return n&&(e=(t=this.descendants.get(n))===null||t===void 0?void 0:t.index)!==null&&e!==void 0?e:-1},this.enabledIndexOf=n=>n==null?-1:this.enabledValues().findIndex(t=>t.node.isSameNode(n)),this.next=(n,t=!0)=>{const e=K(n,this.count(),t);return this.item(e)},this.nextEnabled=(n,t=!0)=>{const e=this.item(n);if(!e)return;const r=this.enabledIndexOf(e.node),a=K(r,this.enabledCount(),t);return this.enabledItem(a)},this.prev=(n,t=!0)=>{const e=V(n,this.count()-1,t);return this.item(e)},this.prevEnabled=(n,t=!0)=>{const e=this.item(n);if(!e)return;const r=this.enabledIndexOf(e.node),a=V(r,this.enabledCount()-1,t);return this.enabledItem(a)},this.registerNode=(n,t)=>{if(!n)return;const e=this.descendants.get(n);if(e){this.descendants.set(n,Object.assign({index:e.index,node:n},t));return}const r=Array.from(this.descendants.keys()).concat(n),a=A(r);t!=null&&t.disabled&&(t.disabled=!!t.disabled);const d=Object.assign({node:n,index:-1},t);this.descendants.set(n,d),this.assignIndex(a)}}}function ce(){const[s,n]=ae({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"}),t=F(a=>p.createElement(s,Object.assign({},a.value),a.children));function e(a){const d=n(),[c,f]=u.useState(-1),l=u.useRef(null);j(()=>()=>{l.current&&d.unregister(l.current)},[]),j(()=>{if(!l.current)return;const g=Number(l.current.dataset.index);c!==g&&!Number.isNaN(g)&&f(g)});const i=F(a?d.register(a):d.register);return{descendants:d,index:c,enabledIndex:d.enabledIndexOf(l.current),register:oe([i,l])}}function r(){return u.useRef(new le).current}return[t,n,r,e]}function fe(s,n=globalThis==null?void 0:globalThis.document){const t=k(s);u.useEffect(()=>{const e=r=>{r.key==="Escape"&&t(r)};return n.addEventListener("keydown",e,!0),()=>n.removeEventListener("keydown",e,!0)},[t,n])}const Z={FOCUS_OUTSIDE:"AKSEL_FOCUS_OUTSIDE",POINTER_DOWN_OUTSIDE:"AKSEL_POINTER_DOWN_OUTSIDE"};function z(s,n,t,{discrete:e}={discrete:!1}){if(!n)return;const r=t.originalEvent.target,a=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:t});r.addEventListener(s,n,{once:!0}),e&&r?de.flushSync(()=>r.dispatchEvent(a)):r.dispatchEvent(a)}function he(s,n=globalThis==null?void 0:globalThis.document){const t=k(s),e=u.useRef(!1);return u.useEffect(()=>{const r=a=>{if(a.target&&!e.current){const d={originalEvent:a};z(Z.FOCUS_OUTSIDE,t,d)}};return n.addEventListener("focusin",r),()=>n.removeEventListener("focusin",r)},[n,t]),{onFocusCapture:()=>{e.current=!0},onBlurCapture:()=>{e.current=!1}}}function be(s,n=globalThis==null?void 0:globalThis.document){const t=k(s),e=u.useRef(!1),r=u.useRef(()=>{});return u.useEffect(()=>{const a=c=>{function f(){z(Z.POINTER_DOWN_OUTSIDE,t,{originalEvent:c},{discrete:!0})}c.target&&!e.current?c.pointerType==="touch"?(n.removeEventListener("click",r.current),r.current=f,n.addEventListener("click",r.current,{once:!0})):f():n.removeEventListener("click",r.current),e.current=!1},d=window.setTimeout(()=>{n.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(d),n.removeEventListener("pointerdown",a),n.removeEventListener("click",r.current)}},[n,t]),{onPointerDownCapture:()=>{e.current=!0}}}var me=function(s,n){var t={};for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&n.indexOf(e)<0&&(t[e]=s[e]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(s);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(s,e[r])&&(t[e[r]]=s[e[r]]);return t};const[pe,ge,Ee,Oe]=ce();let x=0,B;const ve=u.forwardRef((s,n)=>ge(!1)?p.createElement(W,Object.assign({ref:n},s)):p.createElement(ye,null,p.createElement(W,Object.assign({ref:n},s)))),ye=({children:s})=>{const n=Ee();return p.createElement(pe,{value:n},s)},W=u.forwardRef((s,n)=>{var t,{children:e,asChild:r,onEscapeKeyDown:a,onPointerDownOutside:d,onFocusOutside:c,onInteractOutside:f,onDismiss:l,safeZone:i,disableOutsidePointerEvents:g=!1,enabled:b=!0}=s,N=me(s,["children","asChild","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss","safeZone","disableOutsidePointerEvents","enabled"]);const[,L]=u.useState({}),{register:M,index:D,descendants:O}=Oe({disableOutsidePointerEvents:g,disabled:!b,forceUpdate:()=>L({})}),[E,w]=u.useState(null),h=H(w,M,n),m=(t=E==null?void 0:E.ownerDocument)!==null&&t!==void 0?t:globalThis==null?void 0:globalThis.document,C=u.useRef(!1),y=u.useRef(!1),_=(()=>{let o=-1;return O.enabledValues().forEach((T,v)=>{T.disableOutsidePointerEvents&&(o=v)}),{isPointerEventsEnabled:D>=o,isBodyPointerEventsDisabled:x>0,pointerStyle:D>=o&&x>0?"auto":void 0}})();function S(o){var P,T;if(!(i!=null&&i.anchor)&&!(i!=null&&i.dismissable)||!b)return;o.defaultPrevented||(C.current=!0,o.detail.originalEvent.type==="pointerdown"&&(y.current=!0));const v=o.target;o.detail.originalEvent.type==="pointerdown"?(!((P=i==null?void 0:i.anchor)===null||P===void 0)&&P.contains(v)||v===(i==null?void 0:i.anchor))&&o.preventDefault():!(v instanceof HTMLElement&&![i==null?void 0:i.anchor,i==null?void 0:i.dismissable].some(U=>U==null?void 0:U.contains(v))&&!v.contains((T=i==null?void 0:i.dismissable)!==null&&T!==void 0?T:null))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&y.current&&o.preventDefault(),y.current=!1,C.current=!1}const R=be(o=>{!_.isPointerEventsEnabled||!b||(d==null||d(o),f==null||f(o),i&&S(o),!o.defaultPrevented&&l&&l())},m),I=he(o=>{b&&(c==null||c(o),f==null||f(o),i&&S(o),!o.defaultPrevented&&l&&l())},m);fe(o=>{!b||!(D===O.enabledCount()-1)||(a==null||a(o),!o.defaultPrevented&&l&&(o.preventDefault(),l()))},m),u.useEffect(()=>{if(!(!E||!b||!g))return x===0&&(B=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),x++,()=>{x===1&&(m.body.style.pointerEvents=B),x--}},[E,m,g,O,b]),u.useEffect(()=>()=>O.values().forEach(o=>o.forceUpdate()),[O,E]);const G=r?re:"div";return p.createElement(G,Object.assign({ref:h},N,{onFocusCapture:I.onFocusCapture,onBlurCapture:I.onBlurCapture,onPointerDownCapture:R.onPointerDownCapture,style:Object.assign({pointerEvents:_.pointerStyle},N.style)}),e)});var Ie=function(s,n){var t={};for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&n.indexOf(e)<0&&(t[e]=s[e]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(s);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(s,e[r])&&(t[e[r]]=s[e[r]]);return t};const xe=u.forwardRef((s,n)=>{var{className:t}=s,e=Ie(s,["className"]);return p.createElement("div",Object.assign({},e,{ref:n,className:$("navds-popover__content",t)}))});var Ne=function(s,n){var t={};for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&n.indexOf(e)<0&&(t[e]=s[e]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(s);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(s,e[r])&&(t[e[r]]=s[e[r]]);return t};const De=u.forwardRef((s,n)=>{var{className:t,children:e,anchorEl:r,arrow:a=!0,open:d,onClose:c,placement:f="top",offset:l,strategy:i,flip:g=!0}=s,b=Ne(s,["className","children","anchorEl","arrow","open","onClose","placement","offset","strategy","flip"]);const N=u.useRef(null),L=X(!1)!==void 0,M=u.useContext(se)!==null,D=i??(L?"fixed":"absolute"),O=M?!1:g,E=ie(!1),{update:w,refs:h,placement:m,middlewareData:{arrow:{x:C,y}={}},floatingStyles:_}=q({strategy:D,placement:f,open:d,middleware:[Q(l??(E?8:a?16:4)),O&&ee({padding:5,fallbackPlacements:["bottom","top"]}),ne({padding:12}),te({element:N,padding:8})]});j(()=>{h.setReference(r)},[r]);const S=H(h.setFloating,n);j(()=>{if(!h.reference.current||!h.floating.current||!d)return;const I=J(h.reference.current,h.floating.current,w);return()=>I()},[h.floating,h.reference,w,d,r]);const R={top:"bottom",right:"left",bottom:"top",left:"right"}[m.split("-")[0]];return p.createElement(ve,{asChild:!0,safeZone:{anchor:r,dismissable:h.floating.current},onDismiss:()=>d&&(c==null?void 0:c()),enabled:d},p.createElement("div",Object.assign({ref:S},b,{className:$("navds-popover",t,{"navds-popover--hidden":!d||!r}),style:Object.assign(Object.assign({},b.style),_),"data-placement":m,"aria-hidden":!d||!r}),e,a&&!E&&p.createElement("div",{ref:I=>{N.current=I},style:Object.assign(Object.assign(Object.assign({},C!=null?{left:C}:{}),y!=null?{top:y}:{}),R?{[R]:"-0.5rem"}:{}),className:"navds-popover__arrow"})))});De.Content=xe;export{De as P,ce as c};
