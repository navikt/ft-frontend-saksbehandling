import{g as ie,a as re,r as pe}from"./formUtils-VGUX6Xee.js";import{r as p,a2 as be,a3 as b,a4 as H,a5 as M,a6 as h,a7 as Ve,a8 as W,a9 as q,aa as Oe,u as Re,a as ne,d as F,x as T,b as E,j as w,D as ee,V as ke,L as ge,H as Fe}from"./iframe-BTh7qCSp.js";import{c as he}from"./customParseFormat-aTV99G3Z.js";import{R as Se}from"./ReadOnlyField-T6QNTHDb.js";import"./preload-helper-PPVm8Dsz.js";const oe=(t={},o={})=>({from:Object.assign({isDisabled:!1,isWeekend:!1,isEmpty:!1,isInvalid:!1,isBefore:!1,isAfter:!1,isValidDate:!0},t),to:Object.assign({isDisabled:!1,isWeekend:!1,isEmpty:!1,isInvalid:!1,isBefore:!1,isAfter:!1,isBeforeFrom:!1,isValidDate:!0},o)}),I={FROM:"FROM",TO:"TO"},Te=(t,o)=>{const a=o?.fromDate&&t&&h(o?.fromDate,t)>0,d=o?.toDate&&t&&h(t,o?.toDate)>0;if(M(t)&&!(o?.disableWeekends&&W(t))&&!(o?.disabled&&q(t,o.disabled)))return{isValidDate:!1,isInvalid:!M(t),isWeekend:o?.disableWeekends&&W(t),isDisabled:o?.disabled&&q(t,o.disabled),isBefore:a,isAfter:d};if(a||d)return{isValidDate:!1,isBefore:a,isAfter:d}},Ie=(t,o,a)=>{var d;const V=a?.fromDate&&t&&h(a?.fromDate,t)>0,g=a?.toDate&&t&&h(t,a?.toDate)>0,u=(d=o&&h(o,t)>0)!==null&&d!==void 0?d:!1;if(M(t)&&!(a?.disableWeekends&&W(t))&&!(a?.disabled&&q(t,a.disabled)))return{isValidDate:!1,isInvalid:!M(t),isWeekend:a?.disableWeekends&&W(t),isDisabled:a?.disabled&&q(t,a.disabled),isBefore:V,isAfter:g,isBeforeFrom:u};if(V||g||u)return{isValidDate:!1,isBefore:V,isAfter:g,isBeforeFrom:u}},te=(t,o)=>{if(!t||!t?.from)return oe({isEmpty:!0,isValidDate:!1},{isEmpty:!0,isValidDate:!1});const a=Te(t.from,o),d=t.to?Ie(t.to,t.from,o):{isEmpty:!0,isValidDate:!1};return oe(Object.assign({},a),Object.assign({},d))},Pe=(t={})=>{const{locale:o,defaultSelected:a,today:d=new Date,fromDate:V,toDate:g,disabled:u,disableWeekends:B,onRangeChange:_,inputFormat:c,onValidate:x,defaultMonth:P,allowTwoDigitYear:O=!0}=t,[v,A]=p.useState(null),J=be(),m=o?Oe(o):J,[s,K]=p.useState(a),[y,j]=p.useState(s?s?.from:P??d),[l,Q]=p.useState(s??{from:void 0,to:void 0}),[U,N]=p.useState(s?.from?b(s.from,m,"date",c):""),[L,n]=p.useState(s?.to?b(s.to,m,"date",c):""),[f,D]=p.useState(te(l,t)),[ue,X]=p.useState(!1),R=e=>{_?.(e),Q(e)},S=(e={},i={})=>{const r=oe(e,i);D(r),x?.(r)},me=()=>{R(s??{from:void 0,to:void 0}),j(s?s?.from:P??d),D(te(s??{from:void 0,to:void 0},t)),N(s?.from?b(s.from,m,"date",c):""),n(s?.to?b(s.to,m,"date",c):""),K(a)},fe=e=>{R(e),N(e?.from?b(e.from,m,"date",c):""),n(e?.to?b(e?.to,m,"date",c):""),D(te(e,t))},ae=(e,i)=>{if(e.target.readOnly)return;const r=H(e.target.value,d,m,"date",O);if(M(r)){i===I.FROM?N(b(r,m,"date",c)):n(b(r,m,"date",c));const k=V&&r&&h(V,r)>0,C=g&&r&&h(r,g)>0;!k&&!C&&j(r)}},se=(e,i)=>{const r=H(e.target.value,d,m,"date",O);M(r)&&(i===I.FROM?N(b(r,m,"date",c)):i===I.TO&&n(b(r,m,"date",c)))},Z=e=>M(e)&&!(B&&W(e))&&!(u&&q(e,u)),ce=e=>{e?.from&&e?.to&&(Ve(e.from,e.to)||(X(!1),v?.focus())),N(e?.from?b(e.from,m,"date",c):""),n(e?.to?b(e.to,m,"date",c):""),R({from:e?.from,to:e?.to}),S({isValidDate:!!e?.from,isEmpty:!e?.from},{isValidDate:!!e?.to,isEmpty:!e?.to})},ve=(e="",i,r=!1,k=!1)=>{if(N(e),!Z(i)){R(Object.assign(Object.assign({},l),{from:void 0})),S({isEmpty:!e,isValidDate:!1,isInvalid:!M(i),isWeekend:B&&W(i),isDisabled:u&&q(i,u),isBefore:r,isAfter:k},f.to);return}if(r||k){R(Object.assign(Object.assign({},l),{from:void 0})),S({isValidDate:!1,isBefore:r,isAfter:k},f.to);return}if(l?.to&&h(i,l?.to)>0){R({to:i,from:i}),n(b(i,m,"date",c)),j(i),S();return}if(L&&!l?.to){const C=H(L,d,m,"date",O);if(Z(C)){R({from:i,to:C}),j(i),S();return}}R(Object.assign(Object.assign({},l),{from:i})),S({},f.to),j(i)},De=(e="",i,r=!1,k=!1)=>{if(n(e),!Z(i)){R({from:l?.from,to:void 0}),S(f.from,{isEmpty:!e,isValidDate:!1,isInvalid:!M(i),isWeekend:B&&W(i),isDisabled:u&&q(i,u),isBefore:r,isAfter:k});return}if(r||k){R({from:l?.from,to:void 0}),S(f.from,{isValidDate:!1,isBefore:r,isAfter:k});return}if(l?.from&&h(l?.from,i)>0){R({from:l?.from,to:void 0}),S(f.from,{isValidDate:!1,isBeforeFrom:!0});return}R({from:l?.from,to:i}),S(f.from,{}),j(i)},le=(e,i)=>{const r=H(e.target.value,d,m,"date",O),k=V&&h(V,r)>0,C=g&&h(r,g)>0;return i===I.FROM?ve(e.target.value,r,k,C):De(e.target.value,r,k,C)};return{datepickerProps:{month:y,onMonthChange:j,onSelect:ce,selected:l,locale:o,fromDate:V,toDate:g,today:d,mode:"range",open:ue,onOpenToggle:()=>X(e=>!e),onClose:()=>{X(!1),v?.focus()},disabled:u,disableWeekends:B},fromInputProps:{onChange:e=>le(e,I.FROM),onFocus:e=>ae(e,I.FROM),onBlur:e=>se(e,I.FROM),value:U,setAnchorRef:A},toInputProps:{onChange:e=>le(e,I.TO),onFocus:e=>ae(e,I.TO),onBlur:e=>se(e,I.TO),value:L,setAnchorRef:A},reset:me,selectedRange:l,setSelected:fe}};F.extend(he);const de=({fomName:t,tomName:o,label:a,validate:d=[],disabled:V=!1,isReadOnly:g=!1,onChange:u,fromDate:B,toDate:_,isEdited:c,size:x="small"})=>{const{formState:{errors:P}}=Re(),{field:O}=ne({name:t,rules:{validate:p.useMemo(()=>ie(d),[d])}}),{field:v}=ne({name:o,rules:{validate:p.useMemo(()=>ie(d),[d])}}),A=O.value?F(O.value,T,!0).format(E):"",[J,m]=p.useState(A),s=v.value?F(v.value,T,!0).format(E):"",[K,y]=p.useState(s),{datepickerProps:j,toInputProps:l,fromInputProps:Q}=Pe({onRangeChange:n=>{const f=n?.from?F(n?.from).format(T):void 0;u&&u(f),O.onChange(f),m(F(f,T,!0).format(E));const D=n?.to?F(n?.to).format(T):void 0;u&&u(D),v.onChange(D),y(D?F(D,T,!0).format(E):"")}}),U=p.useCallback(n=>{const f=F(n.target.value,E,!0).format(T),D=f!=="Invalid Date";m(n.target.value),u&&u(D?f:n.target.value),O.onChange(D?f:n.target.value)},[m,u,O]),N=p.useCallback(n=>{const f=F(n.target.value,E,!0).format(T),D=f!=="Invalid Date";y(n.target.value),u&&u(D?f:n.target.value),v.onChange(D?f:n.target.value)},[y,u,v]);if(g){const n=O.value?F(O.value,T,!0).format(E):void 0,f=v.value?F(v.value,T,!0).format(E):void 0;return w.jsx(Se,{label:a,value:`${n} - ${f||""}`,isEdited:c,size:x})}const L={...j,fromDate:B,toDate:_};return w.jsx(ee,{...L,children:w.jsxs(ke,{gap:"space-8",children:[w.jsx(ge,{size:"small",children:a}),w.jsxs(Fe,{gap:"space-16",children:[w.jsx(ee.Input,{...Q,onChange:U,value:J,size:x,hideLabel:!0,label:"","aria-label":"Fra dato",disabled:V,error:re(P,t)}),w.jsx(ee.Input,{...l,onChange:N,value:K,size:x,label:"","aria-label":"Til dato",hideLabel:!0,disabled:V,error:re(P,o)})]})]})})};de.__docgenInfo={description:"",methods:[],displayName:"RhfRangepicker",props:{fomName:{required:!0,tsType:{name:"string"},description:""},tomName:{required:!0,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},validate:{required:!1,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"((value: string) => ValidationReturnType)[]"},description:"",defaultValue:{value:"[]",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isReadOnly:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: any) => void",signature:{arguments:[{type:{name:"any"},name:"value"}],return:{name:"void"}}},description:""},fromDate:{required:!1,tsType:{name:"Date"},description:""},toDate:{required:!1,tsType:{name:"Date"},description:""},isEdited:{required:!1,tsType:{name:"boolean"},description:""},size:{required:!1,tsType:{name:"union",raw:"'medium' | 'small'",elements:[{name:"literal",value:"'medium'"},{name:"literal",value:"'small'"}]},description:"",defaultValue:{value:"'small'",computed:!1}}}};const qe={component:de,tags:["autodocs"],decorators:pe({fomPre:"2022-10-22",tomPre:"2022-10-27"})},$={args:{fomName:"fom",tomName:"tom",label:"Dette er en rangepicker"}},G={args:{fomName:"fom",tomName:"tom",label:"Dette er en rangepicker med disabled datoer",fromDate:new Date("2022-10-10"),toDate:new Date("2022-10-14")}},Y={args:{label:"Dette er en rangepicker der verdi er valgt",fomName:"fomPre",tomName:"tomPre"}},z={args:{label:"Dette er en rangepicker som er readonly",fomName:"fomPre",tomName:"tomPre",isReadOnly:!0,isEdited:!0}};$.parameters={...$.parameters,docs:{...$.parameters?.docs,source:{originalSource:`{
  args: {
    fomName: 'fom',
    tomName: 'tom',
    label: 'Dette er en rangepicker'
  }
}`,...$.parameters?.docs?.source}}};G.parameters={...G.parameters,docs:{...G.parameters?.docs,source:{originalSource:`{
  args: {
    fomName: 'fom',
    tomName: 'tom',
    label: 'Dette er en rangepicker med disabled datoer',
    fromDate: new Date('2022-10-10'),
    toDate: new Date('2022-10-14')
  }
}`,...G.parameters?.docs?.source}}};Y.parameters={...Y.parameters,docs:{...Y.parameters?.docs,source:{originalSource:`{
  args: {
    label: 'Dette er en rangepicker der verdi er valgt',
    fomName: 'fomPre',
    tomName: 'tomPre'
  }
}`,...Y.parameters?.docs?.source}}};z.parameters={...z.parameters,docs:{...z.parameters?.docs,source:{originalSource:`{
  args: {
    label: 'Dette er en rangepicker som er readonly',
    fomName: 'fomPre',
    tomName: 'tomPre',
    isReadOnly: true,
    isEdited: true
  }
}`,...z.parameters?.docs?.source}}};const Be=["Default","MedDisabledDatoer","MedVerdi","ReadOnly"];export{$ as Default,G as MedDisabledDatoer,Y as MedVerdi,z as ReadOnly,Be as __namedExportsOrder,qe as default};
