import{e as S,j as i}from"./iframe-BdgFb11-.js";import{S as p}from"./Search-CblVglOP.js";import"./preload-helper-D9Z9MdNV.js";const D="_autocompleteSuggestion__substring_1s9ip_1",w="_autocompleteSuggestion__inner_1s9ip_4",a={autocompleteSuggestion__substring:D,autocompleteSuggestion__inner:w,"autocompleteSuggestion--active":"_autocompleteSuggestion--active_1s9ip_12"};class v extends S.Component{constructor(e){super(e),this.state={value:e.value},this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}onClick(){const{onClick:e}=this.props,{value:t}=this.state;e(t)}onMouseMove(){const{setSuggestionIndex:e,index:t}=this.props;e(t)}render(){const{match:e,active:t,avoidBlur:s,id:n}=this.props,{value:o}=this.state.value,l=o.toLowerCase().startsWith(e.toLowerCase());return i.jsx("li",{id:n,role:"option","aria-selected":t,onClick:this.onClick,onMouseMove:this.onMouseMove,onFocus:s,onMouseDown:s,onKeyDown:s,className:"autocompleteSuggestion typo-normal",children:l?i.jsxs("span",{className:`${a.autocompleteSuggestion__inner} ${t?a["autocompleteSuggestion--active"]:""}`,children:[o.substring(0,e.length),i.jsx("span",{className:a.autocompleteSuggestion__substring,children:o.substring(e.length)})]}):i.jsx("span",{className:`${a.autocompleteSuggestion__inner} ${t?a["autocompleteSuggestion--active"]:""}`,children:o})})}}v.__docgenInfo={description:"",methods:[{name:"onClick",docblock:null,modifiers:[],params:[],returns:null},{name:"onMouseMove",docblock:null,modifiers:[],params:[],returns:null}],displayName:"AutocompleteSuggestion",props:{id:{required:!0,tsType:{name:"string"},description:""},index:{required:!0,tsType:{name:"number"},description:""},onClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: Suggestion) => void",signature:{arguments:[{type:{name:"Suggestion"},name:"value"}],return:{name:"void"}}},description:""},value:{required:!0,tsType:{name:"Suggestion"},description:""},match:{required:!0,tsType:{name:"string"},description:""},active:{required:!0,tsType:{name:"boolean"},description:""},setSuggestionIndex:{required:!0,tsType:{name:"signature",type:"function",raw:"(index: number) => void",signature:{arguments:[{type:{name:"number"},name:"index"}],return:{name:"void"}}},description:""},avoidBlur:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const T="_autocomplete_cj8jr_1",I="_autocomplete__suggestions_cj8jr_27",m={autocomplete:T,autocomplete__suggestions:I,"autocomplete__suggestions--hidden":"_autocomplete__suggestions--hidden_cj8jr_31"};class y extends S.Component{input;inputRef;constructor(e){super(e),this.state={activeSuggestionIndex:-1,hasFocus:!1,shouldShowSuggestions:!0,setAriaActiveDescendant:!1,shouldBlur:!0,blurDelay:null},this.inputRef=t=>{this.input=t},this.onChange=this.onChange.bind(this),this.onBlur=this.onBlur.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onFocus=this.onFocus.bind(this),this.setValue=this.setValue.bind(this),this.setSuggestionIndex=this.setSuggestionIndex.bind(this),this.avoidBlur=this.avoidBlur.bind(this),this.clearBlurDelay=this.clearBlurDelay.bind(this),this.onSearchButtonClick=this.onSearchButtonClick.bind(this)}componentWillUnmount(){const{blurDelay:e}=this.state;e&&(clearTimeout(e),this.setState({blurDelay:null}))}onChange(e){const{onChange:t}=this.props;this.setState({activeSuggestionIndex:-1,shouldShowSuggestions:!0}),t(e)}onSearchButtonClick(e){const{onSearchButtonClick:t}=this.props;e.preventDefault(),t&&t()}onKeyDown(e){const{shouldShowSuggestions:t}=this.state;let{activeSuggestionIndex:s}=this.state;const{suggestions:n}=this.props,o=s>-1;switch(this.setState({setAriaActiveDescendant:e.keyCode===38||e.keyCode===40}),e.keyCode){case 9:o&&t&&this.setValue(n[s]);break;case 13:o&&t?(e.preventDefault(),this.setValue(n[s])):t&&n.length===1?this.setValue(n[0]):this.setState({shouldShowSuggestions:!1});break;case 27:t&&n.length>0&&(e.preventDefault(),this.setState({shouldShowSuggestions:!1}));break;case 38:t&&(e.preventDefault(),s=s-1===-2?-1:s-1,this.setState({activeSuggestionIndex:s}));break;case 40:t&&(e.preventDefault(),s=s+1===n.length?n.length-1:s+1,this.setState({activeSuggestionIndex:s}));break}}onFocus(){this.setState({hasFocus:!0,activeSuggestionIndex:-1})}onBlur(){const e=setTimeout(()=>{const{shouldBlur:s}=this.state;s&&this.setState({hasFocus:!1})},10);this.setState({blurDelay:e});const{onBlur:t}=this.props;t&&t()}setSuggestionIndex(e){this.setState({activeSuggestionIndex:e}),this.clearBlurDelay()}setValue(e){this.setState({shouldShowSuggestions:!1,activeSuggestionIndex:-1},()=>{this.inputRef.focus()}),this.clearBlurDelay();const{onSelect:t}=this.props;t(e)}avoidBlur(){this.setState({shouldBlur:!1})}clearBlurDelay(){const{blurDelay:e}=this.state;e&&(clearTimeout(e),this.setState({blurDelay:null})),this.setState({shouldBlur:!0})}render(){const{suggestions:e,id:t,ariaLabel:s,placeholder:n,value:o,name:l,shouldFocusOnMount:b,isLoading:_}=this.props,{activeSuggestionIndex:c,setAriaActiveDescendant:k,hasFocus:B,shouldShowSuggestions:x}=this.state,d=B&&x&&e.length>0,C=k&&c>-1?`${t}-item-${c}`:void 0;return i.jsxs("div",{className:`${m.autocomplete} autocomplete`,"aria-expanded":d,"aria-owns":`${t}-suggestions`,"aria-haspopup":"listbox",children:[i.jsx(p,{variant:"primary",id:t,name:l,"aria-label":s,"aria-autocomplete":"list","aria-controls":`${t}-suggestions`,"aria-activedescendant":C,placeholder:n,value:o,autoComplete:"off",onChange:this.onChange,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onFocus:this.onFocus,ref:u=>{this.inputRef=u},className:"typo-normal",autoFocus:b,label:s,hideLabel:!0,children:i.jsx(p.Button,{loading:_,onClick:this.onSearchButtonClick})}),i.jsx("ul",{id:`${t}-suggestions`,role:"listbox",className:d?m.autocomplete__suggestions:m["autocomplete__suggestions--hidden"],children:d&&e.map((u,g)=>i.jsx(v,{id:`${t}-item-${g}`,index:g,value:u,match:o,active:g===c,onClick:this.setValue,setSuggestionIndex:this.setSuggestionIndex,avoidBlur:this.avoidBlur},u.key))})]})}}y.__docgenInfo={description:"",methods:[{name:"onChange",docblock:null,modifiers:[],params:[{name:"value",optional:!1,type:{name:"string"}}],returns:null},{name:"onSearchButtonClick",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:{name:"ReactFormEvent",raw:"React.FormEvent<HTMLButtonElement>",elements:[{name:"HTMLButtonElement"}],alias:"React.FormEvent"}}],returns:null},{name:"onKeyDown",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:{name:"ReactKeyboardEvent",raw:"React.KeyboardEvent",alias:"React.KeyboardEvent"}}],returns:null},{name:"onFocus",docblock:null,modifiers:[],params:[],returns:null},{name:"onBlur",docblock:null,modifiers:[],params:[],returns:null},{name:"setSuggestionIndex",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:{name:"number"}}],returns:null},{name:"setValue",docblock:null,modifiers:[],params:[{name:"value",optional:!1,type:{name:"Suggestion",alias:"Suggestion"}}],returns:null},{name:"avoidBlur",docblock:null,modifiers:[],params:[],returns:null},{name:"clearBlurDelay",docblock:null,modifiers:[],params:[],returns:null}],displayName:"Autocomplete",props:{onSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: Suggestion) => void",signature:{arguments:[{type:{name:"Suggestion"},name:"value"}],return:{name:"void"}}},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},onBlur:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},placeholder:{required:!0,tsType:{name:"string"},description:""},suggestions:{required:!0,tsType:{name:"Array",elements:[{name:"Suggestion"}],raw:"Suggestion[]"},description:""},value:{required:!0,tsType:{name:"string"},description:""},ariaLabel:{required:!0,tsType:{name:"string"},description:""},id:{required:!0,tsType:{name:"string"},description:""},name:{required:!1,tsType:{name:"string"},description:""},shouldFocusOnMount:{required:!1,tsType:{name:"boolean"},description:""},isLoading:{required:!1,tsType:{name:"boolean"},description:""},onSearchButtonClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const{action:h}=__STORYBOOK_MODULE_ACTIONS__,j={component:y},r={args:{value:"Verdi",onChange:h("button-click"),ariaLabel:"ariaLabel",id:"autocompleteId",placeholder:"",suggestions:[{key:"testItem",value:"Test Item"}],onSelect:h("button-click")}};r.parameters={...r.parameters,docs:{...r.parameters?.docs,source:{originalSource:`{
  args: {
    value: 'Verdi',
    onChange: action('button-click'),
    ariaLabel: 'ariaLabel',
    id: 'autocompleteId',
    placeholder: '',
    suggestions: [{
      key: 'testItem',
      value: 'Test Item'
    }],
    onSelect: action('button-click')
  }
}`,...r.parameters?.docs?.source}}};const L=["Default"];export{r as Default,L as __namedExportsOrder,j as default};
