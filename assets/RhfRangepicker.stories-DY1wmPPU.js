import{g as le,a as de,r as je}from"./formUtils-TBXSRRal.js";import{r as p,Z as Me,$ as b,a0 as z,a1 as M,a2 as S,a3 as Ne,a4 as W,a5 as q,a6 as Ee,m as ge,n as re,q as h,t as T,v as g,j as C,x as ee,V as xe,L as Ce,H as We}from"./iframe-DlqD_I3e.js";import{c as qe}from"./customParseFormat-WfVumAw2.js";import{R as we}from"./ReadOnlyField-mWBv_lbC.js";const te=(o={},t={})=>({from:Object.assign({isDisabled:!1,isWeekend:!1,isEmpty:!1,isInvalid:!1,isBefore:!1,isAfter:!1,isValidDate:!0},o),to:Object.assign({isDisabled:!1,isWeekend:!1,isEmpty:!1,isInvalid:!1,isBefore:!1,isAfter:!1,isBeforeFrom:!1,isValidDate:!0},t)}),P={FROM:"FROM",TO:"TO"},Be=(o,t)=>{const a=(t==null?void 0:t.fromDate)&&o&&S(t==null?void 0:t.fromDate,o)>0,n=(t==null?void 0:t.toDate)&&o&&S(o,t==null?void 0:t.toDate)>0;if(M(o)&&!(t!=null&&t.disableWeekends&&W(o))&&!(t!=null&&t.disabled&&q(o,t.disabled)))return{isValidDate:!1,isInvalid:!M(o),isWeekend:(t==null?void 0:t.disableWeekends)&&W(o),isDisabled:(t==null?void 0:t.disabled)&&q(o,t.disabled),isBefore:a,isAfter:n};if(a||n)return{isValidDate:!1,isBefore:a,isAfter:n}},_e=(o,t,a)=>{var n;const V=(a==null?void 0:a.fromDate)&&o&&S(a==null?void 0:a.fromDate,o)>0,F=(a==null?void 0:a.toDate)&&o&&S(o,a==null?void 0:a.toDate)>0,u=(n=t&&S(t,o)>0)!==null&&n!==void 0?n:!1;if(M(o)&&!(a!=null&&a.disableWeekends&&W(o))&&!(a!=null&&a.disabled&&q(o,a.disabled)))return{isValidDate:!1,isInvalid:!M(o),isWeekend:(a==null?void 0:a.disableWeekends)&&W(o),isDisabled:(a==null?void 0:a.disabled)&&q(o,a.disabled),isBefore:V,isAfter:F,isBeforeFrom:u};if(V||F||u)return{isValidDate:!1,isBefore:V,isAfter:F,isBeforeFrom:u}},oe=(o,t)=>{if(!o||!(o!=null&&o.from))return te({isEmpty:!0,isValidDate:!1},{isEmpty:!0,isValidDate:!1});const a=Be(o.from,t),n=o.to?_e(o.to,o.from,t):{isEmpty:!0,isValidDate:!1};return te(Object.assign({},a),Object.assign({},n))},Le=(o={})=>{const{locale:t,defaultSelected:a,today:n=new Date,fromDate:V,toDate:F,disabled:u,disableWeekends:w,onRangeChange:_,inputFormat:v,onValidate:B,defaultMonth:D,allowTwoDigitYear:O=!0}=o,[N,A]=p.useState(null),L=Me(),f=t?Ee(t):L,[s,y]=p.useState(a),[Z,j]=p.useState(s?s==null?void 0:s.from:D??n),[i,J]=p.useState(s??{from:void 0,to:void 0}),[K,E]=p.useState(s!=null&&s.from?b(s.from,f,"date",v):""),[d,m]=p.useState(s!=null&&s.to?b(s.to,f,"date",v):""),[c,Q]=p.useState(oe(i,o)),[Fe,U]=p.useState(!1),R=e=>{_==null||_(e),J(e)},I=(e={},l={})=>{const r=te(e,l);Q(r),B==null||B(r)},he=()=>{R(s??{from:void 0,to:void 0}),j(s?s==null?void 0:s.from:D??n),Q(oe(s??{from:void 0,to:void 0},o)),E(s!=null&&s.from?b(s.from,f,"date",v):""),m(s!=null&&s.to?b(s.to,f,"date",v):""),y(a)},Se=e=>{R(e),E(e!=null&&e.from?b(e.from,f,"date",v):""),m(e!=null&&e.to?b(e==null?void 0:e.to,f,"date",v):""),Q(oe(e,o))},ae=(e,l)=>{if(e.target.readOnly)return;const r=z(e.target.value,n,f,"date",O);if(M(r)){l===P.FROM?E(b(r,f,"date",v)):m(b(r,f,"date",v));const k=V&&r&&S(V,r)>0,x=F&&r&&S(r,F)>0;!k&&!x&&j(r)}},se=(e,l)=>{const r=z(e.target.value,n,f,"date",O);M(r)&&(l===P.FROM?E(b(r,f,"date",v)):l===P.TO&&m(b(r,f,"date",v)))},X=e=>M(e)&&!(w&&W(e))&&!(u&&q(e,u)),Ie=e=>{e!=null&&e.from&&(e!=null&&e.to)&&(Ne(e.from,e.to)||(U(!1),N==null||N.focus())),E(e!=null&&e.from?b(e.from,f,"date",v):""),m(e!=null&&e.to?b(e.to,f,"date",v):""),R({from:e==null?void 0:e.from,to:e==null?void 0:e.to}),I({isValidDate:!!(e!=null&&e.from),isEmpty:!(e!=null&&e.from)},{isValidDate:!!(e!=null&&e.to),isEmpty:!(e!=null&&e.to)})},Te=(e="",l,r=!1,k=!1)=>{if(E(e),!X(l)){R(Object.assign(Object.assign({},i),{from:void 0})),I({isEmpty:!e,isValidDate:!1,isInvalid:!M(l),isWeekend:w&&W(l),isDisabled:u&&q(l,u),isBefore:r,isAfter:k},c.to);return}if(r||k){R(Object.assign(Object.assign({},i),{from:void 0})),I({isValidDate:!1,isBefore:r,isAfter:k},c.to);return}if(i!=null&&i.to&&S(l,i==null?void 0:i.to)>0){R({to:l,from:l}),m(b(l,f,"date",v)),j(l),I();return}if(d&&!(i!=null&&i.to)){const x=z(d,n,f,"date",O);if(X(x)){R({from:l,to:x}),j(l),I();return}}R(Object.assign(Object.assign({},i),{from:l})),I({},c.to),j(l)},Pe=(e="",l,r=!1,k=!1)=>{if(m(e),!X(l)){R({from:i==null?void 0:i.from,to:void 0}),I(c.from,{isEmpty:!e,isValidDate:!1,isInvalid:!M(l),isWeekend:w&&W(l),isDisabled:u&&q(l,u),isBefore:r,isAfter:k});return}if(r||k){R({from:i==null?void 0:i.from,to:void 0}),I(c.from,{isValidDate:!1,isBefore:r,isAfter:k});return}if(i!=null&&i.from&&S(i==null?void 0:i.from,l)>0){R({from:i==null?void 0:i.from,to:void 0}),I(c.from,{isValidDate:!1,isBeforeFrom:!0});return}R({from:i==null?void 0:i.from,to:l}),I(c.from,{}),j(l)},ie=(e,l)=>{const r=z(e.target.value,n,f,"date",O),k=V&&S(V,r)>0,x=F&&S(r,F)>0;return l===P.FROM?Te(e.target.value,r,k,x):Pe(e.target.value,r,k,x)};return{datepickerProps:{month:Z,onMonthChange:j,onSelect:Ie,selected:i,locale:t,fromDate:V,toDate:F,today:n,mode:"range",open:Fe,onOpenToggle:()=>U(e=>!e),onClose:()=>{U(!1),N==null||N.focus()},disabled:u,disableWeekends:w},fromInputProps:{onChange:e=>ie(e,P.FROM),onFocus:e=>ae(e,P.FROM),onBlur:e=>se(e,P.FROM),value:K,setAnchorRef:A},toInputProps:{onChange:e=>ie(e,P.TO),onFocus:e=>ae(e,P.TO),onBlur:e=>se(e,P.TO),value:d,setAnchorRef:A},reset:he,selectedRange:i,setSelected:Se}};h.extend(qe);const ke=({fomName:o,tomName:t,label:a,validate:n=[],disabled:V=!1,isReadOnly:F=!1,onChange:u,fromDate:w,toDate:_,isEdited:v})=>{const{formState:{errors:B}}=ge(),{field:D}=re({name:o,rules:{validate:p.useMemo(()=>le(n),[n])}}),{field:O}=re({name:t,rules:{validate:p.useMemo(()=>le(n),[n])}}),N=D.value?h(D.value,T,!0).format(g):"",[A,L]=p.useState(N),f=O.value?h(O.value,T,!0).format(g):"",[s,y]=p.useState(f),{datepickerProps:Z,toInputProps:j,fromInputProps:i}=Le({onRangeChange:d=>{const m=d!=null&&d.from?h(d==null?void 0:d.from).format(T):void 0;u&&u(m),D.onChange(m),L(h(m,T,!0).format(g));const c=d!=null&&d.to?h(d==null?void 0:d.to).format(T):void 0;u&&u(c),O.onChange(c),y(c?h(c,T,!0).format(g):"")}}),J=p.useCallback(d=>{const m=h(d.target.value,g,!0).format(T),c=m!=="Invalid Date";L(d.target.value),u&&u(c?m:d.target.value),D.onChange(c?m:d.target.value)},[L,u,D]),K=p.useCallback(d=>{const m=h(d.target.value,g,!0).format(T),c=m!=="Invalid Date";y(d.target.value),u&&u(c?m:d.target.value),O.onChange(c?m:d.target.value)},[y,u,O]);if(F){const d=D.value?h(D.value,T,!0).format(g):void 0,m=O.value?h(O.value,T,!0).format(g):void 0;return C.jsx(we,{label:a,value:`${d} - ${m||""}`,isEdited:v})}const E={...Z,fromDate:w,toDate:_};return C.jsx(ee,{...E,children:C.jsxs(xe,{gap:"2",children:[C.jsx(Ce,{size:"small",children:a}),C.jsxs(We,{gap:"4",children:[C.jsx(ee.Input,{...i,onChange:J,value:A,size:"small",hideLabel:!0,label:"","aria-label":"Fra dato",disabled:V,error:de(B,o)}),C.jsx(ee.Input,{...j,onChange:K,value:s,size:"small",label:"","aria-label":"Til dato",hideLabel:!0,disabled:V,error:de(B,t)})]})]})})};ke.__docgenInfo={description:"",methods:[],displayName:"RhfRangepicker",props:{fomName:{required:!0,tsType:{name:"string"},description:""},tomName:{required:!0,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},validate:{required:!1,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"((value: string) => ValidationReturnType)[]"},description:"",defaultValue:{value:"[]",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isReadOnly:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: any) => void",signature:{arguments:[{type:{name:"any"},name:"value"}],return:{name:"void"}}},description:""},fromDate:{required:!1,tsType:{name:"Date"},description:""},toDate:{required:!1,tsType:{name:"Date"},description:""},isEdited:{required:!1,tsType:{name:"boolean"},description:""}}};const Ze={component:ke,tags:["autodocs"],decorators:je({fomPre:"2022-10-22",tomPre:"2022-10-27"})},$={args:{fomName:"fom",tomName:"tom",label:"Dette er en rangepicker"}},H={args:{fomName:"fom",tomName:"tom",label:"Dette er en rangepicker med disabled datoer",fromDate:new Date("2022-10-10"),toDate:new Date("2022-10-14")}},G={args:{label:"Dette er en rangepicker der verdi er valgt",fomName:"fomPre",tomName:"tomPre"}},Y={args:{label:"Dette er en rangepicker som er readonly",fomName:"fomPre",tomName:"tomPre",isReadOnly:!0,isEdited:!0}};var ne,ue,me;$.parameters={...$.parameters,docs:{...(ne=$.parameters)==null?void 0:ne.docs,source:{originalSource:`{
  args: {
    fomName: 'fom',
    tomName: 'tom',
    label: 'Dette er en rangepicker'
  }
}`,...(me=(ue=$.parameters)==null?void 0:ue.docs)==null?void 0:me.source}}};var fe,ce,ve;H.parameters={...H.parameters,docs:{...(fe=H.parameters)==null?void 0:fe.docs,source:{originalSource:`{
  args: {
    fomName: 'fom',
    tomName: 'tom',
    label: 'Dette er en rangepicker med disabled datoer',
    fromDate: new Date('2022-10-10'),
    toDate: new Date('2022-10-14')
  }
}`,...(ve=(ce=H.parameters)==null?void 0:ce.docs)==null?void 0:ve.source}}};var De,pe,be;G.parameters={...G.parameters,docs:{...(De=G.parameters)==null?void 0:De.docs,source:{originalSource:`{
  args: {
    label: 'Dette er en rangepicker der verdi er valgt',
    fomName: 'fomPre',
    tomName: 'tomPre'
  }
}`,...(be=(pe=G.parameters)==null?void 0:pe.docs)==null?void 0:be.source}}};var Ve,Oe,Re;Y.parameters={...Y.parameters,docs:{...(Ve=Y.parameters)==null?void 0:Ve.docs,source:{originalSource:`{
  args: {
    label: 'Dette er en rangepicker som er readonly',
    fomName: 'fomPre',
    tomName: 'tomPre',
    isReadOnly: true,
    isEdited: true
  }
}`,...(Re=(Oe=Y.parameters)==null?void 0:Oe.docs)==null?void 0:Re.source}}};const Je=["Default","MedDisabledDatoer","MedVerdi","ReadOnly"];export{$ as Default,H as MedDisabledDatoer,G as MedVerdi,Y as ReadOnly,Je as __namedExportsOrder,Ze as default};
