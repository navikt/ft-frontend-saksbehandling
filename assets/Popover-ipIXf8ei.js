import{u as V,a as X,o as Y,h as q,g as z,i as G,f as J}from"./floating-ui.react-ChwVIx_A.js";import{r as l,e as b,b as $,S as Q,u as H,a as ee}from"./iframe-DzXUO6GT.js";import{u as te}from"./Date.Input-DjBtdO-h.js";import"./useId-BTmGetX7.js";import{c as ne}from"./useDescendant-Bep7xBZs.js";import{a as U}from"./useControllableState-DmC_MG6f.js";import{P as oe}from"./index-C9-rAhI6.js";import{u as K}from"./useClientLayoutEffect-B9dXjG7B.js";function re(n,o=globalThis?.document){const r=U(n);l.useEffect(()=>{const e=t=>{t.key==="Escape"&&r(t)};return o.addEventListener("keydown",e,!0),()=>o.removeEventListener("keydown",e,!0)},[r,o])}const W={FOCUS_OUTSIDE:"AKSEL_FOCUS_OUTSIDE",POINTER_DOWN_OUTSIDE:"AKSEL_POINTER_DOWN_OUTSIDE"};function Z(n,o,r,{discrete:e}={discrete:!1}){if(!o)return;const t=r.originalEvent.target,c=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:r});t.addEventListener(n,o,{once:!0}),e&&t?oe.flushSync(()=>t.dispatchEvent(c)):t.dispatchEvent(c)}function se(n,o=globalThis?.document){const r=U(n),e=l.useRef(!1);return l.useEffect(()=>{const t=c=>{if(c.target&&!e.current){const d={originalEvent:c};Z(W.FOCUS_OUTSIDE,r,d)}};return o.addEventListener("focusin",t),()=>o.removeEventListener("focusin",t)},[o,r]),{onFocusCapture:()=>{e.current=!0},onBlurCapture:()=>{e.current=!1}}}function ie(n,o=globalThis?.document){const r=U(n),e=l.useRef(!1),t=l.useRef(()=>{});return l.useEffect(()=>{const c=u=>{function f(){Z(W.POINTER_DOWN_OUTSIDE,r,{originalEvent:u},{discrete:!0})}u.target&&!e.current?u.pointerType==="touch"?(o.removeEventListener("click",t.current),t.current=f,o.addEventListener("click",t.current,{once:!0})):f():o.removeEventListener("click",t.current),e.current=!1},d=window.setTimeout(()=>{o.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(d),o.removeEventListener("pointerdown",c),o.removeEventListener("click",t.current)}},[o,r]),{onPointerDownCapture:()=>{e.current=!0}}}var ae=function(n,o){var r={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&o.indexOf(e)<0&&(r[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,e=Object.getOwnPropertySymbols(n);t<e.length;t++)o.indexOf(e[t])<0&&Object.prototype.propertyIsEnumerable.call(n,e[t])&&(r[e[t]]=n[e[t]]);return r};const[le,ce,de,ue]=ne();let h=0,B;const fe=l.forwardRef((n,o)=>ce(!1)?b.createElement(M,Object.assign({ref:o},n)):b.createElement(ve,null,b.createElement(M,Object.assign({ref:o},n)))),ve=({children:n})=>{const o=de();return b.createElement(le,{value:o},n)},M=l.forwardRef((n,o)=>{var r,{children:e,asChild:t,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:u,onInteractOutside:f,onDismiss:v,safeZone:i,disableOutsidePointerEvents:w=!1,enabled:p=!0}=n,P=ae(n,["children","asChild","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss","safeZone","disableOutsidePointerEvents","enabled"]);const[,j]=l.useState({}),{register:N,index:D,descendants:E}=ue({disableOutsidePointerEvents:w,disabled:!p,forceUpdate:()=>j({})}),[g,m]=l.useState(null),x=$(m,N,o),a=(r=g?.ownerDocument)!==null&&r!==void 0?r:globalThis?.document,C=l.useRef(!1),y=l.useRef(!1),T=(()=>{let s=-1;return E.enabledValues().forEach((I,O)=>{I.disableOutsidePointerEvents&&(s=O)}),{isPointerEventsEnabled:D>=s,isBodyPointerEventsDisabled:h>0,pointerStyle:D>=s&&h>0?"auto":void 0}})();function L(s){var R,I;if(!i?.anchor&&!i?.dismissable||!p)return;s.defaultPrevented||(C.current=!0,s.detail.originalEvent.type==="pointerdown"&&(y.current=!0));const O=s.target;s.detail.originalEvent.type==="pointerdown"?(!((R=i?.anchor)===null||R===void 0)&&R.contains(O)||O===i?.anchor)&&s.preventDefault():!(O instanceof HTMLElement&&![i?.anchor,i?.dismissable].some(k=>k?.contains(O))&&!O.contains((I=i?.dismissable)!==null&&I!==void 0?I:null))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&y.current&&s.preventDefault(),y.current=!1,C.current=!1}const F=ie(s=>{!T.isPointerEventsEnabled||!p||(d?.(s),f?.(s),i&&L(s),!s.defaultPrevented&&v&&v())},a),S=se(s=>{p&&(u?.(s),f?.(s),i&&L(s),!s.defaultPrevented&&v&&v())},a);re(s=>{!p||!(D===E.enabledCount()-1)||(c?.(s),!s.defaultPrevented&&v&&(s.preventDefault(),v()))},a),l.useEffect(()=>{if(!(!g||!p||!w))return h===0&&(B=a.body.style.pointerEvents,a.body.style.pointerEvents="none"),h++,()=>{h===1&&(a.body.style.pointerEvents=B),h--}},[g,a,w,E,p]),l.useEffect(()=>()=>E.values().forEach(s=>s.forceUpdate()),[E,g]);const _=t?Q:"div";return b.createElement(_,Object.assign({ref:x},P,{onFocusCapture:S.onFocusCapture,onBlurCapture:S.onBlurCapture,onPointerDownCapture:F.onPointerDownCapture,style:Object.assign({pointerEvents:T.pointerStyle},P.style)}),e)});var pe=function(n,o){var r={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&o.indexOf(e)<0&&(r[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,e=Object.getOwnPropertySymbols(n);t<e.length;t++)o.indexOf(e[t])<0&&Object.prototype.propertyIsEnumerable.call(n,e[t])&&(r[e[t]]=n[e[t]]);return r};const be=l.forwardRef((n,o)=>{var{className:r}=n,e=pe(n,["className"]);const{cn:t}=H();return b.createElement("div",Object.assign({},e,{ref:o,className:t("navds-popover__content",r)}))});var ge=function(n,o){var r={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&o.indexOf(e)<0&&(r[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,e=Object.getOwnPropertySymbols(n);t<e.length;t++)o.indexOf(e[t])<0&&Object.prototype.propertyIsEnumerable.call(n,e[t])&&(r[e[t]]=n[e[t]]);return r};const me=l.forwardRef((n,o)=>{var{className:r,children:e,anchorEl:t,arrow:c=!0,open:d,onClose:u,placement:f="top",offset:v,strategy:i,flip:w=!0}=n,p=ge(n,["className","children","anchorEl","arrow","open","onClose","placement","offset","strategy","flip"]);const{cn:P}=H(),j=l.useRef(null),N=V(!1)!==void 0,D=te(!1),E=i??(N?"fixed":"absolute"),g=D?!1:w,m=ee(!1),{update:x,refs:a,placement:C,middlewareData:{arrow:{x:y,y:T}={}},floatingStyles:L}=X({strategy:E,placement:f,open:d,middleware:[Y(v??(m?.isDarkside?8:c?16:4)),g&&q({padding:5,fallbackPlacements:["bottom","top"]}),z({padding:12}),G({element:j,padding:8})]});K(()=>{a.setReference(t)},[t]);const F=$(a.setFloating,o);K(()=>{if(!a.reference.current||!a.floating.current||!d)return;const _=J(a.reference.current,a.floating.current,x);return()=>_()},[a.floating,a.reference,x,d,t]);const S={top:"bottom",right:"left",bottom:"top",left:"right"}[C.split("-")[0]];return b.createElement(fe,{asChild:!0,safeZone:{anchor:t,dismissable:a.floating.current},onDismiss:()=>d&&u?.(),enabled:d},b.createElement("div",Object.assign({ref:F},p,{className:P("navds-popover",r,{"navds-popover--hidden":!d||!t}),style:Object.assign(Object.assign({},p.style),L),"data-placement":C,"aria-hidden":!d||!t}),e,c&&!m?.isDarkside&&b.createElement("div",{ref:_=>{j.current=_},style:Object.assign(Object.assign(Object.assign({},y!=null?{left:y}:{}),T!=null?{top:T}:{}),S?{[S]:"-0.5rem"}:{}),className:P("navds-popover__arrow")})))});me.Content=be;export{me as P};
