import{g as le,a as re,r as De}from"./formUtils-BabEHBhI.js";import{r as D,j as C}from"./iframe-DzXUO6GT.js";import{u as be,a as ne}from"./index.esm-nh5QY85X.js";import{d as F}from"./dayjs.min-BFUBMDMt.js";import{c as Ve}from"./customParseFormat-BBVDMfF5.js";import{P as T,n as E}from"./index.es-yTIDcLWJ.js";import{R as Oe}from"./ReadOnlyField-r78r3bkP.js";import{u as Re}from"./Loader-IncALmTQ.js";import{g as ge}from"./Date.Input-DjBtdO-h.js";import{f as b,p as z,i as j,a as w,d as W,D as ee}from"./DatePicker-yNQKbBqz.js";import{d as h,i as ke}from"./subMonths-CSH-MLNW.js";import"./Provider-CLScYENo.js";import{V as Fe,H as he}from"./VStack-vldtWtPo.js";import{L as Se}from"./Label-BptAkRyu.js";import"./Button-af7718Cc.js";import"./omit-B7stZg_p.js";import"./useId-BTmGetX7.js";import"./composeEventHandlers-krbYd5LM.js";import"./preload-helper-PPVm8Dsz.js";import"./index-DfaBx6Pe.js";import"./index.es-CkQmGgSL.js";import"./PersonPencilFill-DyJneeHY.js";import"./useId-DZKQXQUP.js";import"./Alert-DFJmKH85.js";import"./ExclamationmarkTriangleFill-DDAH-o0u.js";import"./XMarkOctagonFill-CoZ8IwgD.js";import"./XMark-CpZNF069.js";import"./Tooltip-B3LKtxru.js";import"./floating-ui.react-ChwVIx_A.js";import"./index-C9-rAhI6.js";import"./index-Byb5gg4O.js";import"./useControllableState-DmC_MG6f.js";import"./Box-DL9bOJYF.js";import"./BasePrimitive-DGW3gu2x.js";import"./KeyVerticalFill-DFYvwClO.js";import"./ReadOnlyIcon-BmYdC75R.js";import"./useFormField-a1sx1jM8.js";import"./ReadMore-BBeWwL2Z.js";import"./ChevronDown-DkSCMhYg.js";import"./Modal-DR-__Gep.js";import"./Popover-ipIXf8ei.js";import"./useDescendant-Bep7xBZs.js";import"./useClientLayoutEffect-B9dXjG7B.js";import"./Responsive-BjlYyCFu.js";import"./Select-BNwbPbPq.js";const te=(o={},t={})=>({from:Object.assign({isDisabled:!1,isWeekend:!1,isEmpty:!1,isInvalid:!1,isBefore:!1,isAfter:!1,isValidDate:!0},o),to:Object.assign({isDisabled:!1,isWeekend:!1,isEmpty:!1,isInvalid:!1,isBefore:!1,isAfter:!1,isBeforeFrom:!1,isValidDate:!0},t)}),I={FROM:"FROM",TO:"TO"},Te=(o,t)=>{const a=t?.fromDate&&o&&h(t?.fromDate,o)>0,n=t?.toDate&&o&&h(o,t?.toDate)>0;if(j(o)&&!(t?.disableWeekends&&w(o))&&!(t?.disabled&&W(o,t.disabled)))return{isValidDate:!1,isInvalid:!j(o),isWeekend:t?.disableWeekends&&w(o),isDisabled:t?.disabled&&W(o,t.disabled),isBefore:a,isAfter:n};if(a||n)return{isValidDate:!1,isBefore:a,isAfter:n}},Ie=(o,t,a)=>{var n;const V=a?.fromDate&&o&&h(a?.fromDate,o)>0,k=a?.toDate&&o&&h(o,a?.toDate)>0,d=(n=t&&h(t,o)>0)!==null&&n!==void 0?n:!1;if(j(o)&&!(a?.disableWeekends&&w(o))&&!(a?.disabled&&W(o,a.disabled)))return{isValidDate:!1,isInvalid:!j(o),isWeekend:a?.disableWeekends&&w(o),isDisabled:a?.disabled&&W(o,a.disabled),isBefore:V,isAfter:k,isBeforeFrom:d};if(V||k||d)return{isValidDate:!1,isBefore:V,isAfter:k,isBeforeFrom:d}},oe=(o,t)=>{if(!o||!o?.from)return te({isEmpty:!0,isValidDate:!1},{isEmpty:!0,isValidDate:!1});const a=Te(o.from,t),n=o.to?Ie(o.to,o.from,t):{isEmpty:!0,isValidDate:!1};return te(Object.assign({},a),Object.assign({},n))},Pe=(o={})=>{const{locale:t,defaultSelected:a,today:n=new Date,fromDate:V,toDate:k,disabled:d,disableWeekends:q,onRangeChange:_,inputFormat:v,onValidate:B,defaultMonth:p,allowTwoDigitYear:O=!0}=o,[M,A]=D.useState(null),y=Re(),f=t?ge(t):y,[i,L]=D.useState(a),[J,P]=D.useState(i?i?.from:p??n),[s,K]=D.useState(i??{from:void 0,to:void 0}),[Q,N]=D.useState(i?.from?b(i.from,f,"date",v):""),[u,m]=D.useState(i?.to?b(i.to,f,"date",v):""),[c,U]=D.useState(oe(s,o)),[me,X]=D.useState(!1),R=e=>{_?.(e),K(e)},S=(e={},l={})=>{const r=te(e,l);U(r),B?.(r)},ue=()=>{R(i??{from:void 0,to:void 0}),P(i?i?.from:p??n),U(oe(i??{from:void 0,to:void 0},o)),N(i?.from?b(i.from,f,"date",v):""),m(i?.to?b(i.to,f,"date",v):""),L(a)},fe=e=>{R(e),N(e?.from?b(e.from,f,"date",v):""),m(e?.to?b(e?.to,f,"date",v):""),U(oe(e,o))},ae=(e,l)=>{if(e.target.readOnly)return;const r=z(e.target.value,n,f,"date",O);if(j(r)){l===I.FROM?N(b(r,f,"date",v)):m(b(r,f,"date",v));const g=V&&r&&h(V,r)>0,x=k&&r&&h(r,k)>0;!g&&!x&&P(r)}},ie=(e,l)=>{const r=z(e.target.value,n,f,"date",O);j(r)&&(l===I.FROM?N(b(r,f,"date",v)):l===I.TO&&m(b(r,f,"date",v)))},Z=e=>j(e)&&!(q&&w(e))&&!(d&&W(e,d)),ce=e=>{e?.from&&e?.to&&(ke(e.from,e.to)||(X(!1),M?.focus())),N(e?.from?b(e.from,f,"date",v):""),m(e?.to?b(e.to,f,"date",v):""),R({from:e?.from,to:e?.to}),S({isValidDate:!!e?.from,isEmpty:!e?.from},{isValidDate:!!e?.to,isEmpty:!e?.to})},ve=(e="",l,r=!1,g=!1)=>{if(N(e),!Z(l)){R(Object.assign(Object.assign({},s),{from:void 0})),S({isEmpty:!e,isValidDate:!1,isInvalid:!j(l),isWeekend:q&&w(l),isDisabled:d&&W(l,d),isBefore:r,isAfter:g},c.to);return}if(r||g){R(Object.assign(Object.assign({},s),{from:void 0})),S({isValidDate:!1,isBefore:r,isAfter:g},c.to);return}if(s?.to&&h(l,s?.to)>0){R({to:l,from:l}),m(b(l,f,"date",v)),P(l),S();return}if(u&&!s?.to){const x=z(u,n,f,"date",O);if(Z(x)){R({from:l,to:x}),P(l),S();return}}R(Object.assign(Object.assign({},s),{from:l})),S({},c.to),P(l)},pe=(e="",l,r=!1,g=!1)=>{if(m(e),!Z(l)){R({from:s?.from,to:void 0}),S(c.from,{isEmpty:!e,isValidDate:!1,isInvalid:!j(l),isWeekend:q&&w(l),isDisabled:d&&W(l,d),isBefore:r,isAfter:g});return}if(r||g){R({from:s?.from,to:void 0}),S(c.from,{isValidDate:!1,isBefore:r,isAfter:g});return}if(s?.from&&h(s?.from,l)>0){R({from:s?.from,to:void 0}),S(c.from,{isValidDate:!1,isBeforeFrom:!0});return}R({from:s?.from,to:l}),S(c.from,{}),P(l)},se=(e,l)=>{const r=z(e.target.value,n,f,"date",O),g=V&&h(V,r)>0,x=k&&h(r,k)>0;return l===I.FROM?ve(e.target.value,r,g,x):pe(e.target.value,r,g,x)};return{datepickerProps:{month:J,onMonthChange:P,onSelect:ce,selected:s,locale:t,fromDate:V,toDate:k,today:n,mode:"range",open:me,onOpenToggle:()=>X(e=>!e),onClose:()=>{X(!1),M?.focus()},disabled:d,disableWeekends:q},fromInputProps:{onChange:e=>se(e,I.FROM),onFocus:e=>ae(e,I.FROM),onBlur:e=>ie(e,I.FROM),value:Q,setAnchorRef:A},toInputProps:{onChange:e=>se(e,I.TO),onFocus:e=>ae(e,I.TO),onBlur:e=>ie(e,I.TO),value:u,setAnchorRef:A},reset:ue,selectedRange:s,setSelected:fe}};F.extend(Ve);const de=({fomName:o,tomName:t,label:a,validate:n=[],disabled:V=!1,isReadOnly:k=!1,onChange:d,fromDate:q,toDate:_,isEdited:v})=>{const{formState:{errors:B}}=be(),{field:p}=ne({name:o,rules:{validate:D.useMemo(()=>le(n),[n])}}),{field:O}=ne({name:t,rules:{validate:D.useMemo(()=>le(n),[n])}}),M=p.value?F(p.value,T,!0).format(E):"",[A,y]=D.useState(M),f=O.value?F(O.value,T,!0).format(E):"",[i,L]=D.useState(f),{datepickerProps:J,toInputProps:P,fromInputProps:s}=Pe({onRangeChange:u=>{const m=u?.from?F(u?.from).format(T):void 0;d&&d(m),p.onChange(m),y(F(m,T,!0).format(E));const c=u?.to?F(u?.to).format(T):void 0;d&&d(c),O.onChange(c),L(c?F(c,T,!0).format(E):"")}}),K=D.useCallback(u=>{const m=F(u.target.value,E,!0).format(T),c=m!=="Invalid Date";y(u.target.value),d&&d(c?m:u.target.value),p.onChange(c?m:u.target.value)},[y,d,p]),Q=D.useCallback(u=>{const m=F(u.target.value,E,!0).format(T),c=m!=="Invalid Date";L(u.target.value),d&&d(c?m:u.target.value),O.onChange(c?m:u.target.value)},[L,d,O]);if(k){const u=p.value?F(p.value,T,!0).format(E):void 0,m=O.value?F(O.value,T,!0).format(E):void 0;return C.jsx(Oe,{label:a,value:`${u} - ${m||""}`,isEdited:v})}const N={...J,fromDate:q,toDate:_};return C.jsx(ee,{...N,children:C.jsxs(Fe,{gap:"space-8",children:[C.jsx(Se,{size:"small",children:a}),C.jsxs(he,{gap:"space-16",children:[C.jsx(ee.Input,{...s,onChange:K,value:A,size:"small",hideLabel:!0,label:"","aria-label":"Fra dato",disabled:V,error:re(B,o)}),C.jsx(ee.Input,{...P,onChange:Q,value:i,size:"small",label:"","aria-label":"Til dato",hideLabel:!0,disabled:V,error:re(B,t)})]})]})})};de.__docgenInfo={description:"",methods:[],displayName:"RhfRangepicker",props:{fomName:{required:!0,tsType:{name:"string"},description:""},tomName:{required:!0,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},validate:{required:!1,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"((value: string) => ValidationReturnType)[]"},description:"",defaultValue:{value:"[]",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isReadOnly:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: any) => void",signature:{arguments:[{type:{name:"any"},name:"value"}],return:{name:"void"}}},description:""},fromDate:{required:!1,tsType:{name:"Date"},description:""},toDate:{required:!1,tsType:{name:"Date"},description:""},isEdited:{required:!1,tsType:{name:"boolean"},description:""},size:{required:!1,tsType:{name:"union",raw:"'medium' | 'small'",elements:[{name:"literal",value:"'medium'"},{name:"literal",value:"'small'"}]},description:""}}};const ho={component:de,tags:["autodocs"],decorators:De({fomPre:"2022-10-22",tomPre:"2022-10-27"})},H={args:{fomName:"fom",tomName:"tom",label:"Dette er en rangepicker"}},$={args:{fomName:"fom",tomName:"tom",label:"Dette er en rangepicker med disabled datoer",fromDate:new Date("2022-10-10"),toDate:new Date("2022-10-14")}},G={args:{label:"Dette er en rangepicker der verdi er valgt",fomName:"fomPre",tomName:"tomPre"}},Y={args:{label:"Dette er en rangepicker som er readonly",fomName:"fomPre",tomName:"tomPre",isReadOnly:!0,isEdited:!0}};H.parameters={...H.parameters,docs:{...H.parameters?.docs,source:{originalSource:`{
  args: {
    fomName: 'fom',
    tomName: 'tom',
    label: 'Dette er en rangepicker'
  }
}`,...H.parameters?.docs?.source}}};$.parameters={...$.parameters,docs:{...$.parameters?.docs,source:{originalSource:`{
  args: {
    fomName: 'fom',
    tomName: 'tom',
    label: 'Dette er en rangepicker med disabled datoer',
    fromDate: new Date('2022-10-10'),
    toDate: new Date('2022-10-14')
  }
}`,...$.parameters?.docs?.source}}};G.parameters={...G.parameters,docs:{...G.parameters?.docs,source:{originalSource:`{
  args: {
    label: 'Dette er en rangepicker der verdi er valgt',
    fomName: 'fomPre',
    tomName: 'tomPre'
  }
}`,...G.parameters?.docs?.source}}};Y.parameters={...Y.parameters,docs:{...Y.parameters?.docs,source:{originalSource:`{
  args: {
    label: 'Dette er en rangepicker som er readonly',
    fomName: 'fomPre',
    tomName: 'tomPre',
    isReadOnly: true,
    isEdited: true
  }
}`,...Y.parameters?.docs?.source}}};const So=["Default","MedDisabledDatoer","MedVerdi","ReadOnly"];export{H as Default,$ as MedDisabledDatoer,G as MedVerdi,Y as ReadOnly,So as __namedExportsOrder,ho as default};
