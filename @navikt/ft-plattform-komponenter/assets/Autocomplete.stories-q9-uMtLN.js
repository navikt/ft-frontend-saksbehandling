var Y=Object.defineProperty;var ee=(n,s,t)=>s in n?Y(n,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[s]=t;var N=(n,s,t)=>(ee(n,typeof s!="symbol"?s+"":s,t),t);import{j as v}from"./jsx-runtime-Q5kDp4vx.js";import{r as i,R as u}from"./index-DogsOklH.js";import{c as O,t as te}from"./util-CwfUVSV9.js";import{u as ne,B as oe,m as se,o as ae}from"./Button-DHvxZYVn.js";import{u as K}from"./useId-8IKWkfiS.js";import{L as le}from"./Label-ELLa8RCZ.js";import{B as ie}from"./BodyShort-1pW_YIIv.js";var re=function(n,s){var t={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&s.indexOf(e)<0&&(t[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,e=Object.getOwnPropertySymbols(n);o<e.length;o++)s.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(n,e[o])&&(t[e[o]]=n[e[o]]);return t};const ue=i.forwardRef((n,s)=>{var{title:t,titleId:e}=n,o=re(n,["title","titleId"]);let a=K();return a=t?e||"title-"+a:void 0,i.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",focusable:!1,role:"img",ref:s,"aria-labelledby":a},o),t?i.createElement("title",{id:a},t):null,i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.5 3.25a7.25 7.25 0 1 0 4.569 12.88l5.411 5.41a.75.75 0 1 0 1.06-1.06l-5.41-5.411A7.25 7.25 0 0 0 10.5 3.25ZM4.75 10.5a5.75 5.75 0 1 1 11.5 0 5.75 5.75 0 0 1-11.5 0Z",fill:"currentColor"}))}),T=ue;var ce=function(n,s){var t={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&s.indexOf(e)<0&&(t[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,e=Object.getOwnPropertySymbols(n);o<e.length;o++)s.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(n,e[o])&&(t[e[o]]=n[e[o]]);return t};const de=i.forwardRef((n,s)=>{var{title:t,titleId:e}=n,o=ce(n,["title","titleId"]);let a=K();return a=t?e||"title-"+a:void 0,i.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",focusable:!1,role:"img",ref:s,"aria-labelledby":a},o),t?i.createElement("title",{id:a},t):null,i.createElement("path",{d:"M6.53 5.47a.75.75 0 0 0-1.06 1.06L10.94 12l-5.47 5.47a.75.75 0 1 0 1.06 1.06L12 13.06l5.47 5.47a.75.75 0 1 0 1.06-1.06L13.06 12l5.47-5.47a.75.75 0 0 0-1.06-1.06L12 10.94 6.53 5.47Z",fill:"currentColor"}))}),me=de;var ge=function(n,s){var t={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&s.indexOf(e)<0&&(t[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,e=Object.getOwnPropertySymbols(n);o<e.length;o++)s.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(n,e[o])&&(t[e[o]]=n[e[o]]);return t};const pe=i.forwardRef((n,s)=>{var{className:t,size:e,spacing:o,as:a="p"}=n,r=ge(n,["className","size","spacing","as"]);return u.createElement(a,Object.assign({},r,{ref:s,className:O("navds-error-message","navds-label",t,te({spacing:o}),{"navds-label--small":e==="small"})}))}),he=pe,ve=i.createContext(null),fe=(n,s)=>{var t,e,o;const{size:a,error:r,errorId:f}=n,l=i.useContext(ve),g=ne(),b=(t=n.id)!==null&&t!==void 0?t:`${s}-${g}`,_=f??`${s}-error-${g}`,c=`${s}-description-${g}`,y=(l==null?void 0:l.disabled)||n.disabled,d=((l==null?void 0:l.readOnly)||n.readOnly)&&!y||void 0,C=!y&&!d&&!!(r||l!=null&&l.error),p=!y&&!d&&!!r&&typeof r!="boolean",h=Object.assign({},C?{"aria-invalid":!0}:{});return n!=null&&n.required,{showErrorMsg:p,hasError:C,errorId:_,inputDescriptionId:c,size:(e=a??(l==null?void 0:l.size))!==null&&e!==void 0?e:"medium",readOnly:d,inputProps:Object.assign(Object.assign({id:b},h),{"aria-describedby":O(n["aria-describedby"],{[c]:!!(n!=null&&n.description)&&typeof(n==null?void 0:n.description)=="string",[_]:p,[(o=l==null?void 0:l.errorId)!==null&&o!==void 0?o:""]:C&&!!(l!=null&&l.error)})||void 0,disabled:y})}},Z=i.createContext(null);var be=function(n,s){var t={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&s.indexOf(e)<0&&(t[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,e=Object.getOwnPropertySymbols(n);o<e.length;o++)s.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(n,e[o])&&(t[e[o]]=n[e[o]]);return t};const _e=i.forwardRef((n,s)=>{var t,{className:e,children:o,disabled:a,onClick:r}=n,f=be(n,["className","children","disabled","onClick"]);const l=i.useContext(Z);if(l===null)return console.warn("<Search.Button> has to be wrapped in <Search />"),null;const{size:g,variant:b,handleClick:_}=l;return u.createElement(oe,Object.assign({type:"submit"},f,{ref:s,size:g,variant:b==="secondary"?"secondary":"primary",className:O("navds-search__button-search",e),disabled:(t=l==null?void 0:l.disabled)!==null&&t!==void 0?t:a,onClick:c=>{_(),r==null||r(c)},icon:u.createElement(T,Object.assign({},o?{"aria-hidden":!0}:{title:"Søk"}))}),o)}),G=_e;var ye=function(n,s){var t={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&s.indexOf(e)<0&&(t[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,e=Object.getOwnPropertySymbols(n);o<e.length;o++)s.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(n,e[o])&&(t[e[o]]=n[e[o]]);return t};const H=i.forwardRef((n,s)=>{const{inputProps:t,size:e="medium",inputDescriptionId:o,errorId:a,showErrorMsg:r,hasError:f}=fe(n,"searchfield"),{className:l,hideLabel:g=!0,label:b,description:_,value:c,clearButtonLabel:y,onClear:d,clearButton:C=!0,children:p,variant:h="primary",defaultValue:j,onChange:B,onSearchClick:E,htmlSize:V}=n,W=ye(n,["className","hideLabel","label","description","value","clearButtonLabel","onClear","clearButton","children","variant","defaultValue","onChange","onSearchClick","htmlSize"]),x=i.useRef(null),X=i.useMemo(()=>se([x,s]),[s]),[D,J]=i.useState(j??""),$=i.useCallback(m=>{c===void 0&&J(m),B==null||B(m)},[B,c]),q=i.useCallback(m=>{var S,w;d==null||d(m),$(""),x.current&&((w=(S=x.current)===null||S===void 0?void 0:S.focus)===null||w===void 0||w.call(S))},[$,d]),Q=()=>{E==null||E(`${c??D}`)};return u.createElement("div",{onKeyDown:m=>{var S,w;m.key==="Escape"&&(!((S=x.current)===null||S===void 0)&&S.value&&((w=x.current)===null||w===void 0?void 0:w.value)!==""&&m.preventDefault(),q({trigger:"Escape",event:m}))},className:O(l,"navds-form-field",`navds-form-field--${e}`,"navds-search",{"navds-search--error":f,"navds-search--disabled":!!t.disabled,"navds-search--with-size":!!V})},u.createElement(le,{htmlFor:t.id,size:e,className:O("navds-form-field__label",{"navds-sr-only":g})},b),!!_&&u.createElement(ie,{className:O("navds-form-field__description",{"navds-sr-only":g}),id:o,size:e,as:"div"},_),u.createElement("div",{className:"navds-search__wrapper"},u.createElement("div",{className:"navds-search__wrapper-inner"},h==="simple"&&u.createElement(T,{"aria-hidden":!0,className:"navds-search__search-icon"}),u.createElement("input",Object.assign({ref:X},ae(W,["error","errorId","size","readOnly"]),t,{value:c??D,onChange:m=>$(m.target.value),type:"search",role:"searchbox",className:O(l,"navds-search__input",`navds-search__input--${h}`,"navds-text-field__input","navds-body-short",`navds-body-short--${e}`)},V?{size:Number(V)}:{})),(c??D)&&C&&u.createElement("button",{type:"button",onClick:m=>q({trigger:"Click",event:m}),className:"navds-search__button-clear"},u.createElement("span",{className:"navds-sr-only"},y||"Tøm"),u.createElement(me,{"aria-hidden":!0}))),u.createElement(Z.Provider,{value:{size:e,disabled:t.disabled,variant:h,handleClick:Q}},p||h!=="simple"&&u.createElement(G,null))),u.createElement("div",{className:"navds-form-field__error",id:a,"aria-relevant":"additions removals","aria-live":"polite"},r&&u.createElement(he,{size:e},n.error)))});H.Button=G;const F=H,Se="_autocompleteSuggestion__substring_mf7v0_1",Ce="_autocompleteSuggestion__substring_mf7v0_1",we="_autocompleteSuggestion__inner_mf7v0_4",Oe="_autocompleteSuggestion__inner_mf7v0_4",xe="_autocompleteSuggestion--active_mf7v0_12",I={autocompleteSuggestion__substring:Se,autocompleteSuggestionSubstring:Ce,autocompleteSuggestion__inner:we,autocompleteSuggestionInner:Oe,"autocompleteSuggestion--active":"_autocompleteSuggestion--active_mf7v0_12",autocompleteSuggestionActive:xe};class A extends u.Component{constructor(s){super(s),this.state={value:s.value},this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}onClick(){const{onClick:s}=this.props,{value:t}=this.state;s(t)}onMouseMove(){const{setSuggestionIndex:s,index:t}=this.props;s(t)}render(){const{match:s,active:t,avoidBlur:e,id:o}=this.props,{value:a}=this.state.value,r=a.toLowerCase().startsWith(s.toLowerCase());return v.jsx("li",{id:o,role:"option","aria-selected":t,onClick:this.onClick,onMouseMove:this.onMouseMove,onFocus:e,onMouseDown:e,onKeyDown:e,className:"autocompleteSuggestion typo-normal",children:r?v.jsxs("span",{className:`${I.autocompleteSuggestion__inner} ${t?I["autocompleteSuggestion--active"]:""}`,children:[a.substring(0,s.length),v.jsx("span",{className:I.autocompleteSuggestion__substring,children:a.substring(s.length)})]}):v.jsx("span",{className:`${I.autocompleteSuggestion__inner} ${t?I["autocompleteSuggestion--active"]:""}`,children:a})})}}try{A.displayName="AutocompleteSuggestion",A.__docgenInfo={description:"",displayName:"AutocompleteSuggestion",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"(value: Suggestion) => void"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"Suggestion"}},match:{defaultValue:null,description:"",name:"match",required:!0,type:{name:"string"}},active:{defaultValue:null,description:"",name:"active",required:!0,type:{name:"boolean"}},setSuggestionIndex:{defaultValue:null,description:"",name:"setSuggestionIndex",required:!0,type:{name:"(index: number) => void"}},avoidBlur:{defaultValue:null,description:"",name:"avoidBlur",required:!0,type:{name:"() => void"}}}}}catch{}const Ie="_autocomplete_9dlnp_1",ke="_autocomplete__suggestions_9dlnp_27",Be="_autocomplete__suggestions_9dlnp_27",je="_autocomplete__suggestions--hidden_9dlnp_31",M={autocomplete:Ie,autocomplete__suggestions:ke,autocompleteSuggestions:Be,"autocomplete__suggestions--hidden":"_autocomplete__suggestions--hidden_9dlnp_31",autocompleteSuggestionsHidden:je};let L=class extends u.Component{constructor(t){super(t);N(this,"input");N(this,"inputRef");this.state={activeSuggestionIndex:-1,hasFocus:!1,shouldShowSuggestions:!0,setAriaActiveDescendant:!1,shouldBlur:!0,blurDelay:null},this.inputRef=e=>{this.input=e},this.onChange=this.onChange.bind(this),this.onBlur=this.onBlur.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onFocus=this.onFocus.bind(this),this.setValue=this.setValue.bind(this),this.setSuggestionIndex=this.setSuggestionIndex.bind(this),this.avoidBlur=this.avoidBlur.bind(this),this.clearBlurDelay=this.clearBlurDelay.bind(this),this.onSearchButtonClick=this.onSearchButtonClick.bind(this)}componentWillUnmount(){const{blurDelay:t}=this.state;t&&(clearTimeout(t),this.setState({blurDelay:null}))}onChange(t){const{onChange:e}=this.props;this.setState({activeSuggestionIndex:-1,shouldShowSuggestions:!0}),e(t)}onSearchButtonClick(t){const{onSearchButtonClick:e}=this.props;t.preventDefault(),e&&e()}onKeyDown(t){const{shouldShowSuggestions:e}=this.state;let{activeSuggestionIndex:o}=this.state;const{suggestions:a}=this.props,r=o>-1;switch(this.setState({setAriaActiveDescendant:t.keyCode===38||t.keyCode===40}),t.keyCode){case 9:r&&e&&this.setValue(a[o]);break;case 13:r&&e?(t.preventDefault(),this.setValue(a[o])):e&&a.length===1?this.setValue(a[0]):this.setState({shouldShowSuggestions:!1});break;case 27:e&&a.length>0&&(t.preventDefault(),this.setState({shouldShowSuggestions:!1}));break;case 38:e&&(t.preventDefault(),o=o-1===-2?-1:o-1,this.setState({activeSuggestionIndex:o}));break;case 40:e&&(t.preventDefault(),o=o+1===a.length?a.length-1:o+1,this.setState({activeSuggestionIndex:o}));break}}onFocus(){this.setState({hasFocus:!0,activeSuggestionIndex:-1})}onBlur(){const t=setTimeout(()=>{const{shouldBlur:o}=this.state;o&&this.setState({hasFocus:!1})},10);this.setState({blurDelay:t});const{onBlur:e}=this.props;e&&e()}setSuggestionIndex(t){this.setState({activeSuggestionIndex:t}),this.clearBlurDelay()}setValue(t){this.setState({shouldShowSuggestions:!1,activeSuggestionIndex:-1},()=>{this.inputRef.focus()}),this.clearBlurDelay();const{onSelect:e}=this.props;e(t)}avoidBlur(){this.setState({shouldBlur:!1})}clearBlurDelay(){const{blurDelay:t}=this.state;t&&(clearTimeout(t),this.setState({blurDelay:null})),this.setState({shouldBlur:!0})}render(){const{suggestions:t,id:e,ariaLabel:o,placeholder:a,value:r,name:f,shouldFocusOnMount:l,isLoading:g}=this.props,{activeSuggestionIndex:b,setAriaActiveDescendant:_,hasFocus:c,shouldShowSuggestions:y}=this.state,d=c&&y&&t.length>0,C=_&&b>-1?`${e}-item-${b}`:void 0;return v.jsxs("div",{className:`${M.autocomplete} autocomplete`,"aria-expanded":d,"aria-owns":`${e}-suggestions`,"aria-haspopup":"listbox",children:[v.jsx(F,{variant:"primary",id:e,name:f,type:"search","aria-label":o,"aria-autocomplete":"list","aria-controls":`${e}-suggestions`,"aria-activedescendant":C,placeholder:a,value:r,autoComplete:"off",onChange:this.onChange,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onFocus:this.onFocus,ref:p=>{this.inputRef=p},className:"typo-normal",autoFocus:l,label:o,hideLabel:!0,children:v.jsx(F.Button,{loading:g,onClick:this.onSearchButtonClick})}),v.jsx("ul",{id:`${e}-suggestions`,role:"listbox",className:d?M.autocomplete__suggestions:M["autocomplete__suggestions--hidden"],children:d&&t.map((p,h)=>v.jsx(A,{id:`${e}-item-${h}`,index:h,value:p,match:r,active:h===b,onClick:this.setValue,setSuggestionIndex:this.setSuggestionIndex,avoidBlur:this.avoidBlur},p.key))})]})}};const U=L;try{L.displayName="Autocomplete",L.__docgenInfo={description:"",displayName:"Autocomplete",props:{onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(value: Suggestion) => void"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"(() => void)"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!0,type:{name:"string"}},suggestions:{defaultValue:null,description:"",name:"suggestions",required:!0,type:{name:"Suggestion[]"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},ariaLabel:{defaultValue:null,description:"",name:"ariaLabel",required:!0,type:{name:"string"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},shouldFocusOnMount:{defaultValue:null,description:"",name:"shouldFocusOnMount",required:!1,type:{name:"boolean"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},onSearchButtonClick:{defaultValue:null,description:"",name:"onSearchButtonClick",required:!1,type:{name:"(() => void)"}}}}}catch{}const Pe={title:"Autocomplete",component:U},Ee=()=>v.jsx(U,{value:"Verdi",onChange:n=>n,ariaLabel:"ariaLabel",id:"autocompleteId",placeholder:"",suggestions:[{key:"testItem",value:"Test Item"}],onSelect:()=>console.log("Selected")}),k=Ee.bind({});k.args={};var P,R,z;k.parameters={...k.parameters,docs:{...(P=k.parameters)==null?void 0:P.docs,source:{originalSource:`() => <AutocompleteComponent value="Verdi" onChange={v => v} ariaLabel="ariaLabel" id="autocompleteId" placeholder="" suggestions={[{
  key: 'testItem',
  value: 'Test Item'
}]} onSelect={() => console.log('Selected')} />`,...(z=(R=k.parameters)==null?void 0:R.docs)==null?void 0:z.source}}};const Re=["Autocomplete"];export{k as Autocomplete,Re as __namedExportsOrder,Pe as default};
