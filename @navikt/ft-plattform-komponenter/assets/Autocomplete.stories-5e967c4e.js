var ie=Object.defineProperty;var re=(t,s,o)=>s in t?ie(t,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[s]=o;var L=(t,s,o)=>(re(t,typeof s!="symbol"?s+"":s,o),o);import{j as y}from"./jsx-runtime-5926aa06.js";import{r as u,R as i}from"./index-ebeaab24.js";import{c as b}from"./clsx.m-1229b3e0.js";import{o as K,B as ue,m as ce,u as de,a as me}from"./Loader-358c8f2d.js";import{L as W}from"./Label-63b3f2b2.js";import{B as Z}from"./BodyShort-050c613e.js";import{u as G}from"./useId-e957bc34.js";var ge=globalThis&&globalThis.__rest||function(t,s){var o={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&s.indexOf(e)<0&&(o[e]=t[e]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,e=Object.getOwnPropertySymbols(t);n<e.length;n++)s.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(t,e[n])&&(o[e[n]]=t[e[n]]);return o};const pe=u.forwardRef((t,s)=>{var{title:o,titleId:e}=t,n=ge(t,["title","titleId"]);let a=G();return a=o?e||"title-"+a:void 0,u.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",focusable:!1,role:"img",ref:s,"aria-labelledby":a},n),o?u.createElement("title",{id:a},o):null,u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.75 10.5a5.75 5.75 0 1 1 11.5 0 5.75 5.75 0 0 1-11.5 0Zm5.75-7.25a7.25 7.25 0 1 0 4.569 12.88l5.411 5.41a.75.75 0 1 0 1.06-1.06l-5.41-5.411A7.25 7.25 0 0 0 10.5 3.25Z",fill:"currentColor"}))}),H=pe;var he=globalThis&&globalThis.__rest||function(t,s){var o={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&s.indexOf(e)<0&&(o[e]=t[e]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,e=Object.getOwnPropertySymbols(t);n<e.length;n++)s.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(t,e[n])&&(o[e[n]]=t[e[n]]);return o};const ve=u.forwardRef((t,s)=>{var{title:o,titleId:e}=t,n=he(t,["title","titleId"]);let a=G();return a=o?e||"title-"+a:void 0,u.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",focusable:!1,role:"img",ref:s,"aria-labelledby":a},n),o?u.createElement("title",{id:a},o):null,u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.53 5.47a.75.75 0 0 0-1.06 1.06L10.94 12l-5.47 5.47a.75.75 0 1 0 1.06 1.06L12 13.06l5.47 5.47a.75.75 0 1 0 1.06-1.06L13.06 12l5.47-5.47a.75.75 0 0 0-1.06-1.06L12 10.94 6.53 5.47Z",fill:"currentColor"}))}),fe=ve;var be=globalThis&&globalThis.__rest||function(t,s){var o={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&s.indexOf(e)<0&&(o[e]=t[e]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,e=Object.getOwnPropertySymbols(t);n<e.length;n++)s.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(t,e[n])&&(o[e[n]]=t[e[n]]);return o};const _e=u.forwardRef((t,s)=>{var{className:o,size:e,spacing:n,as:a="p"}=t,r=be(t,["className","size","spacing","as"]);return i.createElement(a,Object.assign({},r,{ref:s,className:b("navds-error-message","navds-label",o,{"navds-label--small":e==="small","navds-typo--spacing":!!n})}))}),X=_e,ye=t=>{const s=Y(t,"fieldset"),{inputProps:o}=s;return Object.assign(Object.assign({},s),{inputProps:{"aria-invalid":o["aria-invalid"],"aria-describedby":o["aria-describedby"]}})};var Se=globalThis&&globalThis.__rest||function(t,s){var o={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&s.indexOf(e)<0&&(o[e]=t[e]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,e=Object.getOwnPropertySymbols(t);n<e.length;n++)s.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(t,e[n])&&(o[e[n]]=t[e[n]]);return o};const M=i.createContext(null);u.forwardRef((t,s)=>{var o,e,n;const{inputProps:a,errorId:r,showErrorMsg:p,hasError:l,size:m,inputDescriptionId:v}=ye(t),d=u.useContext(M),{children:c,className:_,errorPropagation:g=!0,legend:O,description:S,hideLegend:f}=t,C=Se(t,["children","className","errorPropagation","legend","description","hideLegend"]);return i.createElement(M.Provider,{value:{error:g?(o=t.error)!==null&&o!==void 0?o:d==null?void 0:d.error:void 0,errorId:b({[r]:p,[(e=d==null?void 0:d.errorId)!==null&&e!==void 0?e:""]:!!(d!=null&&d.error)}),size:m,disabled:(n=t.disabled)!==null&&n!==void 0?n:!1}},i.createElement("fieldset",Object.assign({},K(C,["errorId","error","size"]),a,{ref:s,className:b(_,"navds-fieldset",`navds-fieldset--${m}`,{"navds-fieldset--error":l})}),i.createElement(W,{size:m,as:"legend",className:b("navds-fieldset__legend",{"navds-sr-only":!!f})},O),!!S&&i.createElement(Z,{className:b("navds-fieldset__description",{"navds-sr-only":!!f}),id:v,size:m??"medium",as:"div"},t.description),c,i.createElement("div",{id:r,"aria-relevant":"additions removals","aria-live":"polite",className:"navds-fieldset__error"},p&&i.createElement(X,{size:m},t.error))))});var Oe=globalThis&&globalThis.__rest||function(t,s){var o={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&s.indexOf(e)<0&&(o[e]=t[e]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,e=Object.getOwnPropertySymbols(t);n<e.length;n++)s.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(t,e[n])&&(o[e[n]]=t[e[n]]);return o};const Ce=u.forwardRef((t,s)=>{var o,{className:e,children:n,disabled:a,onClick:r}=t,p=Oe(t,["className","children","disabled","onClick"]);const l=u.useContext(J);if(l===null)return console.warn("<Search.Button> has to be wrapped in <Search />"),null;const{size:m,variant:v,handleClick:d}=l;return i.createElement(ue,Object.assign({type:"submit"},p,{ref:s,size:m,variant:v==="secondary"?"secondary":"primary",className:b("navds-search__button-search",e),disabled:(o=l==null?void 0:l.disabled)!==null&&o!==void 0?o:a,onClick:c=>{d(),r==null||r(c)},icon:i.createElement(H,Object.assign({},n?{"aria-hidden":!0}:{title:"Søk"}))}),n)}),U=Ce;var we=globalThis&&globalThis.__rest||function(t,s){var o={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&s.indexOf(e)<0&&(o[e]=t[e]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,e=Object.getOwnPropertySymbols(t);n<e.length;n++)s.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(t,e[n])&&(o[e[n]]=t[e[n]]);return o};const J=i.createContext(null),Q=u.forwardRef((t,s)=>{const{inputProps:o,size:e="medium",inputDescriptionId:n,errorId:a,showErrorMsg:r,hasError:p}=Y(t,"searchfield"),{className:l,hideLabel:m=!0,label:v,description:d,value:c,clearButtonLabel:_,onClear:g,clearButton:O=!0,children:S,variant:f="primary",defaultValue:C,onChange:I,onSearchClick:j,htmlSize:k}=t,te=we(t,["className","hideLabel","label","description","value","clearButtonLabel","onClear","clearButton","children","variant","defaultValue","onChange","onSearchClick","htmlSize"]),N=u.useRef(null),oe=u.useMemo(()=>ce([N,s]),[s]),[ne,se]=u.useState(null),[$,ae]=u.useState(C??""),V=u.useCallback(h=>{c===void 0&&ae(h),I==null||I(h)},[I,c]),D=u.useCallback(h=>{var E,P;g==null||g(h),V(""),N.current&&((P=(E=N.current)===null||E===void 0?void 0:E.focus)===null||P===void 0||P.call(E))},[V,g]);de("keydown",u.useCallback(h=>{h.key==="Escape"&&(h.preventDefault(),D({trigger:"Escape",event:h}))},[D]),ne);const le=()=>{j==null||j(`${c??$}`)};return i.createElement("div",{ref:se,className:b(l,"navds-form-field",`navds-form-field--${e}`,"navds-search",{"navds-search--error":p,"navds-search--disabled":!!o.disabled,"navds-search--with-size":!!k})},i.createElement(W,{htmlFor:o.id,size:e,className:b("navds-form-field__label",{"navds-sr-only":m})},v),!!d&&i.createElement(Z,{className:b("navds-form-field__description",{"navds-sr-only":m}),id:n,size:e,as:"div"},d),i.createElement("div",{className:"navds-search__wrapper"},i.createElement("div",{className:"navds-search__wrapper-inner"},f==="simple"&&i.createElement(H,{"aria-hidden":!0,className:"navds-search__search-icon"}),i.createElement("input",Object.assign({ref:oe},K(te,["error","errorId","size"]),o,{value:c??$,onChange:h=>V(h.target.value),type:"search",role:"searchbox",className:b(l,"navds-search__input",`navds-search__input--${f}`,"navds-text-field__input","navds-body-short",`navds-body-${e}`)},k?{size:Number(k)}:{})),(c??$)&&O&&i.createElement("button",{type:"button",onClick:h=>D({trigger:"Click",event:h}),className:"navds-search__button-clear"},i.createElement("span",{className:"navds-sr-only"},_||"Tøm"),i.createElement(fe,{"aria-hidden":!0}))),i.createElement(J.Provider,{value:{size:e,disabled:o.disabled,variant:f,handleClick:le}},S||f!=="simple"&&i.createElement(U,null))),i.createElement("div",{className:"navds-form-field__error",id:a,"aria-relevant":"additions removals","aria-live":"polite"},r&&i.createElement(X,{size:e},t.error)))});Q.Button=U;const z=Q,Y=(t,s)=>{var o,e,n;const{size:a,error:r,errorId:p}=t,l=u.useContext(M),m=me(),v=(o=t.id)!==null&&o!==void 0?o:`${s}-${m}`,d=p??`${s}-error-${m}`,c=`${s}-description-${m}`,_=(l==null?void 0:l.disabled)||t.disabled,g=!_&&!!(r||l!=null&&l.error),O=!_&&!!r&&typeof r!="boolean";return{showErrorMsg:O,hasError:g,errorId:d,inputDescriptionId:c,size:(e=a??(l==null?void 0:l.size))!==null&&e!==void 0?e:"medium",inputProps:{id:v,"aria-invalid":g,"aria-describedby":b(t["aria-describedby"],{[c]:!!(t!=null&&t.description)&&typeof(t==null?void 0:t.description)=="string",[d]:O,[(n=l==null?void 0:l.errorId)!==null&&n!==void 0?n:""]:g&&!!(l!=null&&l.error)})||void 0,disabled:_}}},xe="_autocompleteSuggestion__substring_mf7v0_1",Ie="_autocompleteSuggestion__substring_mf7v0_1",Ee="_autocompleteSuggestion__inner_mf7v0_4",Be="_autocompleteSuggestion__inner_mf7v0_4",je="_autocompleteSuggestion--active_mf7v0_12",w={autocompleteSuggestion__substring:xe,autocompleteSuggestionSubstring:Ie,autocompleteSuggestion__inner:Ee,autocompleteSuggestionInner:Be,"autocompleteSuggestion--active":"_autocompleteSuggestion--active_mf7v0_12",autocompleteSuggestionActive:je};class A extends i.Component{constructor(s){super(s),this.state={value:s.value},this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}onClick(){const{onClick:s}=this.props,{value:o}=this.state;s(o)}onMouseMove(){const{setSuggestionIndex:s,index:o}=this.props;s(o)}render(){const{match:s,active:o,avoidBlur:e,id:n}=this.props,{value:a}=this.state.value,r=a.toLowerCase().startsWith(s.toLowerCase());return y.jsx("li",{id:n,role:"option","aria-selected":o,onClick:this.onClick,onMouseMove:this.onMouseMove,onFocus:e,onMouseDown:e,onKeyDown:e,className:"autocompleteSuggestion typo-normal",children:r?y.jsxs("span",{className:`${w.autocompleteSuggestion__inner} ${o?w["autocompleteSuggestion--active"]:""}`,children:[a.substring(0,s.length),y.jsx("span",{className:w.autocompleteSuggestion__substring,children:a.substring(s.length)})]}):y.jsx("span",{className:`${w.autocompleteSuggestion__inner} ${o?w["autocompleteSuggestion--active"]:""}`,children:a})})}}try{A.displayName="AutocompleteSuggestion",A.__docgenInfo={description:"",displayName:"AutocompleteSuggestion",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"(value: Suggestion) => void"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"Suggestion"}},match:{defaultValue:null,description:"",name:"match",required:!0,type:{name:"string"}},active:{defaultValue:null,description:"",name:"active",required:!0,type:{name:"boolean"}},setSuggestionIndex:{defaultValue:null,description:"",name:"setSuggestionIndex",required:!0,type:{name:"(index: number) => void"}},avoidBlur:{defaultValue:null,description:"",name:"avoidBlur",required:!0,type:{name:"() => void"}}}}}catch{}const ke="_autocomplete_9dlnp_1",Ne="_autocomplete__suggestions_9dlnp_27",$e="_autocomplete__suggestions_9dlnp_27",Ve="_autocomplete__suggestions--hidden_9dlnp_31",B={autocomplete:ke,autocomplete__suggestions:Ne,autocompleteSuggestions:$e,"autocomplete__suggestions--hidden":"_autocomplete__suggestions--hidden_9dlnp_31",autocompleteSuggestionsHidden:Ve};let R=class extends i.Component{constructor(o){super(o);L(this,"input");L(this,"inputRef");this.state={activeSuggestionIndex:-1,hasFocus:!1,shouldShowSuggestions:!0,setAriaActiveDescendant:!1,shouldBlur:!0,blurDelay:null},this.inputRef=e=>{this.input=e},this.onChange=this.onChange.bind(this),this.onBlur=this.onBlur.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onFocus=this.onFocus.bind(this),this.setValue=this.setValue.bind(this),this.setSuggestionIndex=this.setSuggestionIndex.bind(this),this.avoidBlur=this.avoidBlur.bind(this),this.clearBlurDelay=this.clearBlurDelay.bind(this),this.onSearchButtonClick=this.onSearchButtonClick.bind(this)}componentWillUnmount(){const{blurDelay:o}=this.state;o&&(clearTimeout(o),this.setState({blurDelay:null}))}onChange(o){const{onChange:e}=this.props;this.setState({activeSuggestionIndex:-1,shouldShowSuggestions:!0}),e(o)}onSearchButtonClick(o){const{onSearchButtonClick:e}=this.props;o.preventDefault(),e&&e()}onKeyDown(o){const{shouldShowSuggestions:e}=this.state;let{activeSuggestionIndex:n}=this.state;const{suggestions:a}=this.props,r=n>-1;switch(this.setState({setAriaActiveDescendant:o.keyCode===38||o.keyCode===40}),o.keyCode){case 9:r&&e&&this.setValue(a[n]);break;case 13:r&&e?(o.preventDefault(),this.setValue(a[n])):e&&a.length===1?this.setValue(a[0]):this.setState({shouldShowSuggestions:!1});break;case 27:e&&a.length>0&&(o.preventDefault(),this.setState({shouldShowSuggestions:!1}));break;case 38:e&&(o.preventDefault(),n=n-1===-2?-1:n-1,this.setState({activeSuggestionIndex:n}));break;case 40:e&&(o.preventDefault(),n=n+1===a.length?a.length-1:n+1,this.setState({activeSuggestionIndex:n}));break}}onFocus(){this.setState({hasFocus:!0,activeSuggestionIndex:-1})}onBlur(){const o=setTimeout(()=>{const{shouldBlur:n}=this.state;n&&this.setState({hasFocus:!1})},10);this.setState({blurDelay:o});const{onBlur:e}=this.props;e&&e()}setSuggestionIndex(o){this.setState({activeSuggestionIndex:o}),this.clearBlurDelay()}setValue(o){this.setState({shouldShowSuggestions:!1,activeSuggestionIndex:-1},()=>{this.inputRef.focus()}),this.clearBlurDelay();const{onSelect:e}=this.props;e(o)}avoidBlur(){this.setState({shouldBlur:!1})}clearBlurDelay(){const{blurDelay:o}=this.state;o&&(clearTimeout(o),this.setState({blurDelay:null})),this.setState({shouldBlur:!0})}render(){const{suggestions:o,id:e,ariaLabel:n,placeholder:a,value:r,name:p,shouldFocusOnMount:l,isLoading:m}=this.props,{activeSuggestionIndex:v,setAriaActiveDescendant:d,hasFocus:c,shouldShowSuggestions:_}=this.state,g=c&&_&&o.length>0,O=d&&v>-1?`${e}-item-${v}`:void 0;return y.jsxs("div",{className:`${B.autocomplete} autocomplete`,"aria-expanded":g,"aria-owns":`${e}-suggestions`,"aria-haspopup":"listbox",children:[y.jsx(z,{variant:"primary",id:e,name:p,type:"search","aria-label":n,"aria-autocomplete":"list","aria-controls":`${e}-suggestions`,"aria-activedescendant":O,placeholder:a,value:r,autoComplete:"off",onChange:this.onChange,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onFocus:this.onFocus,ref:S=>{this.inputRef=S},className:`${B.autocomplete__input} typo-normal`,autoFocus:l,label:n,hideLabel:!0,children:y.jsx(z.Button,{loading:m,onClick:this.onSearchButtonClick})}),y.jsx("ul",{id:`${e}-suggestions`,role:"listbox",className:g?B.autocomplete__suggestions:B["autocomplete__suggestions--hidden"],children:g&&o.map((S,f)=>y.jsx(A,{id:`${e}-item-${f}`,index:f,value:S,match:r,active:f===v,onClick:this.setValue,setSuggestionIndex:this.setSuggestionIndex,avoidBlur:this.avoidBlur},S.key))})]})}};const ee=R;try{R.displayName="Autocomplete",R.__docgenInfo={description:"",displayName:"Autocomplete",props:{onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(value: Suggestion) => void"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"(() => void)"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!0,type:{name:"string"}},suggestions:{defaultValue:null,description:"",name:"suggestions",required:!0,type:{name:"Suggestion[]"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},ariaLabel:{defaultValue:null,description:"",name:"ariaLabel",required:!0,type:{name:"string"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},shouldFocusOnMount:{defaultValue:null,description:"",name:"shouldFocusOnMount",required:!1,type:{name:"boolean"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},onSearchButtonClick:{defaultValue:null,description:"",name:"onSearchButtonClick",required:!1,type:{name:"(() => void)"}}}}}catch{}const Ke={title:"Autocomplete",component:ee},De=()=>y.jsx(ee,{value:"Verdi",onChange:t=>t,ariaLabel:"ariaLabel",id:"autocompleteId",placeholder:"",suggestions:[{key:"testItem",value:"Test Item"}],onSelect:()=>console.log("Selected")}),x=De.bind({});x.args={};var F,q,T;x.parameters={...x.parameters,docs:{...(F=x.parameters)==null?void 0:F.docs,source:{originalSource:`() => <AutocompleteComponent value="Verdi" onChange={v => v} ariaLabel="ariaLabel" id="autocompleteId" placeholder="" suggestions={[{
  key: 'testItem',
  value: 'Test Item'
}]} onSelect={() => console.log('Selected')} />`,...(T=(q=x.parameters)==null?void 0:q.docs)==null?void 0:T.source}}};const We=["Autocomplete"];export{x as Autocomplete,We as __namedExportsOrder,Ke as default};
//# sourceMappingURL=Autocomplete.stories-5e967c4e.js.map
