import{B as V,c as F,k as he,l as pe,u as be,i as ye,L as ve,R as xe,o as we,m as Oe,E as _e,a as Se,b as Te,g as Ee,d as Re,r as Fe}from"./formUtils-BWeRpG_s.js";import{j as k}from"./jsx-runtime-CLpGMVip.js";import{r as m,R as o}from"./index-CZMpeKRu.js";import{R as Me}from"./ReadOnlyField-Dk_x7pAk.js";import{M as ze}from"./index-Dy_t9DXc.js";import{u as $}from"./useClientLayoutEffect-vYulKaSf.js";import"./v4-CtRu48qb.js";import"./index.es-66gMhnLH.js";import"./index-D-TIQtLp.js";function ce(e,a=166,r=!1){let n;function t(...s){const l=()=>{n=void 0,e.apply(this,s)};!n&&r&&l(),clearTimeout(n),n=setTimeout(l,a)}return t.clear=()=>{clearTimeout(n)},t}var Le=function(e,a){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,n=Object.getOwnPropertySymbols(e);t<n.length;t++)a.indexOf(n[t])<0&&Object.prototype.propertyIsEnumerable.call(e,n[t])&&(r[n[t]]=e[n[t]]);return r};const Ne=m.forwardRef((e,a)=>{var{children:r,className:n,variant:t,size:s="medium",icon:l}=e,f=Le(e,["children","className","variant","size","icon"]);const v=(t==null?void 0:t.endsWith("-filled"))&&"strong",d=(t==null?void 0:t.endsWith("-moderate"))&&"moderate",b=t==null?void 0:t.replace("-filled","").replace("-moderate","");return o.createElement(V,Object.assign({},f,{ref:a,as:"span",size:s==="medium"?"medium":"small",className:F("navds-tag",n,`navds-tag--${t}`,`navds-tag--${s}`,`navds-tag--${v||d||"outline"}`,`navds-tag--${b}`)}),l&&o.createElement("span",{className:"navds-tag__icon--left"},l),r)});var je=function(e,a){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,n=Object.getOwnPropertySymbols(e);t<n.length;t++)a.indexOf(n[t])<0&&Object.prototype.propertyIsEnumerable.call(e,n[t])&&(r[n[t]]=e[n[t]]);return r};const q=(e,a,r)=>{const{outerHeightStyle:n,overflow:t}=a;return r.current<20&&(n>0&&Math.abs((e.outerHeightStyle||0)-n)>1||e.overflow!==t)?(r.current+=1,a):e},U=e=>((e==null?void 0:e.ownerDocument)||document).defaultView||window;function C(e){return parseInt(e,10)||0}const Ae=m.forwardRef((e,a)=>{var r,n,{className:t,onChange:s,maxRows:l,minRows:f=1,autoScrollbar:v,style:d,value:b}=e,x=je(e,["className","onChange","maxRows","minRows","autoScrollbar","style","value"]);const{current:w}=m.useRef(b!=null),i=m.useRef(null),T=he(i,a),N=m.useRef(null),O=m.useRef(0),[M,j]=m.useState({outerHeightStyle:0}),_=o.useCallback(()=>{const g=i.current,h=U(g).getComputedStyle(g);if(h.width==="0px")return{outerHeightStyle:0};const c=N.current;c.style.width=h.width,c.value=g.value||x.placeholder||"x",c.value.slice(-1)===`
`&&(c.value+=" ");const p=h.boxSizing,y=C(h.paddingBottom)+C(h.paddingTop),R=C(h.borderBottomWidth)+C(h.borderTopWidth),L=c.scrollHeight-y;c.value="x";const A=c.scrollHeight-y;let E=L;f&&(E=Math.max(Number(f)*A,E)),l&&(E=Math.min(Number(l)*A,E)),E=Math.max(E,A);const fe=E+(p==="border-box"?y+R:0),ge=Math.abs(E-L)<=1;return{outerHeightStyle:fe,overflow:ge}},[l,f,x.placeholder]),u=()=>{const g=_();Z(g)||j(S=>q(S,g,O))};$(()=>{const g=()=>{const y=_();Z(y)||ze.flushSync(()=>{j(R=>q(R,y,O))})},S=ce(()=>{var y,R,L;if(O.current=0,!((y=i.current)===null||y===void 0)&&y.style.height||!((R=i.current)===null||R===void 0)&&R.style.width){((L=i.current)===null||L===void 0?void 0:L.style.overflow)==="hidden"&&j(A=>Object.assign(Object.assign({},A),{overflow:!1}));return}g()},166,!0),h=i.current,c=U(h);c.addEventListener("resize",S);let p;return typeof ResizeObserver<"u"&&(p=new ResizeObserver(S),p.observe(h)),()=>{S.clear(),c.removeEventListener("resize",S),p&&p.disconnect()}},[_]),$(()=>{u()}),m.useEffect(()=>{O.current=0},[b]);const z=g=>{O.current=0,w||u(),s&&s(g)},D=Object.assign({"--__ac-textarea-height":M.outerHeightStyle+"px","--__axc-textarea-height":M.outerHeightStyle+"px",overflow:M.overflow&&!v&&!(!((r=i.current)===null||r===void 0)&&r.style.height)&&!(!((n=i.current)===null||n===void 0)&&n.style.width)?"hidden":void 0},d);return o.createElement(o.Fragment,null,o.createElement("textarea",Object.assign({value:b,onChange:z,ref:T,rows:f,style:D},x,{className:t})),o.createElement("textarea",{"aria-hidden":!0,className:t,readOnly:!0,ref:N,tabIndex:-1,style:Object.assign({visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"},d)}))});function Z(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflow}const ke=({maxLengthId:e,maxLength:a,currentLength:r,size:n,i18n:t})=>{const s=pe("Textarea",{charsLeft:t!=null&&t.counterLeft?`{chars} ${t.counterLeft}`:void 0,charsTooMany:t!=null&&t.counterTooMuch?`{chars} ${t.counterTooMuch}`:void 0}),l=a-r,[f,v]=m.useState(l);return m.useEffect(()=>{const d=ce(()=>{v(l)},2e3);return d(),()=>{d.clear()}},[l]),o.createElement(o.Fragment,null,o.createElement("span",{id:e,className:"navds-sr-only"},s("maxLength",{maxLength:a})),l<20&&o.createElement("span",{role:"status",className:"navds-textarea__sr-counter navds-sr-only"},G(f,s)),o.createElement(V,{className:F("navds-textarea__counter",{"navds-textarea__counter--error":l<0}),size:n},G(l,s)))},G=(e,a)=>e<0?a("charsTooMany",{chars:Math.abs(e)}):a("charsLeft",{chars:e});var De=function(e,a){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,n=Object.getOwnPropertySymbols(e);t<n.length;t++)a.indexOf(n[t])<0&&Object.prototype.propertyIsEnumerable.call(e,n[t])&&(r[n[t]]=e[n[t]]);return r};const Ce=m.forwardRef((e,a)=>{var r,n,t;const{inputProps:s,errorId:l,showErrorMsg:f,hasError:v,size:d,inputDescriptionId:b}=be(e,"textarea"),{label:x,className:w,description:i,maxLength:T,hideLabel:N=!1,resize:O,UNSAFE_autoScrollbar:M,i18n:j,readOnly:_}=e,u=De(e,["label","className","description","maxLength","hideLabel","resize","UNSAFE_autoScrollbar","i18n","readOnly"]),z=ye(),D=T!==void 0&&T>0,[g,S]=m.useState((r=e==null?void 0:e.defaultValue)!==null&&r!==void 0?r:""),h=()=>{let p=u!=null&&u.minRows?u==null?void 0:u.minRows:3;return d==="small"&&(p=u!=null&&u.minRows?u==null?void 0:u.minRows:2),p},c=F(s["aria-describedby"],{[z??""]:D});return o.createElement("div",{className:F(w,"navds-form-field",`navds-form-field--${d}`,{"navds-form-field--disabled":!!s.disabled,"navds-form-field--readonly":_,"navds-textarea--readonly":_,"navds-textarea--error":v,"navds-textarea--autoscrollbar":M,[`navds-textarea--resize-${O===!0?"both":O}`]:O})},o.createElement(ve,{htmlFor:s.id,size:d,className:F("navds-form-field__label",{"navds-sr-only":N})},_&&o.createElement(xe,null),x),!!i&&o.createElement(V,{className:F("navds-form-field__description",{"navds-sr-only":N}),id:b,size:d,as:"div"},i),o.createElement(Ae,Object.assign({},we(u,["error","errorId","size"]),s,{onChange:Oe(e.onChange,e.value===void 0?p=>S(p.target.value):void 0),minRows:h(),autoScrollbar:M,ref:a,readOnly:_,className:F("navds-textarea__input","navds-body-short",`navds-body-short--${d??"medium"}`)},c?{"aria-describedby":c}:{})),D&&!_&&!s.disabled&&o.createElement(ke,{maxLengthId:z,maxLength:T,currentLength:(t=(n=e.value)===null||n===void 0?void 0:n.length)!==null&&t!==void 0?t:g.length,size:d,i18n:j}),o.createElement("div",{className:"navds-form-field__error",id:l,"aria-relevant":"additions removals","aria-live":"polite"},f&&o.createElement(_e,{size:d,showIcon:!0},e.error)))}),We="_textAreaFieldWithBadges_bdz0b_1",He="_etikettWrapper_bdz0b_4",J={textAreaFieldWithBadges:We,etikettWrapper:He},me=({name:e,label:a,readOnly:r,maxLength:n,badges:t,validate:s=[],parse:l=x=>x,className:f,description:v,isEdited:d,...b})=>{const{formState:{errors:x}}=Se(),{field:w}=Te({name:e,rules:{validate:m.useMemo(()=>Ee(s),[s])}});return r?k.jsx(Me,{label:a,value:w.value,type:"textarea",isEdited:d,hideLabel:b.hideLabel}):k.jsxs("div",{className:t?J.textAreaFieldWithBadges:null,children:[t&&k.jsx("div",{className:J.etikettWrapper,children:t.map(({type:i,titleText:T})=>k.jsx(Ne,{variant:i,size:"small",children:T},T))}),k.jsx(Ce,{size:"small",label:a,description:v,className:f,autoComplete:"off",...w,onChange:i=>w.onChange(i.currentTarget.value!==""?l(i.currentTarget.value):null),value:w.value?w.value:"",error:Re(x,e),maxLength:n,...b})]})};me.__docgenInfo={description:"",methods:[],displayName:"TextAreaField",props:{name:{required:!0,tsType:{name:"string"},description:""},label:{required:!0,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},readOnly:{required:!1,tsType:{name:"boolean"},description:""},maxLength:{required:!1,tsType:{name:"number"},description:""},badges:{required:!1,tsType:{name:"Array",elements:[{name:"Badges"}],raw:"Badges[]"},description:""},validate:{required:!1,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"((value: string) => any)[]"},description:"",defaultValue:{value:"[]",computed:!1}},parse:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string | number) => string | number",signature:{arguments:[{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"value"}],return:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]}}},description:"",defaultValue:{value:"value => value",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},description:{required:!1,tsType:{name:"string"},description:""},isEdited:{required:!1,tsType:{name:"boolean"},description:""}},composes:["TextareaProps"]};const Je={component:me,tags:["autodocs"],decorators:Fe({testTextAreaFieldPre:"Dette er en begrunnelse"})},W={args:{label:"Dette er et tekstfelt",name:"testTextAreaField"}},H={args:{label:"Dette er et tekstfelt der verdi er valgt",name:"testTextAreaFieldPre"}},P={args:{label:"Dette er et tekstfelt som er readonly",name:"testTextAreaFieldPre",readOnly:!0}},I={args:{label:"Dette er et tekstfelt med maks lengde",name:"testTextAreaField",maxLength:50}},B={args:{label:"Dette er et tekstfelt med badge",name:"testTextAreaField",badges:[{type:"warning",titleText:"Dette er en test"}]}};var K,Q,X;W.parameters={...W.parameters,docs:{...(K=W.parameters)==null?void 0:K.docs,source:{originalSource:`{
  args: {
    label: 'Dette er et tekstfelt',
    name: 'testTextAreaField'
  }
}`,...(X=(Q=W.parameters)==null?void 0:Q.docs)==null?void 0:X.source}}};var Y,ee,te;H.parameters={...H.parameters,docs:{...(Y=H.parameters)==null?void 0:Y.docs,source:{originalSource:`{
  args: {
    label: 'Dette er et tekstfelt der verdi er valgt',
    name: 'testTextAreaFieldPre'
  }
}`,...(te=(ee=H.parameters)==null?void 0:ee.docs)==null?void 0:te.source}}};var ne,re,ae;P.parameters={...P.parameters,docs:{...(ne=P.parameters)==null?void 0:ne.docs,source:{originalSource:`{
  args: {
    label: 'Dette er et tekstfelt som er readonly',
    name: 'testTextAreaFieldPre',
    readOnly: true
  }
}`,...(ae=(re=P.parameters)==null?void 0:re.docs)==null?void 0:ae.source}}};var se,le,oe;I.parameters={...I.parameters,docs:{...(se=I.parameters)==null?void 0:se.docs,source:{originalSource:`{
  args: {
    label: 'Dette er et tekstfelt med maks lengde',
    name: 'testTextAreaField',
    maxLength: 50
  }
}`,...(oe=(le=I.parameters)==null?void 0:le.docs)==null?void 0:oe.source}}};var de,ie,ue;B.parameters={...B.parameters,docs:{...(de=B.parameters)==null?void 0:de.docs,source:{originalSource:`{
  args: {
    label: 'Dette er et tekstfelt med badge',
    name: 'testTextAreaField',
    badges: [{
      type: 'warning',
      titleText: 'Dette er en test'
    }]
  }
}`,...(ue=(ie=B.parameters)==null?void 0:ie.docs)==null?void 0:ue.source}}};const Ke=["Default","MedVerdi","ReadOnly","MedMaxLength","MedMBadge"];export{W as Default,B as MedMBadge,I as MedMaxLength,H as MedVerdi,P as ReadOnly,Ke as __namedExportsOrder,Je as default};
