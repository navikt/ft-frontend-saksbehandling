import{j as G}from"./jsx-runtime-DR9Q75dM.js";import{r as u}from"./index-DRjF_FHU.js";import{p as H,i as O,d as x,a as J,b,A as F,R as E}from"./index.es-6Aam7IZi.js";import{f as T,i as K,g as ce,c as pe,D as Q}from"./customParseFormat-BQB70gsG.js";import{a as me,b as fe,g as ve,d as De,r as ge}from"./decorators-CsUnBlMd.js";import{R as ye}from"./ReadOnlyField-D8hLTj43.js";import"./index-rX-Bn4lm.js";import"./Select-DwrWk4ly.js";import"./v4-CQkTLCs1.js";const ke=(h={})=>Object.assign({isDisabled:!1,isWeekend:!1,isEmpty:!1,isInvalid:!1,isBefore:!1,isAfter:!1,isValidDate:!0},h),be=(h={})=>{var S;const{locale:q="nb",required:M,defaultSelected:_,today:o=new Date,fromDate:i,toDate:D,disabled:g,disableWeekends:w,onDateChange:P,inputFormat:c,onValidate:V,defaultMonth:d,allowTwoDigitYear:r=!0}=h,[v,W]=u.useState(null),l=ce(q),[s,L]=u.useState(_),[Y,p]=u.useState((S=s??d)!==null&&S!==void 0?S:o),[t,m]=u.useState(s),[C,de]=u.useState(!1),I=s?T(s,l,"date",c):"",[ue,y]=u.useState(I),z=u.useCallback(a=>{var e,n;de(a),a&&p((n=(e=t??s)!==null&&e!==void 0?e:d)!==null&&n!==void 0?n:o)},[d,s,t,o]),k=a=>{P==null||P(a),m(a)},R=(a={})=>V==null?void 0:V(ke(a));return{datepickerProps:{month:Y,onMonthChange:p,onDayClick:(a,{selected:e})=>{if(!(e&&M)){if(a&&!e&&(z(!1),v==null||v.focus()),e){k(void 0),y(""),R({isValidDate:!1,isEmpty:!0});return}k(a),R(),p(a),y(a?T(a,l,"date",c):"")}},selected:t??new Date("Invalid date"),locale:q,fromDate:i,toDate:D,today:o,open:C,onClose:()=>{z(!1),v==null||v.focus()},onOpenToggle:()=>z(!C),disabled:g,disableWeekends:w},inputProps:{onChange:a=>{y(a.target.value);const e=H(a.target.value,o,l,"date",r),n=i&&e&&x(i,e)>0,f=D&&e&&x(e,D)>0;if(!O(e)||w&&K(e)||g&&J(e,g)){k(void 0),R({isInvalid:!O(e),isWeekend:w&&K(e),isDisabled:g&&J(e,g),isValidDate:!1,isEmpty:!a.target.value,isBefore:n??!1,isAfter:f??!1});return}if(n||f){k(void 0),R({isValidDate:!1,isBefore:n??!1,isAfter:f??!1});return}k(e),R(),p(d??e)},onFocus:a=>{if(a.target.readOnly)return;const e=H(a.target.value,o,l,"date",r);if(O(e)){y(T(e,l,"date",c));const n=i&&e&&x(i,e)>0,f=D&&e&&x(e,D)>0;!n&&!f&&p(e)}},onBlur:a=>{const e=H(a.target.value,o,l,"date",r);O(e)&&y(T(e,l,"date",c))},value:ue,setAnchorRef:W},reset:()=>{var a;k(s),p((a=s??d)!==null&&a!==void 0?a:o),y(I??""),L(_)},selectedDay:t,setSelected:a=>{var e;k(a),p((e=a??d)!==null&&e!==void 0?e:o),y(a?T(a,l,"date",c):"")}}};b.extend(pe);const ie=({name:h,label:S,description:q,validate:M=[],disabled:_=!1,isReadOnly:o=!1,onChange:i,disabledDays:D,isEdited:g,defaultMonth:w,fromDate:P,toDate:c,size:V="small"})=>{const{formState:{errors:d}}=me(),{field:r}=fe({name:h,rules:{validate:u.useMemo(()=>ve(M),[M])}}),v=r.value?b(r.value,F,!0).format(E):"",[W,l]=u.useState(v),{datepickerProps:s,inputProps:L}=be({onDateChange:t=>{if(t!==void 0){const m=b(t).format(F);i&&i(m),r.onChange(m),l(b(m,F,!0).format(E))}},defaultSelected:r.value?b(r.value,F,!0).toDate():void 0,defaultMonth:w||(!r.value&&c?c:void 0),disabled:D}),Y=u.useCallback(t=>{const m=b(t.target.value,E,!0).format(F),C=m!=="Invalid Date";l(t.target.value),i&&i(C?m:t.target.value),r.onChange(C?m:t.target.value)},[l,i,r]);if(o)return G.jsx(ye,{label:S,value:r.value?b(r.value,F,!0).format(E):void 0,isEdited:g,size:V});const p={...s,fromDate:P,toDate:c};return G.jsx(Q,{...p,children:G.jsx(Q.Input,{...L,onChange:Y,value:W,size:V,label:S,description:q,disabled:_,error:De(d,h)})})};ie.__docgenInfo={description:"",methods:[],displayName:"Datepicker",props:{name:{required:!0,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},description:{required:!1,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},validate:{required:!1,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"((value: string) => any)[]"},description:"",defaultValue:{value:"[]",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isReadOnly:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: any) => void",signature:{arguments:[{type:{name:"any"},name:"value"}],return:{name:"void"}}},description:""},disabledDays:{required:!1,tsType:{name:"DatePickerProps['disabled']",raw:"DatePickerProps['disabled']"},description:""},isEdited:{required:!1,tsType:{name:"boolean"},description:""},defaultMonth:{required:!1,tsType:{name:"Date"},description:""},size:{required:!1,tsType:{name:"union",raw:"'medium' | 'small'",elements:[{name:"literal",value:"'medium'"},{name:"literal",value:"'small'"}]},description:"",defaultValue:{value:"'small'",computed:!1}},fromDate:{required:!1,tsType:{name:"Date"},description:""},toDate:{required:!1,tsType:{name:"Date"},description:""}}};const Be={component:ie,tags:["autodocs"],decorators:ge({datepickerFieldPre:"2022-10-11"})},A={args:{name:"datepickerField",label:"Dette er en datepicker",description:"Dette er en nærmere beskrivelse"}},B={args:{name:"datepickerField",label:"Dette er en datepicker med disabled datoer",fromDate:new Date("2022-10-02"),toDate:new Date("2022-10-24")}},j={args:{label:"Dette er en datepicker der verdi er valgt",name:"datepickerFieldPre",fromDate:new Date("2022-10-02"),toDate:new Date("2022-10-24")}},N={args:{label:"Dette er en datepicker som er readonly",name:"datepickerFieldPre",isReadOnly:!0,isEdited:!0}};var U,X,Z;A.parameters={...A.parameters,docs:{...(U=A.parameters)==null?void 0:U.docs,source:{originalSource:`{
  args: {
    name: 'datepickerField',
    label: 'Dette er en datepicker',
    description: 'Dette er en nærmere beskrivelse'
  }
}`,...(Z=(X=A.parameters)==null?void 0:X.docs)==null?void 0:Z.source}}};var $,ee,ae;B.parameters={...B.parameters,docs:{...($=B.parameters)==null?void 0:$.docs,source:{originalSource:`{
  args: {
    name: 'datepickerField',
    label: 'Dette er en datepicker med disabled datoer',
    fromDate: new Date('2022-10-02'),
    toDate: new Date('2022-10-24')
  }
}`,...(ae=(ee=B.parameters)==null?void 0:ee.docs)==null?void 0:ae.source}}};var te,re,se;j.parameters={...j.parameters,docs:{...(te=j.parameters)==null?void 0:te.docs,source:{originalSource:`{
  args: {
    label: 'Dette er en datepicker der verdi er valgt',
    name: 'datepickerFieldPre',
    fromDate: new Date('2022-10-02'),
    toDate: new Date('2022-10-24')
  }
}`,...(se=(re=j.parameters)==null?void 0:re.docs)==null?void 0:se.source}}};var ne,le,oe;N.parameters={...N.parameters,docs:{...(ne=N.parameters)==null?void 0:ne.docs,source:{originalSource:`{
  args: {
    label: 'Dette er en datepicker som er readonly',
    name: 'datepickerFieldPre',
    isReadOnly: true,
    isEdited: true
  }
}`,...(oe=(le=N.parameters)==null?void 0:le.docs)==null?void 0:oe.source}}};const je=["Default","MedDisabledDatoer","MedVerdi","ReadOnly"];export{A as Default,B as MedDisabledDatoer,j as MedVerdi,N as ReadOnly,je as __namedExportsOrder,Be as default};
