import{j as ge,a as je,b as ie,g as le,V as Ne,L as Me,H as Ee,d as oe,r as xe}from"./formUtils-BWIOZvHk.js";import{j as C}from"./jsx-runtime-CLpGMVip.js";import{r as b}from"./index-CZMpeKRu.js";import{d as S,i as N,a as W,p as z,c as Ce,b as h,A as I,P as E}from"./index.es-DFcLCwfW.js";import{f as v,i as w,g as We,c as we,D as ee}from"./customParseFormat-k_DNkknq.js";import{R as qe}from"./ReadOnlyField-DfsXyaYo.js";import"./v4-CtRu48qb.js";import"./index-Dy_t9DXc.js";import"./index-D-TIQtLp.js";import"./useClientLayoutEffect-vYulKaSf.js";import"./Select-DiCHys9V.js";const te=(t={},d={})=>({from:Object.assign({isDisabled:!1,isWeekend:!1,isEmpty:!1,isInvalid:!1,isBefore:!1,isAfter:!1,isValidDate:!0},t),to:Object.assign({isDisabled:!1,isWeekend:!1,isEmpty:!1,isInvalid:!1,isBefore:!1,isAfter:!1,isBeforeFrom:!1,isValidDate:!0},d)}),P={FROM:"FROM",TO:"TO"},Be=(t,d)=>{const a=(d==null?void 0:d.fromDate)&&t&&S(d==null?void 0:d.fromDate,t)>0,u=(d==null?void 0:d.toDate)&&t&&S(t,d==null?void 0:d.toDate)>0;if(N(t)&&!(d!=null&&d.disableWeekends&&w(t))&&!(d!=null&&d.disabled&&W(t,d.disabled)))return{isValidDate:!1,isInvalid:!N(t),isWeekend:(d==null?void 0:d.disableWeekends)&&w(t),isDisabled:(d==null?void 0:d.disabled)&&W(t,d.disabled),isBefore:a,isAfter:u};if(a||u)return{isValidDate:!1,isBefore:a,isAfter:u}},_e=(t,d,a)=>{var u;const V=(a==null?void 0:a.fromDate)&&t&&S(a==null?void 0:a.fromDate,t)>0,R=(a==null?void 0:a.toDate)&&t&&S(t,a==null?void 0:a.toDate)>0,r=(u=d&&S(d,t)>0)!==null&&u!==void 0?u:!1;if(N(t)&&!(a!=null&&a.disableWeekends&&w(t))&&!(a!=null&&a.disabled&&W(t,a.disabled)))return{isValidDate:!1,isInvalid:!N(t),isWeekend:(a==null?void 0:a.disableWeekends)&&w(t),isDisabled:(a==null?void 0:a.disabled)&&W(t,a.disabled),isBefore:V,isAfter:R,isBeforeFrom:r};if(V||R||r)return{isValidDate:!1,isBefore:V,isAfter:R,isBeforeFrom:r}},ne=(t,d)=>{if(!t||!(t!=null&&t.from))return te({isEmpty:!0,isValidDate:!1},{isEmpty:!0,isValidDate:!1});const a=Be(t.from,d),u=t.to?_e(t.to,t.from,d):{isEmpty:!0,isValidDate:!1};return te(Object.assign({},a),Object.assign({},u))},Ae=(t={})=>{const{locale:d,defaultSelected:a,today:u=new Date,fromDate:V,toDate:R,disabled:r,disableWeekends:q,onRangeChange:_,inputFormat:D,onValidate:B,defaultMonth:p,allowTwoDigitYear:O=!0}=t,[M,y]=b.useState(null),A=ge(),m=d?We(d):A,[i,L]=b.useState(a),[J,g]=b.useState(i?i==null?void 0:i.from:p??u),[n,K]=b.useState(i??{from:void 0,to:void 0}),[Q,j]=b.useState(i!=null&&i.from?v(i.from,m,"date",D):""),[o,f]=b.useState(i!=null&&i.to?v(i.to,m,"date",D):""),[c,U]=b.useState(ne(n,t)),[Re,X]=b.useState(!1),k=e=>{_==null||_(e),K(e)},T=(e={},s={})=>{const l=te(e,s);U(l),B==null||B(l)},he=()=>{k(i??{from:void 0,to:void 0}),g(i?i==null?void 0:i.from:p??u),U(ne(i??{from:void 0,to:void 0},t)),j(i!=null&&i.from?v(i.from,m,"date",D):""),f(i!=null&&i.to?v(i.to,m,"date",D):""),L(a)},Se=e=>{k(e),j(e!=null&&e.from?v(e.from,m,"date",D):""),f(e!=null&&e.to?v(e==null?void 0:e.to,m,"date",D):""),U(ne(e,t))},de=(e,s)=>{if(e.target.readOnly)return;const l=z(e.target.value,u,m,"date",O);if(N(l)){s===P.FROM?j(v(l,m,"date",D)):f(v(l,m,"date",D));const F=V&&l&&S(V,l)>0,x=R&&l&&S(l,R)>0;!F&&!x&&g(l)}},ae=(e,s)=>{const l=z(e.target.value,u,m,"date",O);N(l)&&(s===P.FROM?j(v(l,m,"date",D)):s===P.TO&&f(v(l,m,"date",D)))},Z=e=>N(e)&&!(q&&w(e))&&!(r&&W(e,r)),Te=e=>{e!=null&&e.from&&(e!=null&&e.to)&&(X(!1),M==null||M.focus());const s=!(n!=null&&n.from)&&(n!=null&&n.to)?n==null?void 0:n.to:e==null?void 0:e.to,l=Ce(s,e==null?void 0:e.from);e!=null&&e.from?j(v(e==null?void 0:e.from,m,"date",D)):j(""),f(s&&!l?v(s,m,"date",D):""),k({from:e==null?void 0:e.from,to:l?void 0:s}),T({isValidDate:!!(e!=null&&e.from),isEmpty:!(e!=null&&e.from)},{isValidDate:!!(e!=null&&e.to),isEmpty:!s||l})},Ie=(e="",s,l=!1,F=!1)=>{if(j(e),!Z(s)){k(Object.assign(Object.assign({},n),{from:void 0})),T({isEmpty:!e,isValidDate:!1,isInvalid:!N(s),isWeekend:q&&w(s),isDisabled:r&&W(s,r),isBefore:l,isAfter:F},c.to);return}if(l||F){k(Object.assign(Object.assign({},n),{from:void 0})),T({isValidDate:!1,isBefore:l,isAfter:F},c.to);return}if(n!=null&&n.to&&S(s,n==null?void 0:n.to)>0){k({to:s,from:s}),f(v(s,m,"date",D)),g(s),T();return}if(o&&!(n!=null&&n.to)){const x=z(o,u,m,"date",O);if(Z(x)){k({from:s,to:x}),g(s),T();return}}k(Object.assign(Object.assign({},n),{from:s})),T({},c.to),g(s)},Pe=(e="",s,l=!1,F=!1)=>{if(f(e),!Z(s)){k({from:n==null?void 0:n.from,to:void 0}),T(c.from,{isEmpty:!e,isValidDate:!1,isInvalid:!N(s),isWeekend:q&&w(s),isDisabled:r&&W(s,r),isBefore:l,isAfter:F});return}if(l||F){k({from:n==null?void 0:n.from,to:void 0}),T(c.from,{isValidDate:!1,isBefore:l,isAfter:F});return}if(n!=null&&n.from&&S(n==null?void 0:n.from,s)>0){k({from:n==null?void 0:n.from,to:void 0}),T(c.from,{isValidDate:!1,isBeforeFrom:!0});return}k({from:n==null?void 0:n.from,to:s}),T(c.from,{}),g(s)},se=(e,s)=>{const l=z(e.target.value,u,m,"date",O),F=V&&S(V,l)>0,x=R&&S(l,R)>0;return s===P.FROM?Ie(e.target.value,l,F,x):Pe(e.target.value,l,F,x)};return{datepickerProps:{month:J,onMonthChange:g,onSelect:Te,selected:n,locale:d,fromDate:V,toDate:R,today:u,mode:"range",open:Re,onOpenToggle:()=>X(e=>!e),onClose:()=>{X(!1),M==null||M.focus()},disabled:r,disableWeekends:q},fromInputProps:{onChange:e=>se(e,P.FROM),onFocus:e=>de(e,P.FROM),onBlur:e=>ae(e,P.FROM),value:Q,setAnchorRef:y},toInputProps:{onChange:e=>se(e,P.TO),onFocus:e=>de(e,P.TO),onBlur:e=>ae(e,P.TO),value:o,setAnchorRef:y},reset:he,selectedRange:n,setSelected:Se}};h.extend(we);const Fe=({fomName:t,tomName:d,label:a,validate:u=[],disabled:V=!1,isReadOnly:R=!1,onChange:r,fromDate:q,toDate:_,isEdited:D})=>{const{formState:{errors:B}}=je(),{field:p}=ie({name:t,rules:{validate:b.useMemo(()=>le(u),[u])}}),{field:O}=ie({name:d,rules:{validate:b.useMemo(()=>le(u),[u])}}),M=p.value?h(p.value,I,!0).format(E):"",[y,A]=b.useState(M),m=O.value?h(O.value,I,!0).format(E):"",[i,L]=b.useState(m),{datepickerProps:J,toInputProps:g,fromInputProps:n}=Ae({onRangeChange:o=>{const f=o!=null&&o.from?h(o==null?void 0:o.from).format(I):void 0;r&&r(f),p.onChange(f),A(h(f,I,!0).format(E));const c=o!=null&&o.to?h(o==null?void 0:o.to).format(I):void 0;r&&r(c),O.onChange(c),L(c?h(c,I,!0).format(E):"")}}),K=b.useCallback(o=>{const f=h(o.target.value,E,!0).format(I),c=f!=="Invalid Date";A(o.target.value),r&&r(c?f:o.target.value),p.onChange(c?f:o.target.value)},[A,r,p]),Q=b.useCallback(o=>{const f=h(o.target.value,E,!0).format(I),c=f!=="Invalid Date";L(o.target.value),r&&r(c?f:o.target.value),O.onChange(c?f:o.target.value)},[L,r,O]);if(R){const o=p.value?h(p.value,I,!0).format(E):void 0,f=O.value?h(O.value,I,!0).format(E):void 0;return C.jsx(qe,{label:a,value:`${o} - ${f||""}`,isEdited:D})}const j={...J,fromDate:q,toDate:_};return C.jsx(ee,{...j,children:C.jsxs(Ne,{gap:"2",children:[C.jsx(Me,{size:"small",children:a}),C.jsxs(Ee,{gap:"4",children:[C.jsx(ee.Input,{...n,onChange:K,value:y,size:"small",hideLabel:!0,label:"","aria-label":"Fra dato",disabled:V,error:oe(B,t)}),C.jsx(ee.Input,{...g,onChange:Q,value:i,size:"small",label:"","aria-label":"Til dato",hideLabel:!0,disabled:V,error:oe(B,d)})]})]})})};Fe.__docgenInfo={description:"",methods:[],displayName:"Rangepicker",props:{fomName:{required:!0,tsType:{name:"string"},description:""},tomName:{required:!0,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},validate:{required:!1,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"((value: string) => any)[]"},description:"",defaultValue:{value:"[]",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isReadOnly:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: any) => void",signature:{arguments:[{type:{name:"any"},name:"value"}],return:{name:"void"}}},description:""},fromDate:{required:!1,tsType:{name:"Date"},description:""},toDate:{required:!1,tsType:{name:"Date"},description:""},isEdited:{required:!1,tsType:{name:"boolean"},description:""}}};const nn={component:Fe,tags:["autodocs"],decorators:xe({fomPre:"2022-10-22",tomPre:"2022-10-27"})},H={args:{fomName:"fom",tomName:"tom",label:"Dette er en rangepicker"}},$={args:{fomName:"fom",tomName:"tom",label:"Dette er en rangepicker med disabled datoer",fromDate:new Date("2022-10-10"),toDate:new Date("2022-10-14")}},G={args:{label:"Dette er en rangepicker der verdi er valgt",fomName:"fomPre",tomName:"tomPre"}},Y={args:{label:"Dette er en rangepicker som er readonly",fomName:"fomPre",tomName:"tomPre",isReadOnly:!0,isEdited:!0}};var ue,re,fe;H.parameters={...H.parameters,docs:{...(ue=H.parameters)==null?void 0:ue.docs,source:{originalSource:`{
  args: {
    fomName: 'fom',
    tomName: 'tom',
    label: 'Dette er en rangepicker'
  }
}`,...(fe=(re=H.parameters)==null?void 0:re.docs)==null?void 0:fe.source}}};var me,ce,De;$.parameters={...$.parameters,docs:{...(me=$.parameters)==null?void 0:me.docs,source:{originalSource:`{
  args: {
    fomName: 'fom',
    tomName: 'tom',
    label: 'Dette er en rangepicker med disabled datoer',
    fromDate: new Date('2022-10-10'),
    toDate: new Date('2022-10-14')
  }
}`,...(De=(ce=$.parameters)==null?void 0:ce.docs)==null?void 0:De.source}}};var pe,be,ve;G.parameters={...G.parameters,docs:{...(pe=G.parameters)==null?void 0:pe.docs,source:{originalSource:`{
  args: {
    label: 'Dette er en rangepicker der verdi er valgt',
    fomName: 'fomPre',
    tomName: 'tomPre'
  }
}`,...(ve=(be=G.parameters)==null?void 0:be.docs)==null?void 0:ve.source}}};var Ve,Oe,ke;Y.parameters={...Y.parameters,docs:{...(Ve=Y.parameters)==null?void 0:Ve.docs,source:{originalSource:`{
  args: {
    label: 'Dette er en rangepicker som er readonly',
    fomName: 'fomPre',
    tomName: 'tomPre',
    isReadOnly: true,
    isEdited: true
  }
}`,...(ke=(Oe=Y.parameters)==null?void 0:Oe.docs)==null?void 0:ke.source}}};const tn=["Default","MedDisabledDatoer","MedVerdi","ReadOnly"];export{H as Default,$ as MedDisabledDatoer,G as MedVerdi,Y as ReadOnly,tn as __namedExportsOrder,nn as default};
