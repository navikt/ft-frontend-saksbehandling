import{j as k}from"./jsx-runtime-DR9Q75dM.js";import{r as m,R as o}from"./index-DRjF_FHU.js";import{B as q,c as F,k as ve,l as V,m as he,u as pe,i as be,L as ye,R as xe,o as we,n as Oe,E as _e,a as Te,b as Se,g as Ee,d as Re,r as Fe}from"./decorators-DM-2uixQ.js";import{R as ze}from"./ReadOnlyField-D5oVkEFG.js";import{F as Me}from"./index-rX-Bn4lm.js";import"./v4-CQkTLCs1.js";import"./index.es-CzgiVzSW.js";function ue(e,n=166){let a;function t(...r){const s=()=>{e.apply(this,r)};clearTimeout(a),a=setTimeout(s,n)}return t.clear=()=>{clearTimeout(a)},t}var Ne=function(e,n){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(e);r<t.length;r++)n.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(e,t[r])&&(a[t[r]]=e[t[r]]);return a};const Le=m.forwardRef((e,n)=>{var{children:a,className:t,variant:r,size:s="medium",icon:l}=e,f=Ne(e,["children","className","variant","size","icon"]);return o.createElement(q,Object.assign({},f,{ref:n,as:"span",size:s==="medium"?"medium":"small",className:F("navds-tag",t,`navds-tag--${r}`,`navds-tag--${s}`)}),l&&o.createElement("span",{className:"navds-tag__icon--left"},l),a)});var je=function(e,n){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(e);r<t.length;r++)n.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(e,t[r])&&(a[t[r]]=e[t[r]]);return a};const $=(e,n,a)=>{const{outerHeightStyle:t,overflow:r}=n;return a.current<20&&(t>0&&Math.abs((e.outerHeightStyle||0)-t)>1||e.overflow!==r)?(a.current+=1,n):e},U=e=>((e==null?void 0:e.ownerDocument)||document).defaultView||window;function C(e){return parseInt(e,10)||0}const Ae=m.forwardRef((e,n)=>{var a,t,{className:r,onChange:s,maxRows:l,minRows:f=1,autoScrollbar:E,style:i,value:_}=e,b=je(e,["className","onChange","maxRows","minRows","autoScrollbar","style","value"]);const{current:y}=m.useRef(_!=null),d=m.useRef(null),T=ve(d,n),L=m.useRef(null),x=m.useRef(0),[z,j]=m.useState({outerHeightStyle:0}),w=o.useCallback(()=>{const g=d.current,v=U(g).getComputedStyle(g);if(v.width==="0px")return{outerHeightStyle:0};const u=L.current;u.style.width=v.width,u.value=g.value||b.placeholder||"x",u.value.slice(-1)===`
`&&(u.value+=" ");const h=v.boxSizing,p=C(v.paddingBottom)+C(v.paddingTop),R=C(v.borderBottomWidth)+C(v.borderTopWidth),N=u.scrollHeight-p;u.value="x";const A=u.scrollHeight-p;let S=N;f&&(S=Math.max(Number(f)*A,S)),l&&(S=Math.min(Number(l)*A,S)),S=Math.max(S,A);const fe=S+(h==="border-box"?p+R:0),ge=Math.abs(S-N)<=1;return{outerHeightStyle:fe,overflow:ge}},[l,f,b.placeholder]),c=()=>{const g=w();Z(g)||j(O=>$(O,g,x))};V(()=>{const g=()=>{const p=w();Z(p)||Me.flushSync(()=>{j(R=>$(R,p,x))})},O=ue(()=>{var p,R,N;if(x.current=0,!((p=d.current)===null||p===void 0)&&p.style.height||!((R=d.current)===null||R===void 0)&&R.style.width){((N=d.current)===null||N===void 0?void 0:N.style.overflow)==="hidden"&&j(A=>Object.assign(Object.assign({},A),{overflow:!1}));return}g()}),v=d.current,u=U(v);u.addEventListener("resize",O);let h;return typeof ResizeObserver<"u"&&(h=new ResizeObserver(O),h.observe(v)),()=>{O.clear(),u.removeEventListener("resize",O),h&&h.disconnect()}},[w]),V(()=>{c()}),m.useEffect(()=>{x.current=0},[_]);const M=g=>{x.current=0,y||c(),s&&s(g)},D=Object.assign({"--__ac-textarea-height":z.outerHeightStyle+"px","--__axc-textarea-height":z.outerHeightStyle+"px",overflow:z.overflow&&!E&&!(!((a=d.current)===null||a===void 0)&&a.style.height)&&!(!((t=d.current)===null||t===void 0)&&t.style.width)?"hidden":void 0},i);return o.createElement(o.Fragment,null,o.createElement("textarea",Object.assign({value:_,onChange:M,ref:T,rows:f,style:D},b,{className:r})),o.createElement("textarea",{"aria-hidden":!0,className:r,readOnly:!0,ref:L,tabIndex:-1,style:Object.assign({visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"},i)}))});function Z(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflow}const ke=({maxLengthId:e,maxLength:n,currentLength:a,size:t,i18n:r})=>{const s=he("Textarea",{charsLeft:r!=null&&r.counterLeft?`{chars} ${r.counterLeft}`:void 0,charsTooMany:r!=null&&r.counterTooMuch?`{chars} ${r.counterTooMuch}`:void 0}),l=n-a,[f,E]=m.useState(l);return m.useEffect(()=>{const i=ue(()=>{E(l)},2e3);return i(),()=>{i.clear()}},[l]),o.createElement(o.Fragment,null,o.createElement("span",{id:e,className:"navds-sr-only"},s("maxLength",{maxLength:n})),l<20&&o.createElement("span",{role:"status",className:"navds-textarea__sr-counter navds-sr-only"},G(f,s)),o.createElement(q,{className:F("navds-textarea__counter",{"navds-textarea__counter--error":l<0}),size:t},G(l,s)))},G=(e,n)=>e<0?n("charsTooMany",{chars:Math.abs(e)}):n("charsLeft",{chars:e});var De=function(e,n){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(e);r<t.length;r++)n.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(e,t[r])&&(a[t[r]]=e[t[r]]);return a};const Ce=m.forwardRef((e,n)=>{var a,t,r;const{inputProps:s,errorId:l,showErrorMsg:f,hasError:E,size:i,inputDescriptionId:_}=pe(e,"textarea"),{label:b,className:y,description:d,maxLength:T,hideLabel:L=!1,resize:x,UNSAFE_autoScrollbar:z,i18n:j,readOnly:w}=e,c=De(e,["label","className","description","maxLength","hideLabel","resize","UNSAFE_autoScrollbar","i18n","readOnly"]),M=be(),D=T!==void 0&&T>0,[g,O]=m.useState((a=e==null?void 0:e.defaultValue)!==null&&a!==void 0?a:""),v=()=>{let h=c!=null&&c.minRows?c==null?void 0:c.minRows:3;return i==="small"&&(h=c!=null&&c.minRows?c==null?void 0:c.minRows:2),h},u=F(s["aria-describedby"],{[M??""]:D});return o.createElement("div",{className:F(y,"navds-form-field",`navds-form-field--${i}`,{"navds-form-field--disabled":!!s.disabled,"navds-form-field--readonly":w,"navds-textarea--readonly":w,"navds-textarea--error":E,"navds-textarea--autoscrollbar":z,[`navds-textarea--resize-${x===!0?"both":x}`]:x})},o.createElement(ye,{htmlFor:s.id,size:i,className:F("navds-form-field__label",{"navds-sr-only":L})},w&&o.createElement(xe,null),b),!!d&&o.createElement(q,{className:F("navds-form-field__description",{"navds-sr-only":L}),id:_,size:i,as:"div"},d),o.createElement(Ae,Object.assign({},we(c,["error","errorId","size"]),s,{onChange:Oe(e.onChange,e.value===void 0?h=>O(h.target.value):void 0),minRows:v(),autoScrollbar:z,ref:n,readOnly:w,className:F("navds-textarea__input","navds-body-short",`navds-body-short--${i??"medium"}`)},u?{"aria-describedby":u}:{})),D&&!w&&!s.disabled&&o.createElement(ke,{maxLengthId:M,maxLength:T,currentLength:(r=(t=e.value)===null||t===void 0?void 0:t.length)!==null&&r!==void 0?r:g.length,size:i,i18n:j}),o.createElement("div",{className:"navds-form-field__error",id:l,"aria-relevant":"additions removals","aria-live":"polite"},f&&o.createElement(_e,{size:i},e.error)))}),He="_textAreaFieldWithBadges_bdz0b_1",Pe="_etikettWrapper_bdz0b_4",J={textAreaFieldWithBadges:He,etikettWrapper:Pe},me=({name:e,label:n,readOnly:a,maxLength:t,badges:r,validate:s=[],parse:l=b=>b,className:f,description:E,isEdited:i,..._})=>{const{formState:{errors:b}}=Te(),{field:y}=Se({name:e,rules:{validate:m.useMemo(()=>Ee(s),[s])}});return a?k.jsx(ze,{label:n,value:y.value,type:"textarea",isEdited:i,hideLabel:_.hideLabel}):k.jsxs("div",{className:r?J.textAreaFieldWithBadges:null,children:[r&&k.jsx("div",{className:J.etikettWrapper,children:r.map(({type:d,titleText:T})=>k.jsx(Le,{variant:d,size:"small",children:T},T))}),k.jsx(Ce,{size:"small",label:n,description:E,className:f,autoComplete:"off",...y,onChange:d=>y.onChange(d.currentTarget.value!==""?l(d.currentTarget.value):null),value:y.value?y.value:"",error:Re(b,e),maxLength:t,..._})]})};me.__docgenInfo={description:"",methods:[],displayName:"TextAreaField",props:{name:{required:!0,tsType:{name:"string"},description:""},label:{required:!0,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},readOnly:{required:!1,tsType:{name:"boolean"},description:""},maxLength:{required:!1,tsType:{name:"number"},description:""},badges:{required:!1,tsType:{name:"Array",elements:[{name:"Badges"}],raw:"Badges[]"},description:""},validate:{required:!1,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"((value: string) => any)[]"},description:"",defaultValue:{value:"[]",computed:!1}},parse:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string | number) => string | number",signature:{arguments:[{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"value"}],return:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]}}},description:"",defaultValue:{value:"value => value",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},description:{required:!1,tsType:{name:"string"},description:""},isEdited:{required:!1,tsType:{name:"boolean"},description:""}},composes:["TextareaProps"]};const Ze={component:me,tags:["autodocs"],decorators:Fe({testTextAreaFieldPre:"Dette er en begrunnelse"})},H={args:{label:"Dette er et tekstfelt",name:"testTextAreaField"}},P={args:{label:"Dette er et tekstfelt der verdi er valgt",name:"testTextAreaFieldPre"}},W={args:{label:"Dette er et tekstfelt som er readonly",name:"testTextAreaFieldPre",readOnly:!0}},I={args:{label:"Dette er et tekstfelt med maks lengde",name:"testTextAreaField",maxLength:50}},B={args:{label:"Dette er et tekstfelt med badge",name:"testTextAreaField",badges:[{type:"warning",titleText:"Dette er en test"}]}};var K,Q,X;H.parameters={...H.parameters,docs:{...(K=H.parameters)==null?void 0:K.docs,source:{originalSource:`{
  args: {
    label: 'Dette er et tekstfelt',
    name: 'testTextAreaField'
  }
}`,...(X=(Q=H.parameters)==null?void 0:Q.docs)==null?void 0:X.source}}};var Y,ee,te;P.parameters={...P.parameters,docs:{...(Y=P.parameters)==null?void 0:Y.docs,source:{originalSource:`{
  args: {
    label: 'Dette er et tekstfelt der verdi er valgt',
    name: 'testTextAreaFieldPre'
  }
}`,...(te=(ee=P.parameters)==null?void 0:ee.docs)==null?void 0:te.source}}};var re,ae,ne;W.parameters={...W.parameters,docs:{...(re=W.parameters)==null?void 0:re.docs,source:{originalSource:`{
  args: {
    label: 'Dette er et tekstfelt som er readonly',
    name: 'testTextAreaFieldPre',
    readOnly: true
  }
}`,...(ne=(ae=W.parameters)==null?void 0:ae.docs)==null?void 0:ne.source}}};var se,oe,le;I.parameters={...I.parameters,docs:{...(se=I.parameters)==null?void 0:se.docs,source:{originalSource:`{
  args: {
    label: 'Dette er et tekstfelt med maks lengde',
    name: 'testTextAreaField',
    maxLength: 50
  }
}`,...(le=(oe=I.parameters)==null?void 0:oe.docs)==null?void 0:le.source}}};var ie,de,ce;B.parameters={...B.parameters,docs:{...(ie=B.parameters)==null?void 0:ie.docs,source:{originalSource:`{
  args: {
    label: 'Dette er et tekstfelt med badge',
    name: 'testTextAreaField',
    badges: [{
      type: 'warning',
      titleText: 'Dette er en test'
    }]
  }
}`,...(ce=(de=B.parameters)==null?void 0:de.docs)==null?void 0:ce.source}}};const Ge=["Default","MedVerdi","ReadOnly","MedMaxLength","MedMBadge"];export{H as Default,B as MedMBadge,I as MedMaxLength,P as MedVerdi,W as ReadOnly,Ge as __namedExportsOrder,Ze as default};
