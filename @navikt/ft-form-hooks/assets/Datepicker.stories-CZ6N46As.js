import{j as fe,a as pe,b as me,g as De,d as ge,r as ve}from"./formUtils-BWeRpG_s.js";import{j as G}from"./jsx-runtime-CLpGMVip.js";import{r as f}from"./index-CZMpeKRu.js";import{p as H,i as _,d as x,a as K,b as k,A as F,P as E}from"./index.es-CFZQi2ss.js";import{f as T,i as Q,g as ye,c as ke,D as U}from"./customParseFormat-BMBqJKht.js";import{R as be}from"./ReadOnlyField-Ceh848eb.js";import"./v4-CtRu48qb.js";import"./index-Dy_t9DXc.js";import"./index-D-TIQtLp.js";import"./useClientLayoutEffect-vYulKaSf.js";import"./Select-DLqYi9ca.js";const he=(b={})=>Object.assign({isDisabled:!1,isWeekend:!1,isEmpty:!1,isInvalid:!1,isBefore:!1,isAfter:!1,isValidDate:!0},b),we=(b={})=>{var h;const{locale:P,required:q,defaultSelected:M,today:l=new Date,fromDate:i,toDate:D,disabled:g,disableWeekends:V,onDateChange:w,inputFormat:o,onValidate:S,defaultMonth:u,allowTwoDigitYear:r=!0}=b,[m,W]=f.useState(null),C=fe(),c=P?ye(P):C,[s,L]=f.useState(M),[Y,n]=f.useState((h=s??u)!==null&&h!==void 0?h:l),[t,I]=f.useState(s),[J,ue]=f.useState(!1),O=s?T(s,c,"date",o):"",[ce,v]=f.useState(O),z=f.useCallback(a=>{var e,d;ue(a),a&&n((d=(e=t??s)!==null&&e!==void 0?e:u)!==null&&d!==void 0?d:l)},[u,s,t,l]),y=a=>{w==null||w(a),I(a)},R=(a={})=>S==null?void 0:S(he(a));return{datepickerProps:{month:Y,onMonthChange:n,onDayClick:(a,{selected:e})=>{if(!(e&&q)){if(a&&!e&&(z(!1),m==null||m.focus()),e){y(void 0),v(""),R({isValidDate:!1,isEmpty:!0});return}y(a),R(),n(a),v(a?T(a,c,"date",o):"")}},selected:t??new Date("Invalid date"),locale:P,fromDate:i,toDate:D,today:l,open:J,onClose:()=>{z(!1),m==null||m.focus()},onOpenToggle:()=>z(!J),disabled:g,disableWeekends:V},inputProps:{onChange:a=>{v(a.target.value);const e=H(a.target.value,l,c,"date",r),d=i&&e&&x(i,e)>0,p=D&&e&&x(e,D)>0;if(!_(e)||V&&Q(e)||g&&K(e,g)){y(void 0),R({isInvalid:!_(e),isWeekend:V&&Q(e),isDisabled:g&&K(e,g),isValidDate:!1,isEmpty:!a.target.value,isBefore:d??!1,isAfter:p??!1});return}if(d||p){y(void 0),R({isValidDate:!1,isBefore:d??!1,isAfter:p??!1});return}y(e),R(),n(u??e)},onFocus:a=>{if(a.target.readOnly)return;const e=H(a.target.value,l,c,"date",r);if(_(e)){v(T(e,c,"date",o));const d=i&&e&&x(i,e)>0,p=D&&e&&x(e,D)>0;!d&&!p&&n(e)}},onBlur:a=>{const e=H(a.target.value,l,c,"date",r);_(e)&&v(T(e,c,"date",o))},value:ce,setAnchorRef:W},reset:()=>{var a;y(s),n((a=s??u)!==null&&a!==void 0?a:l),v(O??""),L(M)},selectedDay:t,setSelected:a=>{var e;y(a),n((e=a??u)!==null&&e!==void 0?e:l),v(a?T(a,c,"date",o):"")}}};k.extend(ke);const oe=({name:b,label:h,description:P,validate:q=[],disabled:M=!1,isReadOnly:l=!1,onChange:i,disabledDays:D,isEdited:g,defaultMonth:V,fromDate:w,toDate:o,size:S="small"})=>{const{formState:{errors:u}}=pe(),{field:r}=me({name:b,rules:{validate:f.useMemo(()=>De(q),[q])}}),m=r.value?k(r.value,F,!0).format(E):"",[W,C]=f.useState(m),{datepickerProps:c,inputProps:s}=we({onDateChange:n=>{if(n!==void 0){const t=k(n).format(F);i&&i(t),r.onChange(t),C(k(t,F,!0).format(E))}},defaultSelected:r.value?k(r.value,F,!0).toDate():void 0,defaultMonth:V||(!r.value&&o?o:void 0),disabled:D}),L=f.useCallback(n=>{const t=k(n.target.value,E,!0).format(F),I=t!=="Invalid Date";C(n.target.value),i&&i(I?t:n.target.value),r.onChange(I?t:n.target.value)},[C,i,r]);if(l)return G.jsx(be,{label:h,value:r.value?k(r.value,F,!0).format(E):void 0,isEdited:g,size:S});const Y={...c,fromDate:w,toDate:o,dropdownCaption:w&&o?!0:void 0};return G.jsx(U,{...Y,children:G.jsx(U.Input,{...s,onChange:L,value:W,size:S,label:h,description:P,disabled:M,error:ge(u,b)})})};oe.__docgenInfo={description:"",methods:[],displayName:"Datepicker",props:{name:{required:!0,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},description:{required:!1,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},validate:{required:!1,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"((value: string) => any)[]"},description:"",defaultValue:{value:"[]",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isReadOnly:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: any) => void",signature:{arguments:[{type:{name:"any"},name:"value"}],return:{name:"void"}}},description:""},disabledDays:{required:!1,tsType:{name:"DatePickerProps['disabled']",raw:"DatePickerProps['disabled']"},description:""},isEdited:{required:!1,tsType:{name:"boolean"},description:""},defaultMonth:{required:!1,tsType:{name:"Date"},description:""},size:{required:!1,tsType:{name:"union",raw:"'medium' | 'small'",elements:[{name:"literal",value:"'medium'"},{name:"literal",value:"'small'"}]},description:"",defaultValue:{value:"'small'",computed:!1}},fromDate:{required:!1,tsType:{name:"Date"},description:""},toDate:{required:!1,tsType:{name:"Date"},description:""}}};const Le={component:oe,tags:["autodocs"],decorators:ve({datepickerFieldPre:"2022-10-11"})},j={args:{name:"datepickerField",label:"Dette er en datepicker",description:"Dette er en nærmere beskrivelse"}},A={args:{name:"datepickerField",label:"Dette er en datepicker med disabled datoer",fromDate:new Date("2024-10-12"),toDate:new Date("2025-02-24"),defaultMonth:new Date("2024-11-11")}},B={args:{label:"Dette er en datepicker der verdi er valgt",name:"datepickerFieldPre",fromDate:new Date("2022-10-02"),toDate:new Date("2022-10-24")}},N={args:{label:"Dette er en datepicker som er readonly",name:"datepickerFieldPre",isReadOnly:!0,isEdited:!0}};var X,Z,$;j.parameters={...j.parameters,docs:{...(X=j.parameters)==null?void 0:X.docs,source:{originalSource:`{
  args: {
    name: 'datepickerField',
    label: 'Dette er en datepicker',
    description: 'Dette er en nærmere beskrivelse'
  }
}`,...($=(Z=j.parameters)==null?void 0:Z.docs)==null?void 0:$.source}}};var ee,ae,te;A.parameters={...A.parameters,docs:{...(ee=A.parameters)==null?void 0:ee.docs,source:{originalSource:`{
  args: {
    name: 'datepickerField',
    label: 'Dette er en datepicker med disabled datoer',
    fromDate: new Date('2024-10-12'),
    toDate: new Date('2025-02-24'),
    defaultMonth: new Date('2024-11-11')
  }
}`,...(te=(ae=A.parameters)==null?void 0:ae.docs)==null?void 0:te.source}}};var ne,re,se;B.parameters={...B.parameters,docs:{...(ne=B.parameters)==null?void 0:ne.docs,source:{originalSource:`{
  args: {
    label: 'Dette er en datepicker der verdi er valgt',
    name: 'datepickerFieldPre',
    fromDate: new Date('2022-10-02'),
    toDate: new Date('2022-10-24')
  }
}`,...(se=(re=B.parameters)==null?void 0:re.docs)==null?void 0:se.source}}};var de,le,ie;N.parameters={...N.parameters,docs:{...(de=N.parameters)==null?void 0:de.docs,source:{originalSource:`{
  args: {
    label: 'Dette er en datepicker som er readonly',
    name: 'datepickerFieldPre',
    isReadOnly: true,
    isEdited: true
  }
}`,...(ie=(le=N.parameters)==null?void 0:le.docs)==null?void 0:ie.source}}};const Ye=["Default","MedDisabledDatoer","MedVerdi","ReadOnly"];export{j as Default,A as MedDisabledDatoer,B as MedVerdi,N as ReadOnly,Ye as __namedExportsOrder,Le as default};
